import{r as Fe,a as Pe,g as $e}from"./vendor-react.js";import{r as g,R as Ae,a as me,B as Ve,C as Be,X as Ue,Y as ze,T as he,b as je,P as we,c as ye,d as Ne}from"./vendor-recharts.js";import"./vendor-utils.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))b(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&b(a)}).observe(document,{childList:!0,subtree:!0});function l(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function b(c){if(c.ep)return;c.ep=!0;const i=l(c);fetch(c.href,i)}})();var pe={exports:{}},X={};var Se;function Ye(){if(Se)return X;Se=1;var t=Fe(),m=Symbol.for("react.element"),l=Symbol.for("react.fragment"),b=Object.prototype.hasOwnProperty,c=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(d,f,p){var x,u={},o=null,s=null;p!==void 0&&(o=""+p),f.key!==void 0&&(o=""+f.key),f.ref!==void 0&&(s=f.ref);for(x in f)b.call(f,x)&&!i.hasOwnProperty(x)&&(u[x]=f[x]);if(d&&d.defaultProps)for(x in f=d.defaultProps,f)u[x]===void 0&&(u[x]=f[x]);return{$$typeof:m,type:d,key:o,ref:s,props:u,_owner:c.current}}return X.Fragment=l,X.jsx=a,X.jsxs=a,X}var ke;function Ge(){return ke||(ke=1,pe.exports=Ye()),pe.exports}var e=Ge(),ae={},Ee;function He(){if(Ee)return ae;Ee=1;var t=Pe();return ae.createRoot=t.createRoot,ae.hydrateRoot=t.hydrateRoot,ae}var Ke=He();const We=$e(Ke);var K=(t=>(t.USD="USD",t.EUR="EUR",t.GBP="GBP",t.JPY="JPY",t.CAD="CAD",t.AUD="AUD",t.INR="INR",t.CNY="CNY",t))(K||{}),k=(t=>(t.INCOME="income",t.EXPENSE="expense",t))(k||{}),I=(t=>(t.FOOD="Food",t.TRANSPORT="Transport",t.HOUSING="Housing",t.UTILITIES="Utilities",t.ENTERTAINMENT="Entertainment",t.HEALTH="Health",t.INCOME="Salary",t.SHOPPING="Shopping",t.SAVINGS="Savings",t.RENTAL="Rental",t.FREELANCE="Freelance",t.BONUS="Bonus",t.INVESTMENTS="Investments",t.REFUNDS="Refunds",t.GIFT="Gift",t.OTHER="Other",t))(I||{}),U=(t=>(t.WEEKLY="Weekly",t.MONTHLY="Monthly",t.YEARLY="Yearly",t))(U||{});const qe=1e5,Xe=16,be=12;class Je{constructor(){this.key=null}async deriveKey(m,l){const b=new TextEncoder,c=await window.crypto.subtle.importKey("raw",b.encode(m),{name:"PBKDF2"},!1,["deriveKey"]),i=l||window.crypto.getRandomValues(new Uint8Array(Xe)),a=await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:qe,hash:"SHA-256"},c,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);return this.key=a,{key:a,salt:i}}hasKey(){return this.key!==null}clearKey(){this.key=null}async encrypt(m){if(!this.key)throw new Error("Key not initialized");const l=new TextEncoder,b=window.crypto.getRandomValues(new Uint8Array(be)),c=l.encode(m),i=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:b},this.key,c),a=new Uint8Array(b.byteLength+i.byteLength);return a.set(b,0),a.set(new Uint8Array(i),b.byteLength),this.arrayBufferToBase64(a)}async decrypt(m){if(!this.key)throw new Error("Key not initialized");const l=this.base64ToArrayBuffer(m),b=l.slice(0,be),c=l.slice(be),i=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:b},this.key,c);return new TextDecoder().decode(i)}arrayBufferToBase64(m){let l="";const b=m.byteLength;for(let c=0;c<b;c++)l+=String.fromCharCode(m[c]);return window.btoa(l)}base64ToArrayBuffer(m){const l=window.atob(m),b=l.length,c=new Uint8Array(b);for(let i=0;i<b;i++)c[i]=l.charCodeAt(i);return c}}const z=new Je,Ce="vf_rates_cache",Qe=1e3*60*60*24,Ze=async t=>{const m=localStorage.getItem(Ce);if(m)try{const l=JSON.parse(m),b=Date.now()-l.timestamp<Qe,c=l.base===t;if(b&&c)return l.rates}catch{}try{const l=await fetch(`https://open.er-api.com/v6/latest/${t}`);if(!l.ok)throw new Error("Failed to fetch rates");const c=(await l.json()).rates,i={timestamp:Date.now(),base:t,rates:c};return localStorage.setItem(Ce,JSON.stringify(i)),c}catch{return m?JSON.parse(m).rates:{[t]:1}}},ne=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),te=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5v14"})]}),se=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),oe=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),e.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),ie=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),e.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),e.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),et=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),De=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),fe=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"m17 2 4 4-4 4"}),e.jsx("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),e.jsx("path",{d:"m7 22-4-4 4-4"}),e.jsx("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]}),ge=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"6"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),tt=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.3-4.3"})]}),Re=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),e.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),e.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),Y="vf_encrypted_vault",G="vf_salt",ee="vf_vault_name",ve=300*1e3,re=["#f87171","#fbbf24","#f472b6","#a78bfa","#f97316","#e11d48","#c084fc"],le=["#34d399","#60a5fa","#2dd4bf","#818cf8","#4ade80","#22d3ee","#6366f1"],H=[I.INCOME,I.SAVINGS,I.RENTAL,I.FREELANCE,I.BONUS,I.INVESTMENTS,I.REFUNDS,I.GIFT,I.OTHER],J={transactions:[],recurring:[],goals:[],baseCurrency:K.USD,theme:"dark",autoLockDuration:ve,customCategories:[]},Q=(t,m)=>{const l=Math.abs(t)>=1e3;return new Intl.NumberFormat(void 0,{style:"currency",currency:m,notation:l?"compact":"standard",maximumFractionDigits:l?3:2,minimumFractionDigits:l?0:2}).format(t)},$=t=>{const m=Math.abs(t)>=1e3;return new Intl.NumberFormat(void 0,{notation:m?"compact":"standard",maximumFractionDigits:m?3:2,minimumFractionDigits:m?0:2}).format(t)};function st(){const[t,m]=g.useState(!!localStorage.getItem(G)),[l,b]=g.useState(!1),[c,i]=g.useState(""),[a,d]=g.useState(!1),[f,p]=g.useState(null),[x,u]=g.useState(localStorage.getItem(ee)||""),[o,s]=g.useState(J),[y,C]=g.useState({}),[n,r]=g.useState("dashboard"),[S,h]=g.useState(!1),[R,N]=g.useState(!1),L=g.useRef(Date.now());g.useEffect(()=>{if(!l)return;const v=o.autoLockDuration!==void 0?o.autoLockDuration:ve;if(v===0)return;const w=()=>{Date.now()-L.current>v&&V()},j=()=>{L.current=Date.now()},D=setInterval(w,1e4);return window.addEventListener("mousemove",j),window.addEventListener("keydown",j),window.addEventListener("click",j),()=>{clearInterval(D),window.removeEventListener("mousemove",j),window.removeEventListener("keydown",j),window.removeEventListener("click",j)}},[l,o.autoLockDuration]);const A=async(v,w,j)=>{if(v.preventDefault(),p(null),j.length<4){p("Password is too short (min 4 chars).");return}if(w.length>21){p("Vault Name must be 21 characters or less.");return}d(!0);try{const{salt:D}=await z.deriveKey(j),T=btoa(String.fromCharCode(...D));localStorage.setItem(G,T),w&&(localStorage.setItem(ee,w),u(w));const E={...J,vaultName:w},B=JSON.stringify(E),xe=await z.encrypt(B);localStorage.setItem(Y,xe),s(E),m(!0),b(!0),i("")}catch{p("Failed to create vault.")}finally{d(!1)}},P=v=>{new Date().setHours(0,0,0,0),(v.recurring||[]).forEach(D=>{if(!D.active)return;new Date(D.nextDueDate).setHours(0,0,0,0)})},W=async v=>{v.preventDefault(),d(!0),p(null);try{const w=localStorage.getItem(G),j=localStorage.getItem(Y);if(!w){m(!1);return}const D=new Uint8Array(atob(w).split("").map(T=>T.charCodeAt(0)));if(await z.deriveKey(c,D),j)try{const T=await z.decrypt(j),E=JSON.parse(T);let B=!1;const xe=E.transactions.map(ue=>ue.recordedBaseCurrency?ue:(B=!0,{...ue,recordedBaseCurrency:E.baseCurrency}));E.recurring||(E.recurring=[],B=!0),E.goals||(E.goals=[],B=!0),E.autoLockDuration===void 0&&(E.autoLockDuration=ve,B=!0),E.customCategories||(E.customCategories=[],B=!0),B&&(E.transactions=xe,F(E)),E.vaultName&&E.vaultName!==x&&(localStorage.setItem(ee,E.vaultName),u(E.vaultName)),s(E),b(!0),P(E)}catch{p("Incorrect password.")}else s(J),b(!0)}catch{p("An error occurred during authentication.")}finally{d(!1),i("")}},V=()=>{z.clearKey(),b(!1),i(""),s(J),r("dashboard")},q=()=>{localStorage.clear(),z.clearKey(),s(J),b(!1),m(!1),i(""),u(""),r("dashboard")},F=async v=>{try{const w=JSON.stringify(v),j=await z.encrypt(w);localStorage.setItem(Y,j)}catch{alert("Failed to save data securely!")}},O=v=>{s(v),F(v)};g.useEffect(()=>{l&&(async()=>{const w=await Ze(o.baseCurrency);C(w)})()},[l,o.baseCurrency]);const _=g.useCallback((v,w,j)=>{if(w===j||!y[w]&&!y[j])return v;if(j===o.baseCurrency){const E=y[w];return E?v/E:v}if(w===o.baseCurrency){const E=y[j];return E?v*E:v}const D=y[w],T=y[j];return!D||!T?v:v/D*T},[y,o.baseCurrency]),M=g.useCallback(v=>{if(v.exchangeRate&&v.recordedBaseCurrency){const w=v.amount/v.exchangeRate;return _(w,v.recordedBaseCurrency,o.baseCurrency)}return _(v.amount,v.currency,o.baseCurrency)},[o.baseCurrency,_]),Te=g.useMemo(()=>o.transactions.reduce((v,w)=>{const j=M(w);return v+(w.type===k.INCOME?j:-j)},0),[o.transactions,M]),ce=g.useMemo(()=>{const v=o.transactions.filter(j=>j.type===k.EXPENSE),w={};return v.forEach(j=>{const D=M(j);w[j.category]=(w[j.category]||0)+D}),Object.entries(w).map(([j,D])=>({name:j,value:D}))},[o.transactions,M]),de=g.useMemo(()=>{const v=o.transactions.filter(j=>j.type===k.INCOME),w={};return v.forEach(j=>{const D=M(j);w[j.category]=(w[j.category]||0)+D}),Object.entries(w).map(([j,D])=>({name:j,value:D}))},[o.transactions,M]),Oe=g.useMemo(()=>de.reduce((v,w)=>v+w.value,0),[de]),Me=g.useMemo(()=>ce.reduce((v,w)=>v+w.value,0),[ce]),_e=g.useMemo(()=>{const v={},w=new Date;for(let j=5;j>=0;j--){const T=new Date(w.getFullYear(),w.getMonth()-j,1).toLocaleString("default",{month:"short"});v[T]={income:0,expense:0}}return o.transactions.forEach(j=>{const D=new Date(j.date);if(w.getTime()-D.getTime()<4320*60*60*1e3){const T=D.toLocaleString("default",{month:"short"});if(v[T]){const E=M(j);j.type===k.INCOME?v[T].income+=E:v[T].expense+=E}}}),Object.entries(v).map(([j,D])=>({name:j,Income:D.income,Expense:D.expense}))},[o.transactions,M]);return t?l?e.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col md:flex-row text-slate-200 font-sans",children:[e.jsxs("aside",{className:"hidden md:flex flex-col w-64 border-r border-slate-800 bg-slate-950 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-xl shadow-lg shadow-brand-500/20",children:e.jsx(ne,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:"font-bold text-lg tracking-tight text-white flex flex-col leading-tight min-w-0",children:[e.jsx("span",{children:"Vault Finance"}),e.jsx("span",{className:"text-xs text-brand-400 font-mono font-medium tracking-wider cursor-default",children:"v1.0.0"})]})]}),e.jsxs("nav",{className:"flex-1 space-y-2",children:[e.jsx(Z,{active:n==="dashboard",onClick:()=>r("dashboard"),icon:e.jsx(oe,{}),label:"Dashboard"}),e.jsx(Z,{active:n==="transactions",onClick:()=>r("transactions"),icon:e.jsx(ie,{}),label:"Transactions"}),e.jsx(Z,{active:n==="recurring",onClick:()=>r("recurring"),icon:e.jsx(fe,{}),label:"Recurring"}),e.jsx(Z,{active:n==="goals",onClick:()=>r("goals"),icon:e.jsx(ge,{}),label:"Goals"}),e.jsx(Z,{active:n==="settings",onClick:()=>r("settings"),icon:e.jsx(et,{}),label:"Settings"})]}),e.jsxs("button",{onClick:V,className:"flex items-center gap-3 text-slate-500 hover:text-white transition-colors mt-auto pt-6 border-t border-slate-800 text-sm font-medium px-2",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:"Lock Vault"})]})]}),e.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-slate-800 bg-slate-950/80 backdrop-blur-md sticky top-0 z-20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-lg",children:e.jsx(ne,{className:"w-5 h-5 text-white"})}),e.jsxs("span",{className:"font-bold text-lg text-white flex flex-col leading-tight min-w-0",children:[e.jsx("span",{children:"Vault Finance"}),e.jsx("span",{className:"text-xs text-brand-400 font-mono font-medium tracking-wider cursor-default",children:"v1.0.0"})]})]}),e.jsx("button",{onClick:V,className:"text-slate-500 hover:text-white",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("main",{className:"flex-1 overflow-y-auto h-screen relative scrollbar-hide bg-slate-950",children:e.jsxs("div",{className:"p-6 max-w-6xl mx-auto pb-24 md:pb-6 relative z-10",children:[n==="dashboard"&&e.jsx(lt,{balance:Te,totalIncome:Oe,totalExpense:Me,baseCurrency:o.baseCurrency,expensesByCategory:ce,incomeByCategory:de,monthlyData:_e,recentTransactions:o.transactions.slice(0,5),onAddTransaction:()=>h(!0),onViewAll:()=>r("transactions")}),n==="transactions"&&e.jsx(nt,{transactions:o.transactions,baseCurrency:o.baseCurrency,onDelete:v=>O({...o,transactions:o.transactions.filter(w=>w.id!==v)}),onAdd:()=>h(!0),getTransactionValue:M,customCategories:o.customCategories}),n==="recurring"&&e.jsx(ot,{data:o,onUpdate:O,baseCurrency:o.baseCurrency,exchangeRates:y}),n==="goals"&&e.jsx(it,{data:o,onUpdate:O,baseCurrency:o.baseCurrency,convertAmount:_}),n==="settings"&&e.jsx(ct,{data:o,onUpdateData:O,onVaultDeleted:()=>{m(!1),b(!1),localStorage.clear()},exchangeRates:y})]})}),e.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-slate-950 border-t border-slate-800 flex justify-around p-4 z-20 pb-8",children:[e.jsx("button",{onClick:()=>r("dashboard"),className:`${n==="dashboard"?"text-white":"text-slate-500"}`,children:e.jsx(oe,{})}),e.jsx("button",{onClick:()=>r("transactions"),className:`${n==="transactions"?"text-white":"text-slate-500"}`,children:e.jsx(ie,{})}),e.jsx("button",{onClick:()=>h(!0),className:"bg-brand-600 text-white p-3 rounded-full -mt-10 border-4 border-slate-950 shadow-lg shadow-brand-900/40",children:e.jsx(te,{})}),e.jsx("button",{onClick:()=>r("recurring"),className:`${n==="recurring"?"text-white":"text-slate-500"}`,children:e.jsx(fe,{})}),e.jsx("button",{onClick:()=>r("goals"),className:`${n==="goals"?"text-white":"text-slate-500"}`,children:e.jsx(ge,{})})]}),S&&e.jsx(dt,{onClose:()=>h(!1),onSave:v=>{O({...o,transactions:[v,...o.transactions]}),h(!1)},baseCurrency:o.baseCurrency,exchangeRates:y,customCategories:o.customCategories})]}):e.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 inset-0 bg-gradient-to-b from-slate-900 to-slate-950"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-brand-900/10 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"w-full max-w-md bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl relative z-10 animate-in fade-in zoom-in-95 duration-500",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-brand-600 rounded-2xl shadow-lg shadow-brand-500/20",children:e.jsx(ne,{className:"w-10 h-10 text-white"})})}),e.jsx("div",{className:"flex justify-center mb-2",children:x?e.jsx("h1",{className:"text-2xl font-bold text-center text-white truncate max-w-[300px]",children:x}):e.jsx("h1",{className:"text-2xl font-bold text-center text-white",children:"Vault Locked"})}),e.jsx("p",{className:"text-slate-400 text-center mb-8 text-sm",children:x?"Enter your master password to access your vault.":"Enter your master password to decrypt."}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"password",value:c,onChange:v=>i(v.target.value),placeholder:"Master Password",className:"w-full bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-transparent transition-all placeholder:text-slate-600",autoFocus:!0})}),f&&e.jsx("p",{className:"text-red-400 text-sm text-center bg-red-900/20 py-2 rounded-lg border border-red-900/50",children:f}),e.jsx("button",{type:"submit",disabled:!c||a,className:"w-full bg-brand-600 hover:bg-brand-500 text-white font-semibold py-3 rounded-xl transition-all shadow-lg shadow-brand-600/20 disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center",children:a?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Unlock Vault"})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("button",{onClick:()=>N(!0),className:"text-xs text-slate-500 hover:text-red-400 transition-colors",children:"Reset Vault (Delete Data)"})}),R&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-8 w-full max-w-sm shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-red-500/10 rounded-2xl",children:e.jsx(se,{className:"w-8 h-8 text-red-500"})})}),e.jsx("h3",{className:"text-xl font-bold text-white text-center mb-2",children:"Reset Entire Vault?"}),e.jsxs("p",{className:"text-slate-400 text-sm text-center mb-8",children:["This will perform a hard reset. All your data will be"," ",e.jsx("strong",{children:"permanently deleted"}),". This action cannot be undone."]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:()=>{q(),N(!1)},className:"w-full bg-red-600 hover:bg-red-500 text-white py-3.5 rounded-xl font-bold transition-all shadow-lg shadow-red-600/20",children:"Yes, Delete Everything"}),e.jsx("button",{onClick:()=>N(!1),className:"w-full bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-xl font-medium transition-colors",children:"Cancel"})]})]})})]})]}):e.jsx(at,{password:c,setPassword:i,onCreate:A,isLoading:a,error:f,onImportSuccess:()=>{m(!0),u(localStorage.getItem(ee)||"")}})}const at=({password:t,setPassword:m,onCreate:l,isLoading:b,error:c,onImportSuccess:i})=>{const[a,d]=g.useState("create"),[f,p]=g.useState(null),x=u=>{const o=u.target.files?.[0];if(p(null),!o)return;if(o.size===0){p("Import Failed: The selected file is empty."),u.target.value="";return}const s=new FileReader;s.onload=y=>{try{const C=(y.target?.result||"").trim();if(!C){p("Import Failed: File content is empty.");return}let n=!1;try{const r=JSON.parse(C);if(r.transactions&&Array.isArray(r.transactions)&&!r.salt){p("Security Error: Importing unencrypted raw JSON data is not allowed."),u.target.value="";return}r.salt&&r.data&&(localStorage.setItem(G,r.salt),localStorage.setItem(Y,r.data),n=!0)}catch{}if(!n&&!f&&C.includes("|")){const r=C.split("|");if(r.length>=2){const[S,h]=r;S&&h&&(localStorage.setItem(G,S),localStorage.setItem(Y,h),localStorage.setItem(G,S),localStorage.setItem(Y,h),n=!0)}}n?i():f||p("Invalid backup file format. Expected an encrypted .vf file.")}catch{p("Import Failed: An unexpected error occurred.")}u.target.value=""},s.readAsText(o)};return e.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 inset-0 bg-gradient-to-b from-slate-900 to-slate-950"}),e.jsxs("div",{className:"w-full max-w-lg bg-slate-900 border border-slate-800 rounded-3xl p-8 shadow-2xl relative z-10 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-2xl shadow-xl shadow-brand-500/20",children:e.jsx(ne,{className:"w-12 h-12 text-white"})})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome to Vault Finance"}),e.jsx("p",{className:"text-slate-400",children:"Secure, offline, personal finance tracking."})]}),e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl mb-8 border border-slate-800",children:[e.jsx("button",{onClick:()=>{d("create"),p(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all ${a==="create"?"bg-brand-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Create New Vault"}),e.jsx("button",{onClick:()=>{d("import"),p(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all ${a==="import"?"bg-brand-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Import Backup"})]}),a==="create"?e.jsx(rt,{onCreate:l,isLoading:b,error:c}):e.jsxs("div",{className:"animate-in fade-in duration-300 text-center py-8 bg-slate-950/50 rounded-2xl border border-slate-800 border-dashed",children:[e.jsx(ie,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-medium mb-1",children:"Upload Backup File"}),e.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Restore a .vf encrypted backup file."}),f&&e.jsx("div",{className:"mb-6 mx-4 p-3 bg-red-900/20 border border-red-900/50 rounded-xl text-sm text-red-400",children:f}),e.jsxs("label",{className:"bg-white hover:bg-slate-200 text-black px-6 py-3 rounded-xl font-bold cursor-pointer transition-all inline-block",children:["Select File",e.jsx("input",{type:"file",onChange:x,className:"hidden",accept:".json,.vf"})]})]})]})]})},rt=({onCreate:t,isLoading:m,error:l})=>{const[b,c]=g.useState(""),[i,a]=g.useState(""),d=f=>{t(f,b,i)};return e.jsxs("form",{onSubmit:d,className:"space-y-4 animate-in fade-in duration-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wider",children:"Vault Name"}),e.jsx("input",{type:"text",name:"username",value:b,maxLength:21,onChange:f=>c(f.target.value),className:"w-full bg-slate-900 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50",placeholder:"e.g. My Vault",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wider",children:"Set Master Password"}),e.jsx("input",{type:"password",value:i,onChange:f=>a(f.target.value),placeholder:"Create a strong password",className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-transparent transition-all placeholder:text-slate-600"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Your data will be encrypted with this password."})]}),l&&e.jsx("p",{className:"text-red-400 text-sm text-center bg-red-900/20 py-2 rounded-lg border border-red-900/50",children:l}),e.jsx("button",{type:"submit",disabled:!i||!b.trim()||m,className:"w-full bg-white hover:bg-slate-200 text-black font-bold py-3.5 rounded-xl transition-all shadow-lg mt-2 disabled:opacity-50",children:m?"Creating...":"Create Vault"})]})},Z=({active:t,onClick:m,icon:l,label:b})=>e.jsxs("button",{onClick:m,className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 border text-sm font-medium ${t?"bg-slate-900 border-slate-800 text-white shadow-sm":"bg-transparent border-transparent text-slate-500 hover:text-slate-300 hover:bg-slate-900/50"}`,children:[Ae.cloneElement(l,{className:`w-5 h-5 ${t?"text-brand-400":"text-current"}`}),e.jsx("span",{className:"",children:b})]}),lt=({balance:t,totalIncome:m,totalExpense:l,baseCurrency:b,expensesByCategory:c,incomeByCategory:i,monthlyData:a,recentTransactions:d,onAddTransaction:f,onViewAll:p})=>e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-brand-600 to-indigo-700 rounded-3xl p-8 text-white border border-brand-500/20 relative overflow-hidden shadow-2xl shadow-brand-900/30 group transition-all duration-500 hover:scale-[1.01] hover:shadow-brand-900/50",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-32 group-hover:bg-white/15 transition-colors duration-500"}),e.jsx("p",{className:"text-brand-100 font-medium mb-2 relative z-10 text-sm uppercase tracking-wider flex items-center gap-2",children:"Total Balance"}),e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold relative z-10 tracking-tight text-white drop-shadow-sm break-words leading-tight",children:Q(t,b)}),e.jsxs("button",{onClick:f,className:"mt-8 bg-white/10 hover:bg-white/20 backdrop-blur-md border border-white/20 py-2.5 px-5 rounded-xl text-sm font-semibold transition-all flex items-center gap-2 relative z-10 hover:scale-105 active:scale-95",children:[e.jsx(te,{className:"w-4 h-4"})," Add Transaction"]}),e.jsxs("div",{className:"mt-8 grid grid-cols-[4.5fr_5.5fr] gap-4 relative z-10 border-t border-white/10 pt-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-brand-100/60 uppercase tracking-wider mb-1",children:"Total Income"}),e.jsx("span",{className:"text-xl font-bold text-emerald-300",children:Q(m,b)})]}),e.jsxs("div",{className:"flex flex-col border-l border-white/10 pl-4",children:[e.jsx("span",{className:"text-xs text-brand-100/60 uppercase tracking-wider mb-1",children:"Total Expenses"}),e.jsx("span",{className:"text-xl font-bold text-rose-300",children:Q(l,b)})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-sm transition-all duration-300 hover:border-slate-700 hover:shadow-xl hover:shadow-black/20 hover:-translate-y-1",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-6 text-slate-100 flex items-center gap-2",children:["Analytics"," ",e.jsx("span",{className:"text-xs font-normal text-slate-400 bg-slate-950 px-2 py-0.5 rounded-full border border-slate-800",children:"Last 6 Months"})]}),e.jsx("div",{style:{width:"100%",height:300},children:e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(Ve,{data:a,children:[e.jsx(Be,{strokeDasharray:"3 3",stroke:"#27272a",vertical:!1}),e.jsx(Ue,{dataKey:"name",stroke:"#6b7280",tickLine:!1,axisLine:!1,fontSize:12,dy:10}),e.jsx(ze,{stroke:"#6b7280",tickLine:!1,axisLine:!1,fontSize:12,tickFormatter:x=>`${x/1e3}k`}),e.jsx(he,{formatter:x=>$(x),contentStyle:{backgroundColor:"#1c1c1e",border:"1px solid #374151",borderRadius:"8px",color:"#fff"},cursor:{fill:"rgba(255,255,255,0.03)"}}),e.jsx(je,{dataKey:"Income",fill:"#34d399",radius:[4,4,0,0],maxBarSize:40}),e.jsx(je,{dataKey:"Expense",fill:"#f87171",radius:[4,4,0,0],maxBarSize:40})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1.5fr_1fr] gap-6",children:[e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-sm flex flex-col h-[420px] transition-all duration-300 hover:border-slate-700 hover:shadow-xl hover:shadow-black/20 hover:-translate-y-1",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Financial Composition"})}),e.jsxs("div",{className:"flex-1 w-full min-h-0 relative grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("p",{className:"text-xs font-bold text-rose-400 mb-2 uppercase tracking-wider",children:"Expense"}),e.jsx("div",{className:"flex-1 w-full relative min-h-[150px]",children:c.length>0?e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(we,{children:[e.jsx(ye,{data:c,cx:"50%",cy:"50%",innerRadius:60,outerRadius:85,paddingAngle:5,dataKey:"value",stroke:"none",children:c.map((x,u)=>e.jsx(Ne,{fill:re[u%re.length]},`cell-${u}`))}),e.jsx(he,{formatter:x=>Q(x,b),contentStyle:{backgroundColor:"#1c1c1e",border:"1px solid #374151",borderRadius:"8px",color:"#fff"},itemStyle:{color:"#fff"}})]})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-20",children:e.jsx(oe,{className:"w-8 h-8"})})})]}),e.jsxs("div",{className:"flex flex-col items-center border-l border-slate-800 pl-2",children:[e.jsx("p",{className:"text-xs font-bold text-emerald-400 mb-2 uppercase tracking-wider",children:"Income"}),e.jsx("div",{className:"flex-1 w-full relative min-h-[150px]",children:i.length>0?e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(we,{children:[e.jsx(ye,{data:i,cx:"50%",cy:"50%",innerRadius:60,outerRadius:85,paddingAngle:5,dataKey:"value",stroke:"none",children:i.map((x,u)=>e.jsx(Ne,{fill:le[u%le.length]},`cell-${u}`))}),e.jsx(he,{formatter:x=>Q(x,b),contentStyle:{backgroundColor:"#1c1c1e",border:"1px solid #374151",borderRadius:"8px",color:"#fff"},itemStyle:{color:"#fff"}})]})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-20",children:e.jsx(oe,{className:"w-8 h-8"})})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2 justify-center max-h-16 overflow-y-auto",children:[c.slice(0,4).map((x,u)=>e.jsxs("span",{className:"text-[10px] bg-slate-950 text-slate-400 px-2 py-1 rounded-full border border-slate-800 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:re[u%re.length]}}),x.name]},`exp-${u}`)),i.slice(0,4).map((x,u)=>e.jsxs("span",{className:"text-[10px] bg-slate-950 text-slate-400 px-2 py-1 rounded-full border border-slate-800 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:le[u%le.length]}}),x.name]},`inc-${u}`))]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 flex flex-col shadow-sm h-[420px] transition-all duration-300 hover:border-slate-700 hover:shadow-xl hover:shadow-black/20 hover:-translate-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Recent Activity"}),e.jsx("button",{onClick:p,className:"text-xs text-brand-400 hover:text-brand-300 font-medium transition-colors",children:"View All"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-1 [&::-webkit-scrollbar]:hidden",children:[d.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500",children:[e.jsx(ie,{className:"w-8 h-8 mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"No recent activity."})]}),d.length>0&&e.jsx("div",{className:"space-y-3",children:d.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3.5 hover:bg-slate-950 rounded-2xl transition-all border border-transparent hover:border-slate-800 group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg ${x.type==="income"?"bg-emerald-500/10 text-emerald-500":"bg-rose-500/10 text-rose-500"}`,children:x.category.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-200 text-sm group-hover:text-white transition-colors",children:x.category}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(x.date).toLocaleDateString()})]})]}),e.jsxs("span",{className:`font-semibold text-sm ${x.type==="income"?"text-emerald-400":"text-slate-400"}`,children:[x.type==="income"?"+":"-",$(x.amount)," ",e.jsx("span",{className:"text-[10px] text-slate-500",children:x.currency})]})]},x.id))})]})]})]})]}),nt=({transactions:t,baseCurrency:m,onDelete:l,onAdd:b,getTransactionValue:c,customCategories:i})=>{const[a,d]=g.useState(""),[f,p]=g.useState("All"),[x,u]=g.useState("All"),[o,s]=g.useState("All"),y=g.useMemo(()=>{const n=t.map(r=>r.category);return Array.from(new Set(n)).sort()},[t]),C=g.useMemo(()=>t.filter(n=>{const r=n.description?.toLowerCase().includes(a.toLowerCase())||n.category.toLowerCase().includes(a.toLowerCase()),S=f==="All"||n.category===f,h=x==="All"||n.type===x;let R=!0;if(o!=="All"){const N=parseInt(o),L=new Date;L.setDate(L.getDate()-N),L.setHours(0,0,0,0),R=new Date(n.date)>=L}return r&&S&&h&&R}),[t,a,f,x,o]);return e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Transactions"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Manage your income and expenses."})]}),e.jsxs("button",{onClick:b,className:"bg-white hover:bg-slate-200 text-black px-5 py-2.5 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(te,{className:"w-4 h-4"})," New"]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-4 flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(tt,{className:"absolute left-3 top-3 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:a,onChange:n=>d(n.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl pl-9 pr-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50"})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-1 md:pb-0",children:[e.jsxs("select",{value:f,onChange:n=>p(n.target.value),className:"bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-sm text-slate-300 outline-none focus:ring-1 focus:ring-inset focus:ring-brand-500",children:[e.jsx("option",{value:"All",children:"All Categories"}),y.map(n=>e.jsx("option",{value:n,children:n},n))]}),e.jsxs("select",{value:x,onChange:n=>u(n.target.value),className:"bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-sm text-slate-300 outline-none focus:ring-1 focus:ring-inset focus:ring-brand-500",children:[e.jsx("option",{value:"All",children:"All Types"}),e.jsx("option",{value:k.INCOME,children:"Income"}),e.jsx("option",{value:k.EXPENSE,children:"Expense"})]}),e.jsxs("select",{value:o,onChange:n=>s(n.target.value),className:"bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-sm text-slate-300 outline-none focus:ring-1 focus:ring-inset focus:ring-brand-500",children:[e.jsx("option",{value:"All",children:"All Time"}),e.jsx("option",{value:"30",children:"Last 30 Days"}),e.jsx("option",{value:"90",children:"Last 90 Days"}),e.jsx("option",{value:"365",children:"Last Year"})]})]})]}),e.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm text-slate-400",children:[e.jsx("thead",{className:"bg-slate-950/50 uppercase text-xs font-semibold tracking-wider text-slate-500 border-b border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Date"}),e.jsx("th",{className:"px-6 py-4",children:"Category"}),e.jsx("th",{className:"px-6 py-4",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Amount (Orig)"}),e.jsxs("th",{className:"px-6 py-4 text-right",children:["Value (",m,")"]}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800/50",children:[C.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-slate-500",children:"No transactions found matching your filters."})}),C.map(n=>e.jsxs("tr",{className:"hover:bg-slate-950/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 text-slate-300 font-medium",children:new Date(n.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium border ${n.type==="income"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400":"bg-rose-500/10 border-rose-500/20 text-rose-400"}`,children:n.category})}),e.jsx("td",{className:"px-6 py-4 text-slate-400 max-w-xs",children:e.jsx("div",{className:"truncate",title:n.description||"",children:n.description||"-"})}),e.jsxs("td",{className:`px-6 py-4 text-right font-medium ${n.type==="income"?"text-emerald-400":"text-slate-400"}`,children:[$(n.amount)," ",e.jsx("span",{className:"text-xs text-slate-600",children:n.currency})]}),e.jsx("td",{className:`px-6 py-4 text-right font-medium ${n.type==="income"?"text-emerald-400":"text-slate-400"}`,children:$(c(n))}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>l(n.id),className:"p-2 text-slate-500 hover:text-rose-400 hover:bg-rose-500/10 rounded-lg transition-all",children:e.jsx(se,{className:"w-4 h-4"})})})]},n.id))]})]})})})]})},ot=({data:t,onUpdate:m,baseCurrency:l,exchangeRates:b})=>{const[c,i]=g.useState(!1),[a,d]=g.useState({frequency:U.MONTHLY,currency:l,category:I.UTILITIES,active:!0,type:k.EXPENSE,exchangeRate:void 0}),f=()=>{const s=new Date;return s.setHours(0,0,0,0),(t.recurring||[]).filter(y=>{const C=new Date(y.nextDueDate);return C.setHours(0,0,0,0),y.active&&C<=s})},p=s=>{const y=s.exchangeRate||(s.currency===l?1:b[s.currency]),C={id:crypto.randomUUID(),amount:s.amount,currency:s.currency,category:s.category,type:s.type||k.EXPENSE,date:new Date().toISOString(),description:`Recurring: ${s.name}`,recordedBaseCurrency:l,exchangeRate:y},n=new Date(s.nextDueDate);s.frequency===U.MONTHLY?n.setMonth(n.getMonth()+1):s.frequency===U.WEEKLY?n.setDate(n.getDate()+7):s.frequency===U.YEARLY&&n.setFullYear(n.getFullYear()+1);const r=t.recurring.map(S=>S.id===s.id?{...S,nextDueDate:n.toISOString()}:S);m({...t,transactions:[C,...t.transactions],recurring:r})},x=()=>{if(!a.name||!a.amount)return;const s={id:crypto.randomUUID(),name:a.name,amount:Number(a.amount),currency:a.currency||l,frequency:a.frequency||U.MONTHLY,category:a.category||I.UTILITIES,nextDueDate:a.nextDueDate||new Date().toISOString(),active:!0,type:a.type||k.EXPENSE,exchangeRate:a.exchangeRate?Number(a.exchangeRate):void 0};m({...t,recurring:[...t.recurring||[],s]}),i(!1),d({frequency:U.MONTHLY,currency:l,category:I.UTILITIES,active:!0,type:k.EXPENSE,exchangeRate:void 0})},u=s=>{const y=Object.values(I).filter(n=>s===k.INCOME?H.includes(n):!H.includes(n)||n===I.OTHER),C=(t.customCategories||[]).filter(n=>n.type===s).map(n=>n.name);return[...y,...C]},o=f();return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Recurring Items"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Automate your regular income and expenses."})]}),e.jsxs("button",{onClick:()=>i(!0),className:"bg-white hover:bg-slate-200 text-black px-5 py-2.5 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(te,{className:"w-4 h-4"})," New"]})]}),o.length>0&&e.jsxs("div",{className:"bg-brand-900/20 border border-brand-500/30 rounded-3xl p-6",children:[e.jsxs("h3",{className:"text-brand-400 font-semibold mb-4 flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5"})," Due for Approval"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(s=>e.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded-xl flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-bold text-white",children:s.name}),e.jsx("span",{className:"text-xs bg-slate-800 text-slate-400 px-2 py-1 rounded",children:new Date(s.nextDueDate).toLocaleDateString()})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("p",{className:"text-lg font-mono text-slate-200",children:[$(s.amount)," ",s.currency]}),e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${s.type===k.INCOME?"text-emerald-400 bg-emerald-500/10":"text-rose-400 bg-rose-500/10"}`,children:s.type||"EXPENSE"})]}),s.exchangeRate&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Locked Rate: ",s.exchangeRate]})]}),e.jsx("button",{onClick:()=>p(s),className:"mt-4 w-full bg-brand-600 hover:bg-brand-500 text-white py-2 rounded-lg text-sm font-medium transition-colors",children:"Approve & Create"})]},s.id))})]}),e.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden shadow-sm",children:e.jsxs("table",{className:"w-full text-left text-sm text-slate-400",children:[e.jsx("thead",{className:"bg-slate-950/50 uppercase text-xs font-semibold tracking-wider text-slate-500 border-b border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Name"}),e.jsx("th",{className:"px-6 py-4",children:"Type"}),e.jsx("th",{className:"px-6 py-4",children:"Category"}),e.jsx("th",{className:"px-6 py-4",children:"Frequency"}),e.jsx("th",{className:"px-6 py-4",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Next Due"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800/50",children:[(t.recurring||[]).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-500",children:"No recurring items defined."})}),(t.recurring||[]).map(s=>e.jsxs("tr",{className:"hover:bg-slate-950/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-white font-medium",children:s.name}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded uppercase border ${s.type===k.INCOME?"text-emerald-400 border-emerald-500/20 bg-emerald-500/10":"text-rose-400 border-rose-500/20 bg-rose-500/10"}`,children:s.type||"EXPENSE"})}),e.jsx("td",{className:"px-6 py-4 text-slate-300",children:s.category}),e.jsx("td",{className:"px-6 py-4 text-slate-400",children:s.frequency}),e.jsxs("td",{className:"px-6 py-4 font-mono",children:[$(s.amount)," ",s.currency,s.exchangeRate&&e.jsxs("span",{className:"block text-[10px] text-slate-600",children:["@",s.exchangeRate]})]}),e.jsx("td",{className:"px-6 py-4",children:new Date(s.nextDueDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>m({...t,recurring:t.recurring.filter(y=>y.id!==s.id)}),className:"text-slate-500 hover:text-red-400",children:e.jsx(se,{className:"w-4 h-4"})})})]},s.id))]})]})}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"New Recurring Item"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",placeholder:"Name (e.g. Salary, Netflix)",value:a.name||"",onChange:s=>d({...a,name:s.target.value})}),e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl border border-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>d({...a,type:k.EXPENSE,category:I.UTILITIES}),className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${a.type===k.EXPENSE?"bg-rose-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Expense"}),e.jsx("button",{type:"button",onClick:()=>d({...a,type:k.INCOME,category:I.INCOME}),className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${a.type===k.INCOME?"bg-emerald-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Income"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block",children:"Category"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:u(a.type).map(s=>e.jsx("button",{type:"button",onClick:()=>d({...a,category:s}),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all text-left truncate ${a.category===s?"bg-slate-800 border-brand-500 text-white":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-700"}`,children:s},s))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",type:"number",placeholder:"Amount",value:a.amount||"",onChange:s=>d({...a,amount:Number(s.target.value)})}),e.jsx("select",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",value:a.currency,onChange:s=>d({...a,currency:s.target.value}),children:Object.values(K).map(s=>e.jsx("option",{value:s,children:s},s))})]}),a.currency!==l&&e.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3",children:[e.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["Expected Exchange Rate (1 ",a.currency," = ?"," ",l,")"]}),e.jsx("input",{type:"number",step:"0.0001",placeholder:`Current: ${b[a.currency||"USD"]||1}`,value:a.exchangeRate||"",onChange:s=>d({...a,exchangeRate:Number(s.target.value)}),className:"w-full bg-transparent text-white focus:outline-none"}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:"Leave blank to use dynamic rate at time of approval."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",value:a.frequency,onChange:s=>d({...a,frequency:s.target.value}),children:Object.values(U).map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsxs("div",{className:"flex-1 relative group/date",children:[e.jsx("input",{type:"date",className:"w-full bg-slate-950 border border-slate-800 rounded-xl pl-4 pr-10 py-3 text-white text-sm focus:outline-none focus:ring-1 focus:ring-brand-500 transition-all cursor-pointer hover:border-slate-700 hover:bg-slate-900/50",value:a.nextDueDate?a.nextDueDate.split("T")[0]:"",onChange:s=>d({...a,nextDueDate:new Date(s.target.value).toISOString()})}),e.jsx(Re,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-400 group-hover/date:text-brand-300 transition-colors pointer-events-none z-10"})]})]}),e.jsx("button",{onClick:x,className:"w-full bg-brand-600 text-white py-3 rounded-xl font-bold mt-6",children:"Save Recurring Item"}),e.jsx("button",{onClick:()=>i(!1),className:"w-full text-slate-500 py-2 hover:text-red-400 transition-colors",children:"Cancel"})]})]})})]})},it=({data:t,onUpdate:m,baseCurrency:l,convertAmount:b})=>{const[c,i]=g.useState(!1),[a,d]=g.useState(!1),[f,p]=g.useState(null),[x,u]=g.useState(""),[o,s]=g.useState(null),[y,C]=g.useState({currency:l,color:"#60a5fa"}),n=h=>{p(h),u(""),s(null),d(!0)},r=()=>{if(!f||!x)return;const h=parseFloat(x);if(isNaN(h)||h<=0){s("Please enter a valid positive amount.");return}const R=f.targetAmount-f.currentAmount;if(h>R){s(`You cannot add more than the remaining amount (${$(R)} ${f.currency}).`);return}const N={id:crypto.randomUUID(),amount:h,currency:f.currency,type:k.EXPENSE,category:I.SAVINGS,date:new Date().toISOString(),description:`Contribution to ${f.name}`,recordedBaseCurrency:l},L=t.goals.map(A=>A.id===f.id?{...A,currentAmount:A.currentAmount+h}:A);m({...t,transactions:[N,...t.transactions],goals:L}),d(!1)},S=()=>{if(!y.name||!y.targetAmount)return;const h={id:crypto.randomUUID(),name:y.name,targetAmount:Number(y.targetAmount),currentAmount:0,currency:y.currency||l,color:y.color||"#60a5fa"};m({...t,goals:[...t.goals||[],h]}),i(!1),C({currency:l,color:"#60a5fa"})};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Savings Goals"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Visualize your targets."})]}),e.jsxs("button",{onClick:()=>i(!0),className:"bg-white hover:bg-slate-200 text-black px-5 py-2.5 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(te,{className:"w-4 h-4"})," New Goal"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(t.goals||[]).length===0?e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center p-12 text-center bg-slate-900 border border-slate-800 rounded-3xl border-dashed",children:[e.jsx("div",{className:"p-4 bg-slate-800 rounded-full mb-4",children:e.jsx(ge,{className:"w-8 h-8 text-slate-500"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"No Goals Yet"}),e.jsx("p",{className:"text-slate-400 text-sm max-w-xs mb-6",children:"Create a savings goal to track your progress for things like a vacation, new car, or emergency fund."}),e.jsx("button",{onClick:()=>i(!0),className:"bg-brand-600 hover:bg-brand-500 text-white px-6 py-2.5 rounded-xl text-sm font-bold transition-all hover:scale-105 active:scale-95 shadow-lg shadow-brand-500/20",children:"Create your first goal"})]}):(t.goals||[]).map(h=>{const R=Math.min(100,h.currentAmount/h.targetAmount*100);return e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-sm relative overflow-hidden transition-all duration-300 hover:border-slate-700 hover:shadow-2xl hover:-translate-y-1 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsx("h3",{className:"font-bold text-lg text-white group-hover:text-brand-300 transition-colors",children:h.name}),e.jsx("button",{onClick:()=>m({...t,goals:t.goals.filter(N=>N.id!==h.id)}),className:"text-slate-600 hover:text-red-400 transition-colors bg-slate-950/50 p-2 rounded-lg hover:bg-red-500/10",children:e.jsx(se,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mb-4 relative z-10",children:e.jsxs("p",{className:"text-3xl font-bold text-white",children:[$(h.currentAmount)," ",e.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["/ ",$(h.targetAmount)," ",h.currency]})]})}),e.jsx("div",{className:"w-full bg-slate-800 h-3 rounded-full overflow-hidden relative z-10 mb-6",children:e.jsx("div",{className:"h-full transition-all duration-1000 ease-out relative overflow-hidden",style:{width:`${R}%`,backgroundColor:h.color},children:e.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]"})})}),e.jsx("button",{onClick:()=>n(h),className:"w-full bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-xl font-medium transition-colors relative z-10 border border-slate-700",children:"+ Add Funds"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 rounded-full opacity-25 blur-2xl pointer-events-none",style:{backgroundColor:h.color}})]},h.id)})}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"New Goal"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",placeholder:"Goal Name (e.g. Japan Trip)",value:y.name||"",onChange:h=>C({...y,name:h.target.value})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",type:"number",placeholder:"Target Amount",value:y.targetAmount||"",onChange:h=>C({...y,targetAmount:Number(h.target.value)})}),e.jsx("select",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",value:y.currency,onChange:h=>C({...y,currency:h.target.value}),children:Object.values(K).map(h=>e.jsx("option",{value:h,children:h},h))})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Color:"}),e.jsx("input",{type:"color",className:"bg-transparent h-10 w-10 cursor-pointer",value:y.color,onChange:h=>C({...y,color:h.target.value})})]}),e.jsx("button",{onClick:S,className:"w-full bg-brand-600 text-white py-3 rounded-xl font-bold mt-6",children:"Create Goal"}),e.jsx("button",{onClick:()=>i(!1),className:"w-full text-slate-500 py-2 hover:text-red-400 transition-colors",children:"Cancel"})]})]})}),a&&f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Add Funds"}),e.jsxs("p",{className:"text-slate-400 text-sm mb-4",children:["Adding to ",e.jsx("strong",{children:f.name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white pl-8",type:"number",placeholder:"Amount",value:x,onChange:h=>u(h.target.value),autoFocus:!0}),e.jsx("span",{className:"absolute left-3 top-3 text-slate-500",children:"$"})]}),o&&e.jsx("p",{className:"text-red-400 text-xs bg-red-900/20 p-2 rounded-lg border border-red-900/30",children:o}),e.jsx("button",{onClick:r,className:"w-full bg-brand-600 text-white py-3 rounded-xl font-bold mt-6",children:"Confirm Deposit"}),e.jsx("button",{onClick:()=>d(!1),className:"w-full text-slate-500 py-2 hover:text-red-400 transition-colors",children:"Cancel"})]})]})})]})},ct=({data:t,onUpdateData:m,onVaultDeleted:l,exchangeRates:b})=>{const[c,i]=g.useState(""),[a,d]=g.useState(k.EXPENSE),[f,p]=g.useState(null),[x,u]=g.useState(!1),[o,s]=g.useState("csv"),y=()=>{if(!c.trim())return;const r=Object.values(I),S=(t.customCategories||[]).map(R=>R.name);if(r.includes(c)||S.includes(c)){alert("Category already exists");return}const h={name:c.trim(),type:a};m({...t,customCategories:[...t.customCategories||[],h]}),i("")},C=r=>{m({...t,customCategories:(t.customCategories||[]).filter(S=>S.name!==r)})},n=()=>{if(p(null),!(t.transactions.length>0||(t.goals||[]).length>0||(t.recurring||[]).length>0)){p({type:"error",text:"Export Failed: Vault is empty. Add some data first."});return}const S=localStorage.getItem(G),h=localStorage.getItem(Y);if(!S||!h){p({type:"error",text:"Export Failed: No secure data found to export."});return}const R={salt:S,data:h,version:"1.0",timestamp:new Date().toISOString()},N=JSON.stringify(R),L=new Blob([N],{type:"application/json"}),A=URL.createObjectURL(L),P=document.createElement("a");P.href=A;const W=t.vaultName?t.vaultName.replace(/[^a-z0-9]/gi,"_").toLowerCase():"vault",V=new Date,q=V.toISOString().split("T")[0],F=V.toTimeString().split(" ")[0].replace(/:/g,"");P.download=`${W}_backup_${q}_${F}.vf`,document.body.appendChild(P),P.click(),document.body.removeChild(P),p({type:"success",text:"Backup downloaded successfully."}),setTimeout(()=>p(null),3e3)};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Settings"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Configure your vault."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Vault Name"}),e.jsx("input",{type:"text",name:"username",maxLength:21,value:t.vaultName||"",onChange:r=>{const S=r.target.value;m({...t,vaultName:S}),S.trim()&&localStorage.setItem(ee,S)},className:`w-full bg-slate-950 border rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50 ${t.vaultName?.trim()?"border-slate-800 focus:border-transparent":"border-red-500/50 focus:border-red-500"}`,placeholder:"Name your vault"}),!t.vaultName?.trim()&&e.jsx("p",{className:"text-xs text-red-400 mt-2",children:"Vault name is required."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Base Currency"}),e.jsx("select",{value:t.baseCurrency,onChange:r=>m({...t,baseCurrency:r.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50",children:Object.values(K).map(r=>e.jsx("option",{value:r,children:r},r))}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"All transactions will be converted to this currency for aggregation."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Auto Lock Timer"}),e.jsxs("select",{value:t.autoLockDuration,onChange:r=>m({...t,autoLockDuration:Number(r.target.value)}),className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50",children:[e.jsx("option",{value:6e4,children:"1 Minute"}),e.jsx("option",{value:3e5,children:"5 Minutes"}),e.jsx("option",{value:9e5,children:"15 Minutes"}),e.jsx("option",{value:18e5,children:"30 Minutes"}),e.jsx("option",{value:0,children:"Never"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Automatically lock vault after inactivity."})]})]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Custom Categories (Tags)"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl border border-slate-800",children:[e.jsx("button",{onClick:()=>d(k.EXPENSE),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all ${a===k.EXPENSE?"bg-rose-500/20 text-rose-400":"text-slate-500"}`,children:"Expense"}),e.jsx("button",{onClick:()=>d(k.INCOME),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all ${a===k.INCOME?"bg-emerald-500/20 text-emerald-400":"text-slate-500"}`,children:"Income"})]}),e.jsx("input",{value:c,onChange:r=>i(r.target.value),placeholder:"New Tag Name",className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl px-3 text-white text-sm"}),e.jsx("button",{onClick:y,className:"bg-brand-600 hover:bg-brand-500 text-white px-4 rounded-xl text-sm font-bold",children:"Add"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(t.customCategories||[]).filter(r=>r.type===a).map(r=>e.jsxs("span",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-slate-700 bg-slate-800 text-sm text-slate-300",children:[r.name,e.jsx("button",{onClick:()=>C(r.name),className:"text-slate-500 hover:text-red-400",children:e.jsx(se,{className:"w-3 h-3"})})]},r.name)),Object.values(I).filter(r=>a===k.INCOME?H.includes(r):!H.includes(r)||r===I.OTHER).map(r=>e.jsx("span",{className:"px-3 py-1.5 rounded-lg border border-slate-800 bg-slate-950 text-sm text-slate-500 cursor-not-allowed",title:"Default Category",children:r},r))]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Data Management"}),f&&e.jsx("div",{className:`mb-4 px-4 py-3 rounded-xl border text-sm ${f.type==="error"?"bg-red-900/20 border-red-900/50 text-red-400":"bg-emerald-900/20 border-emerald-900/50 text-emerald-400"}`,children:f.text}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-slate-950 rounded-xl border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"Export Transactions"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Download history as CSV or Excel."})]}),e.jsxs("div",{className:"flex bg-slate-900 border border-slate-800 rounded-lg p-1 w-fit mb-2",children:[e.jsx("button",{onClick:()=>s("csv"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${o==="csv"?"bg-slate-700 text-white shadow-sm":"text-slate-500 hover:text-slate-300"}`,children:"CSV"}),e.jsx("button",{onClick:()=>s("excel"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${o==="excel"?"bg-emerald-600/20 text-emerald-400 shadow-sm":"text-slate-500 hover:text-slate-300"}`,children:"Excel"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[{label:"Last 15 Days",val:15},{label:"Last 1 Month",val:30},{label:"Last 3 Months",val:90},{label:"Last 6 Months",val:180},{label:"Last 1 Year",val:365},{label:"All Time",val:"all"}].map(r=>e.jsx("button",{onClick:()=>{p(null);const S=t.transactions||[];if(S.length===0){p({type:"error",text:"Export Failed: No transactions to export."});return}let h=S;if(r.val!=="all"){const O=Number(r.val),_=new Date;_.setDate(_.getDate()-O),_.setHours(0,0,0,0),h=S.filter(M=>new Date(M.date)>=_)}if(h.length===0){p({type:"error",text:"Export Failed: No transactions found in this range."});return}const R="\uFEFF",N=o==="excel"?"	":",",L=o==="excel"?"xls":"csv",A=["Date","Type","Category","Description","Amount","Currency"],P=h.map(O=>{const _=M=>`"${(M||"").replace(/"/g,'""')}"`;return[new Date(O.date).toLocaleDateString(),O.type,_(O.category),_(O.description||""),O.amount,O.currency].join(N)}),W=R+[A.join(N),...P].join(`
`),V=new Blob([W],{type:o==="excel"?"application/vnd.ms-excel;charset=utf-8":"text/csv;charset=utf-8"}),q=URL.createObjectURL(V),F=document.createElement("a");F.href=q,F.download=`transactions_${r.val==="all"?"all_time":r.val+"_days"}_${new Date().toISOString().split("T")[0]}.${L}`,document.body.appendChild(F),F.click(),document.body.removeChild(F),p({type:"success",text:`Successfully exported ${h.length} transactions (${o.toUpperCase()}).`}),setTimeout(()=>p(null),3e3)},className:"px-3 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-xs font-medium transition-colors border border-slate-700 hover:border-slate-600 hover:text-brand-300",children:r.label},r.label))})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950 rounded-xl border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"Export Data"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Download an encrypted backup file (.vf)."})]}),e.jsx("button",{onClick:n,className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Download"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-900/10 rounded-xl border border-red-900/30",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-400 font-medium",children:"Delete Vault"}),e.jsx("p",{className:"text-sm text-red-400/60",children:"Permanently delete all data and reset."})]}),e.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg text-sm font-medium transition-colors",children:"Delete"})]})]})]})]}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Delete Vault?"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"This will permanently erase all your financial data and reset the application. This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white py-2.5 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{l(),u(!1)},className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-2.5 rounded-xl font-medium transition-colors",children:"Delete Forever"})]})]})})]})},dt=({onClose:t,onSave:m,baseCurrency:l,exchangeRates:b,customCategories:c})=>{const[i,a]=g.useState(""),[d,f]=g.useState(l),[p,x]=g.useState(k.EXPENSE),[u,o]=g.useState(I.FOOD),[s,y]=g.useState(new Date().toISOString().split("T")[0]),[C,n]=g.useState(""),[r,S]=g.useState(""),h=g.useMemo(()=>{const N=Object.values(I).filter(A=>p===k.INCOME?H.includes(A):!H.includes(A)||A===I.OTHER),L=(c||[]).filter(A=>A.type===p).map(A=>A.name);return[...N,...L]},[p,c]);g.useEffect(()=>{h.includes(u)||o(h[0]||"")},[p,h]),g.useEffect(()=>{S("")},[d]);const R=N=>{if(N.preventDefault(),!i)return;const L=r?parseFloat(r):d===l?1:b[d]||1,A={id:crypto.randomUUID(),amount:parseFloat(i),currency:d,type:p,category:u,date:new Date(s).toISOString(),description:C,recordedBaseCurrency:l,exchangeRate:L};m(A)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl scale-100 animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"New Transaction"}),e.jsx("button",{onClick:t,className:"text-slate-500 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.01",value:i,onChange:N=>a(N.target.value),placeholder:"0.00",className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-4 py-3 text-2xl font-bold text-white placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-brand-500/50",autoFocus:!0}),e.jsx("div",{className:"absolute right-2 top-2 bottom-2",children:e.jsx("select",{value:d,onChange:N=>f(N.target.value),className:"h-full bg-slate-900 border border-slate-800 rounded-xl px-3 text-white text-sm font-medium focus:outline-none focus:ring-1 focus:ring-brand-500",children:Object.values(K).map(N=>e.jsx("option",{value:N,children:N},N))})})]})}),d!==l&&e.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3",children:[e.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["Exchange Rate (1 ",d," = ? ",l,")"]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"number",step:"any",value:r,onChange:N=>S(N.target.value),placeholder:`${b[d]||"1.0"}`,className:"flex-1 bg-transparent text-white focus:outline-none font-mono text-sm"}),e.jsx("button",{type:"button",onClick:()=>S(String(b[d]||1)),className:"text-[10px] text-brand-400 hover:text-brand-300 uppercase font-bold tracking-wider",children:"Auto"})]}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:r?`Using custom rate: 1 ${d} = ${r} ${l}`:`Using market rate: 1 ${d} = ${b[d]||1} ${l}`})]}),e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl border border-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>{x(k.EXPENSE)},className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${p===k.EXPENSE?"bg-rose-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Expense"}),e.jsx("button",{type:"button",onClick:()=>{x(k.INCOME)},className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${p===k.INCOME?"bg-emerald-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Income"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block",children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-36 overflow-y-auto pr-1 categories-container",children:h.map(N=>e.jsx("button",{type:"button",onClick:()=>o(N),className:`px-3 py-1.5 rounded-lg text-xs font-medium border transition-all ${u===N?"bg-brand-600 border-brand-500 text-white shadow-lg shadow-brand-600/20":"bg-slate-950/50 border-slate-800 text-slate-400 hover:border-slate-700 hover:text-slate-200"}`,children:N},N))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block text-center",children:"Date"}),e.jsxs("div",{className:"relative group/date",children:[e.jsx("input",{type:"date",value:s,onChange:N=>y(N.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl pl-4 pr-10 py-2.5 text-white text-sm focus:outline-none focus:ring-1 focus:ring-brand-500 transition-all cursor-pointer hover:border-slate-700 hover:bg-slate-900/50"}),e.jsx(Re,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-400 group-hover/date:text-brand-300 transition-colors pointer-events-none z-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block text-center",children:"Note"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:C,onChange:N=>n(N.target.value),placeholder:"What is this for?",className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-white text-sm focus:outline-none focus:ring-1 focus:ring-brand-500 hover:border-slate-700 transition-all"})})]})]}),e.jsx("button",{type:"submit",disabled:!i,className:"w-full bg-white hover:bg-slate-200 text-black font-bold py-3.5 rounded-xl transition-all shadow-lg mt-6 disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Transaction"})]})]})})},xt="modulepreload",ut=function(t){return"/vault_finance/"+t},Ie={},mt=function(m,l,b){let c=Promise.resolve();if(l&&l.length>0){let f=function(p){return Promise.all(p.map(x=>Promise.resolve(x).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),d=a?.nonce||a?.getAttribute("nonce");c=f(l.map(p=>{if(p=ut(p),p in Ie)return;Ie[p]=!0;const x=p.endsWith(".css"),u=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${u}`))return;const o=document.createElement("link");if(o.rel=x?"stylesheet":xt,x||(o.as="script"),o.crossOrigin="",o.href=p,d&&o.setAttribute("nonce",d),document.head.appendChild(o),x)return new Promise((s,y)=>{o.addEventListener("load",s),o.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${p}`)))})}))}function i(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return c.then(a=>{for(const d of a||[])d.status==="rejected"&&i(d.reason);return m().catch(i)})};function ht(t={}){const{immediate:m=!1,onNeedRefresh:l,onOfflineReady:b,onRegistered:c,onRegisteredSW:i,onRegisterError:a}=t;let d,f;const p=async(u=!0)=>{await f};async function x(){if("serviceWorker"in navigator){if(d=await mt(async()=>{const{Workbox:u}=await import("./workbox-window.prod.es5.js");return{Workbox:u}},[]).then(({Workbox:u})=>new u("/vault_finance/sw.js",{scope:"/vault_finance/",type:"classic"})).catch(u=>{a?.(u)}),!d)return;d.addEventListener("activated",u=>{(u.isUpdate||u.isExternal)&&window.location.reload()}),d.addEventListener("installed",u=>{u.isUpdate||b?.()}),d.register({immediate:m}).then(u=>{i?i("/vault_finance/sw.js",u):c?.(u)}).catch(u=>{a?.(u)})}}return f=x(),p}ht({immediate:!0,onRegistered(t){},onRegisterError(t){}});const Le=document.getElementById("root");if(!Le)throw new Error("Could not find root element to mount to");const pt=We.createRoot(Le);pt.render(e.jsx(Ae.StrictMode,{children:e.jsx(st,{})}));
