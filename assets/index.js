import{r as Ce,a as De,g as Ie}from"./vendor-react.js";import{r as b,R as we,a as ce,B as Ae,C as Re,X as Le,Y as Te,T as de,b as xe,P as Oe,c as Me,d as Fe}from"./vendor-recharts.js";import"./vendor-utils.js";(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))m(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&m(r)}).observe(document,{childList:!0,subtree:!0});function o(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function m(c){if(c.ep)return;c.ep=!0;const i=o(c);fetch(c.href,i)}})();var se={exports:{}},Y={};var ue;function Pe(){if(ue)return Y;ue=1;var t=Ce(),x=Symbol.for("react.element"),o=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,c=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function r(a,u,f){var l,h={},w=null,s=null;f!==void 0&&(w=""+f),u.key!==void 0&&(w=""+u.key),u.ref!==void 0&&(s=u.ref);for(l in u)m.call(u,l)&&!i.hasOwnProperty(l)&&(h[l]=u[l]);if(a&&a.defaultProps)for(l in u=a.defaultProps,u)h[l]===void 0&&(h[l]=u[l]);return{$$typeof:x,type:a,key:w,ref:s,props:h,_owner:c.current}}return Y.Fragment=o,Y.jsx=r,Y.jsxs=r,Y}var me;function _e(){return me||(me=1,se.exports=Pe()),se.exports}var e=_e(),X={},he;function Be(){if(he)return X;he=1;var t=De();return X.createRoot=t.createRoot,X.hydrateRoot=t.hydrateRoot,X}var Ue=Be();const $e=Ie(Ue);var z=(t=>(t.USD="USD",t.EUR="EUR",t.GBP="GBP",t.JPY="JPY",t.CAD="CAD",t.AUD="AUD",t.INR="INR",t.CNY="CNY",t))(z||{}),k=(t=>(t.INCOME="income",t.EXPENSE="expense",t))(k||{}),E=(t=>(t.FOOD="Food",t.TRANSPORT="Transport",t.HOUSING="Housing",t.UTILITIES="Utilities",t.ENTERTAINMENT="Entertainment",t.HEALTH="Health",t.INCOME="Income",t.SHOPPING="Shopping",t.SAVINGS="Savings",t.RENTAL="Rental",t.FREELANCE="Freelance",t.BONUS="Bonus",t.INVESTMENTS="Investments",t.REFUNDS="Refunds",t.GIFT="Gift",t.OTHER="Other",t))(E||{}),M=(t=>(t.WEEKLY="Weekly",t.MONTHLY="Monthly",t.YEARLY="Yearly",t))(M||{});const Ve=1e5,ze=16,re=12;class Ge{constructor(){this.key=null}async deriveKey(x,o){const m=new TextEncoder,c=await window.crypto.subtle.importKey("raw",m.encode(x),{name:"PBKDF2"},!1,["deriveKey"]),i=o||window.crypto.getRandomValues(new Uint8Array(ze)),r=await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:Ve,hash:"SHA-256"},c,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);return this.key=r,{key:r,salt:i}}hasKey(){return this.key!==null}clearKey(){this.key=null}async encrypt(x){if(!this.key)throw new Error("Key not initialized");const o=new TextEncoder,m=window.crypto.getRandomValues(new Uint8Array(re)),c=o.encode(x),i=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:m},this.key,c),r=new Uint8Array(m.byteLength+i.byteLength);return r.set(m,0),r.set(new Uint8Array(i),m.byteLength),this.arrayBufferToBase64(r)}async decrypt(x){if(!this.key)throw new Error("Key not initialized");const o=this.base64ToArrayBuffer(x),m=o.slice(0,re),c=o.slice(re),i=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:m},this.key,c);return new TextDecoder().decode(i)}arrayBufferToBase64(x){let o="";const m=x.byteLength;for(let c=0;c<m;c++)o+=String.fromCharCode(x[c]);return window.btoa(o)}base64ToArrayBuffer(x){const o=window.atob(x),m=o.length,c=new Uint8Array(m);for(let i=0;i<m;i++)c[i]=o.charCodeAt(i);return c}}const P=new Ge,pe="vf_rates_cache",Ye=1e3*60*60*24,He=async t=>{const x=localStorage.getItem(pe);if(x)try{const o=JSON.parse(x),m=Date.now()-o.timestamp<Ye,c=o.base===t;if(m&&c)return o.rates}catch{}try{const o=await fetch(`https://open.er-api.com/v6/latest/${t}`);if(!o.ok)throw new Error("Failed to fetch rates");const c=(await o.json()).rates,i={timestamp:Date.now(),base:t,rates:c};return localStorage.setItem(pe,JSON.stringify(i)),c}catch{return x?JSON.parse(x).rates:{[t]:1}}},Q=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),K=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5v14"})]}),W=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),ae=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),e.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),Z=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),e.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),e.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),Ke=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),be=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),ne=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"m17 2 4 4-4 4"}),e.jsx("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),e.jsx("path",{d:"m7 22-4-4 4-4"}),e.jsx("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]}),fe=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"6"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),We=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.3-4.3"})]}),ve=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),e.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),e.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),U="vf_encrypted_vault",$="vf_salt",le=300*1e3,J=["#60a5fa","#34d399","#fbbf24","#f87171","#a78bfa","#f472b6","#818cf8","#2dd4bf"],V=[E.INCOME,E.SAVINGS,E.RENTAL,E.FREELANCE,E.BONUS,E.INVESTMENTS,E.REFUNDS,E.GIFT,E.OTHER],B={transactions:[],recurring:[],goals:[],baseCurrency:z.USD,theme:"dark",autoLockDuration:le,customCategories:[]},ge=(t,x)=>t.toLocaleString(void 0,{style:"currency",currency:x,minimumFractionDigits:2,maximumFractionDigits:2}),O=t=>t.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});function qe(){const[t,x]=b.useState(!!localStorage.getItem($)),[o,m]=b.useState(!1),[c,i]=b.useState(""),[r,a]=b.useState(!1),[u,f]=b.useState(null),[l,h]=b.useState(B),[w,s]=b.useState({}),[n,j]=b.useState("dashboard"),[d,N]=b.useState(!1),[I,p]=b.useState(!1),L=b.useRef(Date.now());b.useEffect(()=>{if(!o)return;const g=l.autoLockDuration!==void 0?l.autoLockDuration:le;if(g===0)return;const S=()=>{Date.now()-L.current>g&&ee()},v=()=>{L.current=Date.now()},D=setInterval(S,1e4);return window.addEventListener("mousemove",v),window.addEventListener("keydown",v),window.addEventListener("click",v),()=>{clearInterval(D),window.removeEventListener("mousemove",v),window.removeEventListener("keydown",v),window.removeEventListener("click",v)}},[o,l.autoLockDuration]);const y=async g=>{if(g.preventDefault(),f(null),c.length<4){f("Password is too short (min 4 chars).");return}a(!0);try{const{salt:S}=await P.deriveKey(c),v=btoa(String.fromCharCode(...S));localStorage.setItem($,v);const D=JSON.stringify(B),R=await P.encrypt(D);localStorage.setItem(U,R),h(B),x(!0),m(!0),i("")}catch{f("Failed to create vault.")}finally{a(!1)}},T=g=>{new Date().setHours(0,0,0,0),(g.recurring||[]).forEach(D=>{if(!D.active)return;new Date(D.nextDueDate).setHours(0,0,0,0)})},A=async g=>{g.preventDefault(),a(!0),f(null);try{const S=localStorage.getItem($),v=localStorage.getItem(U);if(!S){x(!1);return}const D=new Uint8Array(atob(S).split("").map(R=>R.charCodeAt(0)));if(await P.deriveKey(c,D),v)try{const R=await P.decrypt(v),C=JSON.parse(R);let _=!1;const Ee=C.transactions.map(te=>te.recordedBaseCurrency?te:(_=!0,{...te,recordedBaseCurrency:C.baseCurrency}));C.recurring||(C.recurring=[],_=!0),C.goals||(C.goals=[],_=!0),C.autoLockDuration===void 0&&(C.autoLockDuration=le,_=!0),C.customCategories||(C.customCategories=[],_=!0),_&&(C.transactions=Ee,ie(C)),h(C),m(!0),T(C)}catch{f("Incorrect password.")}else h(B),m(!0)}catch{f("An error occurred during authentication.")}finally{a(!1),i("")}},ee=()=>{P.clearKey(),m(!1),i(""),h(B),j("dashboard")},oe=()=>{localStorage.clear(),P.clearKey(),h(B),m(!1),x(!1),i(""),j("dashboard")},ie=async g=>{try{const S=JSON.stringify(g),v=await P.encrypt(S);localStorage.setItem(U,v)}catch{alert("Failed to save data securely!")}},G=g=>{h(g),ie(g)};b.useEffect(()=>{o&&(async()=>{const S=await He(l.baseCurrency);s(S)})()},[o,l.baseCurrency]);const q=b.useCallback((g,S,v)=>{if(S===v||!w[S]&&!w[v])return g;if(v===l.baseCurrency){const C=w[S];return C?g/C:g}if(S===l.baseCurrency){const C=w[v];return C?g*C:g}const D=w[S],R=w[v];return!D||!R?g:g/D*R},[w,l.baseCurrency]),F=b.useCallback(g=>{if(g.exchangeRate&&g.recordedBaseCurrency){const S=g.amount/g.exchangeRate;return q(S,g.recordedBaseCurrency,l.baseCurrency)}return q(g.amount,g.currency,l.baseCurrency)},[l.baseCurrency,q]),Ne=b.useMemo(()=>l.transactions.reduce((g,S)=>{const v=F(S);return g+(S.type===k.INCOME?v:-v)},0),[l.transactions,F]),Se=b.useMemo(()=>{const g=l.transactions.filter(v=>v.type===k.EXPENSE),S={};return g.forEach(v=>{const D=F(v);S[v.category]=(S[v.category]||0)+D}),Object.entries(S).map(([v,D])=>({name:v,value:D}))},[l.transactions,F]),ke=b.useMemo(()=>{const g={},S=new Date;for(let v=5;v>=0;v--){const R=new Date(S.getFullYear(),S.getMonth()-v,1).toLocaleString("default",{month:"short"});g[R]={income:0,expense:0}}return l.transactions.forEach(v=>{const D=new Date(v.date);if(S.getTime()-D.getTime()<4320*60*60*1e3){const R=D.toLocaleString("default",{month:"short"});if(g[R]){const C=F(v);v.type===k.INCOME?g[R].income+=C:g[R].expense+=C}}}),Object.entries(g).map(([v,D])=>({name:v,Income:D.income,Expense:D.expense}))},[l.transactions,F]);return t?o?e.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col md:flex-row text-slate-200 font-sans",children:[e.jsxs("aside",{className:"hidden md:flex flex-col w-64 border-r border-slate-800 bg-slate-950 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-xl shadow-lg shadow-brand-500/20",children:e.jsx(Q,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"font-bold text-lg tracking-tight text-white",children:"Vault Finance"})]}),e.jsxs("nav",{className:"flex-1 space-y-2",children:[e.jsx(H,{active:n==="dashboard",onClick:()=>j("dashboard"),icon:e.jsx(ae,{}),label:"Dashboard"}),e.jsx(H,{active:n==="transactions",onClick:()=>j("transactions"),icon:e.jsx(Z,{}),label:"Transactions"}),e.jsx(H,{active:n==="recurring",onClick:()=>j("recurring"),icon:e.jsx(ne,{}),label:"Recurring"}),e.jsx(H,{active:n==="goals",onClick:()=>j("goals"),icon:e.jsx(fe,{}),label:"Goals"}),e.jsx(H,{active:n==="settings",onClick:()=>j("settings"),icon:e.jsx(Ke,{}),label:"Settings"})]}),e.jsxs("button",{onClick:ee,className:"flex items-center gap-3 text-slate-500 hover:text-white transition-colors mt-auto pt-6 border-t border-slate-800 text-sm font-medium px-2",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:"Lock Vault"})]})]}),e.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-slate-800 bg-slate-950/80 backdrop-blur-md sticky top-0 z-20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-lg",children:e.jsx(Q,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-bold text-lg text-white",children:"Vault Finance"})]}),e.jsx("button",{onClick:ee,className:"text-slate-500 hover:text-white",children:e.jsx(be,{className:"w-5 h-5"})})]}),e.jsx("main",{className:"flex-1 overflow-y-auto h-screen relative scrollbar-hide bg-slate-950",children:e.jsxs("div",{className:"p-6 max-w-6xl mx-auto pb-24 md:pb-6 relative z-10",children:[n==="dashboard"&&e.jsx(Je,{balance:Ne,baseCurrency:l.baseCurrency,expensesByCategory:Se,monthlyData:ke,recentTransactions:l.transactions.slice(0,5),onAddTransaction:()=>N(!0),onViewAll:()=>j("transactions")}),n==="transactions"&&e.jsx(Qe,{transactions:l.transactions,baseCurrency:l.baseCurrency,onDelete:g=>G({...l,transactions:l.transactions.filter(S=>S.id!==g)}),onAdd:()=>N(!0),getTransactionValue:F,customCategories:l.customCategories}),n==="recurring"&&e.jsx(Ze,{data:l,onUpdate:G,baseCurrency:l.baseCurrency,exchangeRates:w}),n==="goals"&&e.jsx(et,{data:l,onUpdate:G,baseCurrency:l.baseCurrency,convertAmount:q}),n==="settings"&&e.jsx(tt,{data:l,onUpdateData:G,onVaultDeleted:oe})]})}),e.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-slate-950 border-t border-slate-800 flex justify-around p-4 z-20 pb-8",children:[e.jsx("button",{onClick:()=>j("dashboard"),className:`${n==="dashboard"?"text-white":"text-slate-500"}`,children:e.jsx(ae,{})}),e.jsx("button",{onClick:()=>j("transactions"),className:`${n==="transactions"?"text-white":"text-slate-500"}`,children:e.jsx(Z,{})}),e.jsx("button",{onClick:()=>N(!0),className:"bg-brand-600 text-white p-3 rounded-full -mt-10 border-4 border-slate-950 shadow-lg shadow-brand-900/40",children:e.jsx(K,{})}),e.jsx("button",{onClick:()=>j("recurring"),className:`${n==="recurring"?"text-white":"text-slate-500"}`,children:e.jsx(ne,{})}),e.jsx("button",{onClick:()=>j("goals"),className:`${n==="goals"?"text-white":"text-slate-500"}`,children:e.jsx(fe,{})})]}),d&&e.jsx(st,{onClose:()=>N(!1),onSave:g=>{G({...l,transactions:[g,...l.transactions]}),N(!1)},baseCurrency:l.baseCurrency,exchangeRates:w,customCategories:l.customCategories})]}):e.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 inset-0 bg-gradient-to-b from-slate-900 to-slate-950"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-brand-900/10 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"w-full max-w-md bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl relative z-10 animate-in fade-in zoom-in-95 duration-500",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-brand-600 rounded-2xl shadow-lg shadow-brand-500/20",children:e.jsx(Q,{className:"w-10 h-10 text-white"})})}),e.jsx("h1",{className:"text-2xl font-bold text-center text-white mb-2",children:"Vault Locked"}),e.jsx("p",{className:"text-slate-400 text-center mb-8 text-sm",children:"Enter your master password to decrypt."}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"password",value:c,onChange:g=>i(g.target.value),placeholder:"Master Password",className:"w-full bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-transparent transition-all placeholder:text-slate-600",autoFocus:!0})}),u&&e.jsx("p",{className:"text-red-400 text-sm text-center bg-red-900/20 py-2 rounded-lg border border-red-900/50",children:u}),e.jsx("button",{type:"submit",disabled:!c||r,className:"w-full bg-brand-600 hover:bg-brand-500 text-white font-semibold py-3 rounded-xl transition-all shadow-lg shadow-brand-600/20 disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center",children:r?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Unlock Vault"})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("button",{onClick:()=>p(!0),className:"text-xs text-slate-500 hover:text-red-400 transition-colors",children:"Reset Vault (Delete Data)"})}),I&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-8 w-full max-w-sm shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-red-500/10 rounded-2xl",children:e.jsx(W,{className:"w-8 h-8 text-red-500"})})}),e.jsx("h3",{className:"text-xl font-bold text-white text-center mb-2",children:"Reset Entire Vault?"}),e.jsxs("p",{className:"text-slate-400 text-sm text-center mb-8",children:["This will perform a hard reset. All your data will be ",e.jsx("strong",{children:"permanently deleted"}),". This action cannot be undone."]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:()=>{oe(),p(!1)},className:"w-full bg-red-600 hover:bg-red-500 text-white py-3.5 rounded-xl font-bold transition-all shadow-lg shadow-red-600/20",children:"Yes, Delete Everything"}),e.jsx("button",{onClick:()=>p(!1),className:"w-full bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-xl font-medium transition-colors",children:"Cancel"})]})]})})]})]}):e.jsx(Xe,{password:c,setPassword:i,onCreate:y,isLoading:r,error:u,onImportSuccess:()=>x(!0)})}const Xe=({password:t,setPassword:x,onCreate:o,isLoading:m,error:c,onImportSuccess:i})=>{const[r,a]=b.useState("create"),[u,f]=b.useState(null),l=h=>{const w=h.target.files?.[0];if(f(null),!w)return;if(w.size===0){f("Import Failed: The selected file is empty."),h.target.value="";return}const s=new FileReader;s.onload=n=>{try{const j=(n.target?.result||"").trim();if(!j){f("Import Failed: File content is empty.");return}let d=!1;try{const N=JSON.parse(j);if(N.transactions&&Array.isArray(N.transactions)&&!N.salt){f("Security Error: Importing unencrypted raw JSON data is not allowed."),h.target.value="";return}N.salt&&N.data&&(localStorage.setItem($,N.salt),localStorage.setItem(U,N.data),d=!0)}catch{}if(!d&&!u&&j.includes("|")){const N=j.split("|");if(N.length>=2){const[I,p]=N;I&&p&&(localStorage.setItem($,I),localStorage.setItem(U,p),d=!0)}}d?i():u||f("Invalid backup file format. Expected an encrypted .vf file.")}catch{f("Import Failed: An unexpected error occurred.")}h.target.value=""},s.readAsText(w)};return e.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 inset-0 bg-gradient-to-b from-slate-900 to-slate-950"}),e.jsxs("div",{className:"w-full max-w-lg bg-slate-900 border border-slate-800 rounded-3xl p-8 shadow-2xl relative z-10 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-2xl shadow-xl shadow-brand-500/20",children:e.jsx(Q,{className:"w-12 h-12 text-white"})})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome to Vault Finance"}),e.jsx("p",{className:"text-slate-400",children:"Secure, offline, personal finance tracking."})]}),e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl mb-8 border border-slate-800",children:[e.jsx("button",{onClick:()=>{a("create"),f(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all ${r==="create"?"bg-brand-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Create New Vault"}),e.jsx("button",{onClick:()=>{a("import"),f(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all ${r==="import"?"bg-brand-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Import Backup"})]}),r==="create"?e.jsxs("form",{onSubmit:o,className:"space-y-4 animate-in fade-in duration-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wider",children:"Set Master Password"}),e.jsx("input",{type:"password",value:t,onChange:h=>x(h.target.value),placeholder:"Create a strong password",className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-transparent transition-all placeholder:text-slate-600",autoFocus:!0}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Your data will be encrypted with this password. If you lose it, your data is lost forever."})]}),c&&e.jsx("p",{className:"text-red-400 text-sm text-center bg-red-900/20 py-2 rounded-lg border border-red-900/50",children:c}),e.jsx("button",{type:"submit",disabled:!t||m,className:"w-full bg-white hover:bg-slate-200 text-black font-bold py-3.5 rounded-xl transition-all shadow-lg mt-2 disabled:opacity-50",children:m?"Creating...":"Create Vault"})]}):e.jsxs("div",{className:"animate-in fade-in duration-300 text-center py-8 bg-slate-950/50 rounded-2xl border border-slate-800 border-dashed",children:[e.jsx(Z,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-medium mb-1",children:"Upload Backup File"}),e.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Restore a .vf encrypted backup file."}),u&&e.jsx("div",{className:"mb-6 mx-4 p-3 bg-red-900/20 border border-red-900/50 rounded-xl text-sm text-red-400",children:u}),e.jsxs("label",{className:"bg-white hover:bg-slate-200 text-black px-6 py-3 rounded-xl font-bold cursor-pointer transition-all inline-block",children:["Select File",e.jsx("input",{type:"file",onChange:l,className:"hidden",accept:".json,.vf"})]})]})]})]})},H=({active:t,onClick:x,icon:o,label:m})=>e.jsxs("button",{onClick:x,className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 border text-sm font-medium ${t?"bg-slate-900 border-slate-800 text-white shadow-sm":"bg-transparent border-transparent text-slate-500 hover:text-slate-300 hover:bg-slate-900/50"}`,children:[we.cloneElement(o,{className:`w-5 h-5 ${t?"text-brand-400":"text-current"}`}),e.jsx("span",{className:"",children:m})]}),Je=({balance:t,baseCurrency:x,expensesByCategory:o,monthlyData:m,recentTransactions:c,onAddTransaction:i,onViewAll:r})=>e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-brand-600 to-indigo-700 rounded-3xl p-8 text-white border border-brand-500/20 relative overflow-hidden shadow-2xl shadow-brand-900/30 group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-32 group-hover:bg-white/15 transition-colors duration-500"}),e.jsx("p",{className:"text-brand-100 font-medium mb-2 relative z-10 text-sm uppercase tracking-wider flex items-center gap-2",children:"Total Balance"}),e.jsx("h2",{className:"text-5xl font-bold relative z-10 tracking-tight text-white drop-shadow-sm",children:ge(t,x)}),e.jsxs("button",{onClick:i,className:"mt-8 bg-white/10 hover:bg-white/20 backdrop-blur-md border border-white/20 py-2.5 px-5 rounded-xl text-sm font-semibold transition-all flex items-center gap-2 relative z-10",children:[e.jsx(K,{className:"w-4 h-4"})," Add Transaction"]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-6 text-slate-100 flex items-center gap-2",children:["Analytics"," ",e.jsx("span",{className:"text-xs font-normal text-slate-400 bg-slate-950 px-2 py-0.5 rounded-full border border-slate-800",children:"Last 6 Months"})]}),e.jsx("div",{style:{width:"100%",height:300},children:e.jsx(ce,{width:"100%",height:"100%",children:e.jsxs(Ae,{data:m,children:[e.jsx(Re,{strokeDasharray:"3 3",stroke:"#27272a",vertical:!1}),e.jsx(Le,{dataKey:"name",stroke:"#6b7280",tickLine:!1,axisLine:!1,fontSize:12,dy:10}),e.jsx(Te,{stroke:"#6b7280",tickLine:!1,axisLine:!1,fontSize:12,tickFormatter:a=>`${a/1e3}k`}),e.jsx(de,{formatter:a=>O(a),contentStyle:{backgroundColor:"#1c1c1e",border:"1px solid #374151",borderRadius:"8px",color:"#fff"},cursor:{fill:"rgba(255,255,255,0.03)"}}),e.jsx(xe,{dataKey:"Income",fill:"#34d399",radius:[4,4,0,0],maxBarSize:40}),e.jsx(xe,{dataKey:"Expense",fill:"#f87171",radius:[4,4,0,0],maxBarSize:40})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-sm flex flex-col h-[420px]",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-100",children:"Expenses by Category"}),e.jsx("div",{className:"flex-1 flex items-center justify-center w-full relative min-h-0",children:o.length>0?e.jsx(ce,{width:"100%",height:"100%",children:e.jsxs(Oe,{children:[e.jsx(Me,{data:o,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",stroke:"none",children:o.map((a,u)=>e.jsx(Fe,{fill:J[u%J.length]},`cell-${u}`))}),e.jsx(de,{formatter:a=>ge(a,x),contentStyle:{backgroundColor:"#1c1c1e",border:"1px solid #374151",borderRadius:"8px",color:"#fff"},itemStyle:{color:"#fff"}})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-500",children:[e.jsx(ae,{className:"w-10 h-10 mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"No expenses yet."})]})}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4 justify-center",children:o.slice(0,4).map((a,u)=>e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-slate-950 rounded-full text-xs text-slate-400 border border-slate-800",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{background:J[u%J.length]}}),e.jsx("span",{children:a.name})]},u))})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 flex flex-col shadow-sm h-[420px]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Recent Activity"}),e.jsx("button",{onClick:r,className:"text-xs text-brand-400 hover:text-brand-300 font-medium transition-colors",children:"View All"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-1 [&::-webkit-scrollbar]:hidden",children:[c.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500",children:[e.jsx(Z,{className:"w-8 h-8 mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"No recent activity."})]}),c.length>0&&e.jsx("div",{className:"space-y-3",children:c.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3.5 hover:bg-slate-950 rounded-2xl transition-all border border-transparent hover:border-slate-800 group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg ${a.type==="income"?"bg-emerald-500/10 text-emerald-500":"bg-rose-500/10 text-rose-500"}`,children:a.category.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-200 text-sm group-hover:text-white transition-colors",children:a.category}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(a.date).toLocaleDateString()})]})]}),e.jsxs("span",{className:`font-semibold text-sm ${a.type==="income"?"text-emerald-400":"text-slate-200"}`,children:[a.type==="income"?"+":"-",O(a.amount)," ",e.jsx("span",{className:"text-[10px] text-slate-500",children:a.currency})]})]},a.id))})]})]})]})]}),Qe=({transactions:t,baseCurrency:x,onDelete:o,onAdd:m,getTransactionValue:c,customCategories:i})=>{const[r,a]=b.useState(""),[u,f]=b.useState("All"),[l,h]=b.useState("All"),[w,s]=b.useState("All"),n=b.useMemo(()=>{const d=Object.values(E),N=(i||[]).map(I=>I.name);return Array.from(new Set([...d,...N]))},[i]),j=b.useMemo(()=>t.filter(d=>{const N=d.description?.toLowerCase().includes(r.toLowerCase())||d.category.toLowerCase().includes(r.toLowerCase()),I=u==="All"||d.category===u,p=l==="All"||d.type===l;let L=!0;if(w!=="All"){const y=parseInt(w),T=new Date;T.setDate(T.getDate()-y),L=new Date(d.date)>=T}return N&&I&&p&&L}),[t,r,u,l,w]);return e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Transactions"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Manage your income and expenses."})]}),e.jsxs("button",{onClick:m,className:"bg-white hover:bg-slate-200 text-black px-5 py-2.5 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(K,{className:"w-4 h-4"})," New"]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-4 flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(We,{className:"absolute left-3 top-3 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:r,onChange:d=>a(d.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl pl-9 pr-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50"})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-1 md:pb-0",children:[e.jsxs("select",{value:u,onChange:d=>f(d.target.value),className:"bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-sm text-slate-300 outline-none focus:ring-1 focus:ring-brand-500",children:[e.jsx("option",{value:"All",children:"All Categories"}),n.map(d=>e.jsx("option",{value:d,children:d},d))]}),e.jsxs("select",{value:l,onChange:d=>h(d.target.value),className:"bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-sm text-slate-300 outline-none focus:ring-1 focus:ring-brand-500",children:[e.jsx("option",{value:"All",children:"All Types"}),e.jsx("option",{value:k.INCOME,children:"Income"}),e.jsx("option",{value:k.EXPENSE,children:"Expense"})]}),e.jsxs("select",{value:w,onChange:d=>s(d.target.value),className:"bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-sm text-slate-300 outline-none focus:ring-1 focus:ring-brand-500",children:[e.jsx("option",{value:"All",children:"All Time"}),e.jsx("option",{value:"30",children:"Last 30 Days"}),e.jsx("option",{value:"90",children:"Last 90 Days"}),e.jsx("option",{value:"365",children:"Last Year"})]})]})]}),e.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm text-slate-400",children:[e.jsx("thead",{className:"bg-slate-950/50 uppercase text-xs font-semibold tracking-wider text-slate-500 border-b border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Date"}),e.jsx("th",{className:"px-6 py-4",children:"Category"}),e.jsx("th",{className:"px-6 py-4",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Amount (Orig)"}),e.jsxs("th",{className:"px-6 py-4 text-right",children:["Value (",x,")"]}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800/50",children:[j.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-slate-500",children:"No transactions found matching your filters."})}),j.map(d=>e.jsxs("tr",{className:"hover:bg-slate-950/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 text-slate-300 font-medium",children:new Date(d.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium border ${d.type==="income"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400":"bg-rose-500/10 border-rose-500/20 text-rose-400"}`,children:d.category})}),e.jsx("td",{className:"px-6 py-4 text-slate-400 max-w-xs truncate",children:d.description||"-"}),e.jsxs("td",{className:"px-6 py-4 text-right font-medium text-slate-300",children:[O(d.amount)," ",e.jsx("span",{className:"text-xs text-slate-600",children:d.currency})]}),e.jsx("td",{className:`px-6 py-4 text-right font-medium ${d.type==="income"?"text-emerald-400":"text-slate-200"}`,children:O(c(d))}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>o(d.id),className:"p-2 text-slate-500 hover:text-rose-400 hover:bg-rose-500/10 rounded-lg transition-all",children:e.jsx(W,{className:"w-4 h-4"})})})]},d.id))]})]})})})]})},Ze=({data:t,onUpdate:x,baseCurrency:o,exchangeRates:m})=>{const[c,i]=b.useState(!1),[r,a]=b.useState({frequency:M.MONTHLY,currency:o,category:E.UTILITIES,active:!0,type:k.EXPENSE,exchangeRate:void 0}),u=()=>{const s=new Date;return s.setHours(0,0,0,0),(t.recurring||[]).filter(n=>{const j=new Date(n.nextDueDate);return j.setHours(0,0,0,0),n.active&&j<=s})},f=s=>{const n=s.exchangeRate||(s.currency===o?1:m[s.currency]),j={id:crypto.randomUUID(),amount:s.amount,currency:s.currency,category:s.category,type:s.type||k.EXPENSE,date:new Date().toISOString(),description:`Recurring: ${s.name}`,recordedBaseCurrency:o,exchangeRate:n},d=new Date(s.nextDueDate);s.frequency===M.MONTHLY?d.setMonth(d.getMonth()+1):s.frequency===M.WEEKLY?d.setDate(d.getDate()+7):s.frequency===M.YEARLY&&d.setFullYear(d.getFullYear()+1);const N=t.recurring.map(I=>I.id===s.id?{...I,nextDueDate:d.toISOString()}:I);x({...t,transactions:[j,...t.transactions],recurring:N})},l=()=>{if(!r.name||!r.amount)return;const s={id:crypto.randomUUID(),name:r.name,amount:Number(r.amount),currency:r.currency||o,frequency:r.frequency||M.MONTHLY,category:r.category||E.UTILITIES,nextDueDate:r.nextDueDate||new Date().toISOString(),active:!0,type:r.type||k.EXPENSE,exchangeRate:r.exchangeRate?Number(r.exchangeRate):void 0};x({...t,recurring:[...t.recurring||[],s]}),i(!1),a({frequency:M.MONTHLY,currency:o,category:E.UTILITIES,active:!0,type:k.EXPENSE,exchangeRate:void 0})},h=s=>{const n=Object.values(E).filter(d=>s===k.INCOME?V.includes(d):!V.includes(d)||d===E.OTHER),j=(t.customCategories||[]).filter(d=>d.type===s).map(d=>d.name);return[...n,...j]},w=u();return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Recurring Items"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Automate your regular income and expenses."})]}),e.jsxs("button",{onClick:()=>i(!0),className:"bg-white hover:bg-slate-200 text-black px-5 py-2.5 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(K,{className:"w-4 h-4"})," New"]})]}),w.length>0&&e.jsxs("div",{className:"bg-brand-900/20 border border-brand-500/30 rounded-3xl p-6",children:[e.jsxs("h3",{className:"text-brand-400 font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"})," Due for Approval"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(s=>e.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded-xl flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-bold text-white",children:s.name}),e.jsx("span",{className:"text-xs bg-slate-800 text-slate-400 px-2 py-1 rounded",children:new Date(s.nextDueDate).toLocaleDateString()})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("p",{className:"text-lg font-mono text-slate-200",children:[O(s.amount)," ",s.currency]}),e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${s.type===k.INCOME?"text-emerald-400 bg-emerald-500/10":"text-rose-400 bg-rose-500/10"}`,children:s.type||"EXPENSE"})]}),s.exchangeRate&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Locked Rate: ",s.exchangeRate]})]}),e.jsx("button",{onClick:()=>f(s),className:"mt-4 w-full bg-brand-600 hover:bg-brand-500 text-white py-2 rounded-lg text-sm font-medium transition-colors",children:"Approve & Create"})]},s.id))})]}),e.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden shadow-sm",children:e.jsxs("table",{className:"w-full text-left text-sm text-slate-400",children:[e.jsx("thead",{className:"bg-slate-950/50 uppercase text-xs font-semibold tracking-wider text-slate-500 border-b border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Name"}),e.jsx("th",{className:"px-6 py-4",children:"Type"}),e.jsx("th",{className:"px-6 py-4",children:"Category"}),e.jsx("th",{className:"px-6 py-4",children:"Frequency"}),e.jsx("th",{className:"px-6 py-4",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Next Due"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800/50",children:[(t.recurring||[]).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-500",children:"No recurring items defined."})}),(t.recurring||[]).map(s=>e.jsxs("tr",{className:"hover:bg-slate-950/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-white font-medium",children:s.name}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded uppercase border ${s.type===k.INCOME?"text-emerald-400 border-emerald-500/20 bg-emerald-500/10":"text-rose-400 border-rose-500/20 bg-rose-500/10"}`,children:s.type||"EXPENSE"})}),e.jsx("td",{className:"px-6 py-4 text-slate-300",children:s.category}),e.jsx("td",{className:"px-6 py-4 text-slate-400",children:s.frequency}),e.jsxs("td",{className:"px-6 py-4 font-mono",children:[O(s.amount)," ",s.currency,s.exchangeRate&&e.jsxs("span",{className:"block text-[10px] text-slate-600",children:["@",s.exchangeRate]})]}),e.jsx("td",{className:"px-6 py-4",children:new Date(s.nextDueDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>x({...t,recurring:t.recurring.filter(n=>n.id!==s.id)}),className:"text-slate-500 hover:text-red-400",children:e.jsx(W,{className:"w-4 h-4"})})})]},s.id))]})]})}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"New Recurring Item"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",placeholder:"Name (e.g. Salary, Netflix)",value:r.name||"",onChange:s=>a({...r,name:s.target.value})}),e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl border border-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>a({...r,type:k.EXPENSE,category:E.UTILITIES}),className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${r.type===k.EXPENSE?"bg-rose-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Expense"}),e.jsx("button",{type:"button",onClick:()=>a({...r,type:k.INCOME,category:E.INCOME}),className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${r.type===k.INCOME?"bg-emerald-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Income"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block",children:"Category"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:h(r.type).map(s=>e.jsx("button",{type:"button",onClick:()=>a({...r,category:s}),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all text-left truncate ${r.category===s?"bg-slate-800 border-brand-500 text-white":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-700"}`,children:s},s))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",type:"number",placeholder:"Amount",value:r.amount||"",onChange:s=>a({...r,amount:Number(s.target.value)})}),e.jsx("select",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",value:r.currency,onChange:s=>a({...r,currency:s.target.value}),children:Object.values(z).map(s=>e.jsx("option",{value:s,children:s},s))})]}),r.currency!==o&&e.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3",children:[e.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["Expected Exchange Rate (1 ",r.currency," = ?"," ",o,")"]}),e.jsx("input",{type:"number",step:"0.0001",placeholder:`Current: ${m[r.currency||"USD"]||1}`,value:r.exchangeRate||"",onChange:s=>a({...r,exchangeRate:Number(s.target.value)}),className:"w-full bg-transparent text-white focus:outline-none"}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:"Leave blank to use dynamic rate at time of approval."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",value:r.frequency,onChange:s=>a({...r,frequency:s.target.value}),children:Object.values(M).map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsxs("div",{className:"flex-1 relative group/date",children:[e.jsx("input",{type:"date",className:"w-full bg-slate-950 border border-slate-800 rounded-xl pl-4 pr-10 py-3 text-white text-sm focus:outline-none focus:ring-1 focus:ring-brand-500 transition-all cursor-pointer hover:border-slate-700 hover:bg-slate-900/50",value:r.nextDueDate?r.nextDueDate.split("T")[0]:"",onChange:s=>a({...r,nextDueDate:new Date(s.target.value).toISOString()})}),e.jsx(ve,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-400 group-hover/date:text-brand-300 transition-colors pointer-events-none z-10"})]})]}),e.jsx("button",{onClick:l,className:"w-full bg-brand-600 text-white py-3 rounded-xl font-bold mt-6",children:"Save Recurring Item"}),e.jsx("button",{onClick:()=>i(!1),className:"w-full text-slate-500 py-2 hover:text-red-400 transition-colors",children:"Cancel"})]})]})})]})},et=({data:t,onUpdate:x,baseCurrency:o,convertAmount:m})=>{const[c,i]=b.useState(!1),[r,a]=b.useState(!1),[u,f]=b.useState(null),[l,h]=b.useState(""),[w,s]=b.useState(null),[n,j]=b.useState({currency:o,color:"#60a5fa"}),d=p=>{f(p),h(""),s(null),a(!0)},N=()=>{if(!u||!l)return;const p=parseFloat(l);if(isNaN(p)||p<=0){s("Please enter a valid positive amount.");return}const L=u.targetAmount-u.currentAmount;if(p>L){s(`You cannot add more than the remaining amount (${O(L)} ${u.currency}).`);return}const y={id:crypto.randomUUID(),amount:p,currency:u.currency,type:k.EXPENSE,category:E.SAVINGS,date:new Date().toISOString(),description:`Contribution to ${u.name}`,recordedBaseCurrency:o},T=t.goals.map(A=>A.id===u.id?{...A,currentAmount:A.currentAmount+p}:A);x({...t,transactions:[y,...t.transactions],goals:T}),a(!1)},I=()=>{if(!n.name||!n.targetAmount)return;const p={id:crypto.randomUUID(),name:n.name,targetAmount:Number(n.targetAmount),currentAmount:0,currency:n.currency||o,color:n.color||"#60a5fa"};x({...t,goals:[...t.goals||[],p]}),i(!1),j({currency:o,color:"#60a5fa"})};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Savings Goals"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Visualize your targets."})]}),e.jsxs("button",{onClick:()=>i(!0),className:"bg-white hover:bg-slate-200 text-black px-5 py-2.5 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(K,{className:"w-4 h-4"})," New Goal"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(t.goals||[]).map(p=>{const L=Math.min(100,p.currentAmount/p.targetAmount*100);return e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-sm relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsx("h3",{className:"font-bold text-lg text-white",children:p.name}),e.jsx("button",{onClick:()=>x({...t,goals:t.goals.filter(y=>y.id!==p.id)}),className:"text-slate-600 hover:text-red-400",children:e.jsx(W,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mb-4 relative z-10",children:e.jsxs("p",{className:"text-3xl font-bold text-white",children:[O(p.currentAmount)," ",e.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["/ ",O(p.targetAmount)," ",p.currency]})]})}),e.jsx("div",{className:"w-full bg-slate-800 h-3 rounded-full overflow-hidden relative z-10 mb-6",children:e.jsx("div",{className:"h-full transition-all duration-1000 ease-out",style:{width:`${L}%`,backgroundColor:p.color}})}),e.jsx("button",{onClick:()=>d(p),className:"w-full bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-xl font-medium transition-colors relative z-10 border border-slate-700",children:"+ Add Funds"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 rounded-full opacity-25 blur-2xl pointer-events-none",style:{backgroundColor:p.color}})]},p.id)})}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"New Goal"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",placeholder:"Goal Name (e.g. Japan Trip)",value:n.name||"",onChange:p=>j({...n,name:p.target.value})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",type:"number",placeholder:"Target Amount",value:n.targetAmount||"",onChange:p=>j({...n,targetAmount:Number(p.target.value)})}),e.jsx("select",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",value:n.currency,onChange:p=>j({...n,currency:p.target.value}),children:Object.values(z).map(p=>e.jsx("option",{value:p,children:p},p))})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Color:"}),e.jsx("input",{type:"color",className:"bg-transparent h-10 w-10 cursor-pointer",value:n.color,onChange:p=>j({...n,color:p.target.value})})]}),e.jsx("button",{onClick:I,className:"w-full bg-brand-600 text-white py-3 rounded-xl font-bold mt-6",children:"Create Goal"}),e.jsx("button",{onClick:()=>i(!1),className:"w-full text-slate-500 py-2 hover:text-red-400 transition-colors",children:"Cancel"})]})]})}),r&&u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Add Funds"}),e.jsxs("p",{className:"text-slate-400 text-sm mb-4",children:["Adding to ",e.jsx("strong",{children:u.name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white pl-8",type:"number",placeholder:"Amount",value:l,onChange:p=>h(p.target.value),autoFocus:!0}),e.jsx("span",{className:"absolute left-3 top-3 text-slate-500",children:"$"})]}),w&&e.jsx("p",{className:"text-red-400 text-xs bg-red-900/20 p-2 rounded-lg border border-red-900/30",children:w}),e.jsx("button",{onClick:N,className:"w-full bg-brand-600 text-white py-3 rounded-xl font-bold mt-6",children:"Confirm Deposit"}),e.jsx("button",{onClick:()=>a(!1),className:"w-full text-slate-500 py-2 hover:text-red-400 transition-colors",children:"Cancel"})]})]})})]})},tt=({data:t,onUpdateData:x,onVaultDeleted:o})=>{const[m,c]=b.useState(""),[i,r]=b.useState(k.EXPENSE),[a,u]=b.useState(null),[f,l]=b.useState(!1),h=()=>{if(!m.trim())return;const n=Object.values(E),j=(t.customCategories||[]).map(N=>N.name);if(n.includes(m)||j.includes(m)){alert("Category already exists");return}const d={name:m.trim(),type:i};x({...t,customCategories:[...t.customCategories||[],d]}),c("")},w=n=>{x({...t,customCategories:(t.customCategories||[]).filter(j=>j.name!==n)})},s=()=>{if(u(null),!(t.transactions.length>0||(t.goals||[]).length>0||(t.recurring||[]).length>0)){u({type:"error",text:"Export Failed: Vault is empty. Add some data first."});return}const j=localStorage.getItem($),d=localStorage.getItem(U);if(!j||!d){u({type:"error",text:"Export Failed: No secure data found to export."});return}const N={salt:j,data:d,version:"1.0",timestamp:new Date().toISOString()},I=JSON.stringify(N),p=new Blob([I],{type:"application/json"}),L=URL.createObjectURL(p),y=document.createElement("a");y.href=L,y.download=`vault_backup_${new Date().toISOString().split("T")[0]}.vf`,document.body.appendChild(y),y.click(),document.body.removeChild(y),u({type:"success",text:"Backup downloaded successfully."}),setTimeout(()=>u(null),3e3)};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Settings"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Configure your vault."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Base Currency"}),e.jsx("select",{value:t.baseCurrency,onChange:n=>x({...t,baseCurrency:n.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50",children:Object.values(z).map(n=>e.jsx("option",{value:n,children:n},n))}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"All transactions will be converted to this currency for aggregation."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Auto Lock Timer"}),e.jsxs("select",{value:t.autoLockDuration,onChange:n=>x({...t,autoLockDuration:Number(n.target.value)}),className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50",children:[e.jsx("option",{value:6e4,children:"1 Minute"}),e.jsx("option",{value:3e5,children:"5 Minutes"}),e.jsx("option",{value:9e5,children:"15 Minutes"}),e.jsx("option",{value:18e5,children:"30 Minutes"}),e.jsx("option",{value:0,children:"Never"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Automatically lock vault after inactivity."})]})]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Custom Categories (Tags)"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl border border-slate-800",children:[e.jsx("button",{onClick:()=>r(k.EXPENSE),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all ${i===k.EXPENSE?"bg-rose-500/20 text-rose-400":"text-slate-500"}`,children:"Expense"}),e.jsx("button",{onClick:()=>r(k.INCOME),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all ${i===k.INCOME?"bg-emerald-500/20 text-emerald-400":"text-slate-500"}`,children:"Income"})]}),e.jsx("input",{value:m,onChange:n=>c(n.target.value),placeholder:"New Tag Name",className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl px-3 text-white text-sm"}),e.jsx("button",{onClick:h,className:"bg-brand-600 hover:bg-brand-500 text-white px-4 rounded-xl text-sm font-bold",children:"Add"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(t.customCategories||[]).filter(n=>n.type===i).map(n=>e.jsxs("span",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-slate-700 bg-slate-800 text-sm text-slate-300",children:[n.name,e.jsx("button",{onClick:()=>w(n.name),className:"text-slate-500 hover:text-red-400",children:e.jsx(W,{className:"w-3 h-3"})})]},n.name)),Object.values(E).filter(n=>i===k.INCOME?V.includes(n):!V.includes(n)||n===E.OTHER).map(n=>e.jsx("span",{className:"px-3 py-1.5 rounded-lg border border-slate-800 bg-slate-950 text-sm text-slate-500 cursor-not-allowed",title:"Default Category",children:n},n))]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Data Management"}),a&&e.jsx("div",{className:`mb-4 px-4 py-3 rounded-xl border text-sm ${a.type==="error"?"bg-red-900/20 border-red-900/50 text-red-400":"bg-emerald-900/20 border-emerald-900/50 text-emerald-400"}`,children:a.text}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950 rounded-xl border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"Export Data"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Download an encrypted backup file (.vf)."})]}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Download"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-900/10 rounded-xl border border-red-900/30",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-400 font-medium",children:"Delete Vault"}),e.jsx("p",{className:"text-sm text-red-400/60",children:"Permanently delete all data and reset."})]}),e.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg text-sm font-medium transition-colors",children:"Delete"})]})]})]})]}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Delete Vault?"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"This will permanently erase all your financial data and reset the application. This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white py-2.5 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{o(),l(!1)},className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-2.5 rounded-xl font-medium transition-colors",children:"Delete Forever"})]})]})})]})},st=({onClose:t,onSave:x,baseCurrency:o,exchangeRates:m,customCategories:c})=>{const[i,r]=b.useState(""),[a,u]=b.useState(o),[f,l]=b.useState(k.EXPENSE),[h,w]=b.useState(E.FOOD),[s,n]=b.useState(new Date().toISOString().split("T")[0]),[j,d]=b.useState(""),[N,I]=b.useState(""),p=b.useMemo(()=>{const y=Object.values(E).filter(A=>f===k.INCOME?V.includes(A):!V.includes(A)||A===E.OTHER),T=(c||[]).filter(A=>A.type===f).map(A=>A.name);return[...y,...T]},[f,c]);b.useEffect(()=>{p.includes(h)||w(p[0]||"")},[f,p]),b.useEffect(()=>{I("")},[a]);const L=y=>{if(y.preventDefault(),!i)return;const T=N?parseFloat(N):a===o?1:m[a]||1,A={id:crypto.randomUUID(),amount:parseFloat(i),currency:a,type:f,category:h,date:new Date(s).toISOString(),description:j,recordedBaseCurrency:o,exchangeRate:T};x(A)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl scale-100 animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"New Transaction"}),e.jsx("button",{onClick:t,className:"text-slate-500 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.01",value:i,onChange:y=>r(y.target.value),placeholder:"0.00",className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-4 py-3 text-2xl font-bold text-white placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-brand-500/50",autoFocus:!0}),e.jsx("div",{className:"absolute right-2 top-2 bottom-2",children:e.jsx("select",{value:a,onChange:y=>u(y.target.value),className:"h-full bg-slate-900 border border-slate-800 rounded-xl px-3 text-white text-sm font-medium focus:outline-none focus:ring-1 focus:ring-brand-500",children:Object.values(z).map(y=>e.jsx("option",{value:y,children:y},y))})})]})}),a!==o&&e.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3",children:[e.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["Exchange Rate (1 ",a," = ? ",o,")"]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"number",step:"any",value:N,onChange:y=>I(y.target.value),placeholder:`${m[a]||"1.0"}`,className:"flex-1 bg-transparent text-white focus:outline-none font-mono text-sm"}),e.jsx("button",{type:"button",onClick:()=>I(String(m[a]||1)),className:"text-[10px] text-brand-400 hover:text-brand-300 uppercase font-bold tracking-wider",children:"Auto"})]}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:N?`Using custom rate: 1 ${a} = ${N} ${o}`:`Using market rate: 1 ${a} = ${m[a]||1} ${o}`})]}),e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl border border-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>{l(k.EXPENSE)},className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${f===k.EXPENSE?"bg-rose-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Expense"}),e.jsx("button",{type:"button",onClick:()=>{l(k.INCOME)},className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${f===k.INCOME?"bg-emerald-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Income"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block",children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-36 overflow-y-auto pr-1 categories-container",children:p.map(y=>e.jsx("button",{type:"button",onClick:()=>w(y),className:`px-3 py-1.5 rounded-lg text-xs font-medium border transition-all ${h===y?"bg-brand-600 border-brand-500 text-white shadow-lg shadow-brand-600/20":"bg-slate-950/50 border-slate-800 text-slate-400 hover:border-slate-700 hover:text-slate-200"}`,children:y},y))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block text-center",children:"Date"}),e.jsxs("div",{className:"relative group/date",children:[e.jsx("input",{type:"date",value:s,onChange:y=>n(y.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl pl-4 pr-10 py-2.5 text-white text-sm focus:outline-none focus:ring-1 focus:ring-brand-500 transition-all cursor-pointer hover:border-slate-700 hover:bg-slate-900/50"}),e.jsx(ve,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-400 group-hover/date:text-brand-300 transition-colors pointer-events-none z-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block text-center",children:"Note"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:j,onChange:y=>d(y.target.value),placeholder:"What is this for?",className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-white text-sm focus:outline-none focus:ring-1 focus:ring-brand-500 hover:border-slate-700 transition-all"})})]})]}),e.jsx("button",{type:"submit",disabled:!i,className:"w-full bg-white hover:bg-slate-200 text-black font-bold py-3.5 rounded-xl transition-all shadow-lg mt-6 disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Transaction"})]})]})})},rt="modulepreload",at=function(t){return"/vault_finance/"+t},je={},nt=function(x,o,m){let c=Promise.resolve();if(o&&o.length>0){let u=function(f){return Promise.all(f.map(l=>Promise.resolve(l).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=r?.nonce||r?.getAttribute("nonce");c=u(o.map(f=>{if(f=at(f),f in je)return;je[f]=!0;const l=f.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${h}`))return;const w=document.createElement("link");if(w.rel=l?"stylesheet":rt,l||(w.as="script"),w.crossOrigin="",w.href=f,a&&w.setAttribute("nonce",a),document.head.appendChild(w),l)return new Promise((s,n)=>{w.addEventListener("load",s),w.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return c.then(r=>{for(const a of r||[])a.status==="rejected"&&i(a.reason);return x().catch(i)})};function lt(t={}){const{immediate:x=!1,onNeedRefresh:o,onOfflineReady:m,onRegistered:c,onRegisteredSW:i,onRegisterError:r}=t;let a,u;const f=async(h=!0)=>{await u};async function l(){if("serviceWorker"in navigator){if(a=await nt(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/vault_finance/sw.js",{scope:"/vault_finance/",type:"classic"})).catch(h=>{r?.(h)}),!a)return;a.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),a.addEventListener("installed",h=>{h.isUpdate||m?.()}),a.register({immediate:x}).then(h=>{i?i("/vault_finance/sw.js",h):c?.(h)}).catch(h=>{r?.(h)})}}return u=l(),f}lt({immediate:!0,onRegistered(t){},onRegisterError(t){}});const ye=document.getElementById("root");if(!ye)throw new Error("Could not find root element to mount to");const ot=$e.createRoot(ye);ot.render(e.jsx(we.StrictMode,{children:e.jsx(qe,{})}));
