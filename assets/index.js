import{r as Xe,a as Je,g as Qe}from"./vendor-react.js";import{r as u,a as Ze,R as $e,b as fe,B as et,C as tt,X as st,Y as rt,T as ge,c as Ce,P as Ie,d as Re,e as De}from"./vendor-recharts.js";import"./vendor-utils.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))f(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const a of d.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&f(a)}).observe(document,{childList:!0,subtree:!0});function l(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function f(o){if(o.ep)return;o.ep=!0;const d=l(o);fetch(o.href,d)}})();var ve={exports:{}},Q={};var Le;function at(){if(Le)return Q;Le=1;var t=Xe(),m=Symbol.for("react.element"),l=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function a(g,h,n){var x,c={},i=null,r=null;n!==void 0&&(i=""+n),h.key!==void 0&&(i=""+h.key),h.ref!==void 0&&(r=h.ref);for(x in h)f.call(h,x)&&!d.hasOwnProperty(x)&&(c[x]=h[x]);if(g&&g.defaultProps)for(x in h=g.defaultProps,h)c[x]===void 0&&(c[x]=h[x]);return{$$typeof:m,type:g,key:i,ref:r,props:c,_owner:o.current}}return Q.Fragment=l,Q.jsx=a,Q.jsxs=a,Q}var Ae;function nt(){return Ae||(Ae=1,ve.exports=at()),ve.exports}var e=nt(),le={},Te;function lt(){if(Te)return le;Te=1;var t=Je();return le.createRoot=t.createRoot,le.hydrateRoot=t.hydrateRoot,le}var ot=lt();const it=Qe(ot);var J=(t=>(t.USD="USD",t.EUR="EUR",t.GBP="GBP",t.JPY="JPY",t.CAD="CAD",t.AUD="AUD",t.INR="INR",t.CNY="CNY",t))(J||{}),E=(t=>(t.INCOME="income",t.EXPENSE="expense",t))(E||{}),D=(t=>(t.FOOD="Food",t.TRANSPORT="Transport",t.HOUSING="Housing",t.UTILITIES="Utilities",t.ENTERTAINMENT="Entertainment",t.HEALTH="Health",t.INCOME="Salary",t.SHOPPING="Shopping",t.SAVINGS="Savings",t.RENTAL="Rental",t.FREELANCE="Freelance",t.BONUS="Bonus",t.INVESTMENTS="Investments",t.REFUNDS="Refunds",t.GIFT="Gift",t.OTHER="Other",t))(D||{}),Y=(t=>(t.WEEKLY="Weekly",t.MONTHLY="Monthly",t.YEARLY="Yearly",t))(Y||{});const ct=1e5,dt=16,we=12;class xt{constructor(){this.key=null}async deriveKey(m,l){const f=new TextEncoder,o=await window.crypto.subtle.importKey("raw",f.encode(m),{name:"PBKDF2"},!1,["deriveKey"]),d=l||window.crypto.getRandomValues(new Uint8Array(dt)),a=await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:d,iterations:ct,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);return this.key=a,{key:a,salt:d}}hasKey(){return this.key!==null}clearKey(){this.key=null}async encrypt(m){if(!this.key)throw new Error("Key not initialized");const l=new TextEncoder,f=window.crypto.getRandomValues(new Uint8Array(we)),o=l.encode(m),d=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:f},this.key,o),a=new Uint8Array(f.byteLength+d.byteLength);return a.set(f,0),a.set(new Uint8Array(d),f.byteLength),this.arrayBufferToBase64(a)}async decrypt(m){if(!this.key)throw new Error("Key not initialized");const l=this.base64ToArrayBuffer(m),f=l.slice(0,we),o=l.slice(we),d=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:f},this.key,o);return new TextDecoder().decode(d)}arrayBufferToBase64(m){let l="";const f=m.byteLength;for(let o=0;o<f;o++)l+=String.fromCharCode(m[o]);return window.btoa(l)}base64ToArrayBuffer(m){const l=window.atob(m),f=l.length,o=new Uint8Array(f);for(let d=0;d<f;d++)o[d]=l.charCodeAt(d);return o}}const G=new xt,Oe="vf_rates_cache",ut=1e3*60*60*24,mt=async t=>{const m=localStorage.getItem(Oe);if(m)try{const l=JSON.parse(m),f=Date.now()-l.timestamp<ut,o=l.base===t;if(f&&o)return l.rates}catch{}try{const l=await fetch(`https://open.er-api.com/v6/latest/${t}`);if(!l.ok)throw new Error("Failed to fetch rates");const o=(await l.json()).rates,d={timestamp:Date.now(),base:t,rates:o};return localStorage.setItem(Oe,JSON.stringify(d)),o}catch{return m?JSON.parse(m).rates:{[t]:1}}},ce=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),re=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5v14"})]}),ae=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),de=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),e.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),xe=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),e.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),e.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),ht=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Me=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),je=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"m17 2 4 4-4 4"}),e.jsx("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),e.jsx("path",{d:"m7 22-4-4 4-4"}),e.jsx("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]}),ye=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"6"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),pt=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.3-4.3"})]}),Pe=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),e.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),e.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),_e=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),e.jsx("path",{d:"M21 3v5h-5"}),e.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),e.jsx("path",{d:"M3 21v-5h5"})]}),bt=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),ft=({children:t,content:m,position:l="bottom"})=>{const[f,o]=u.useState(!1),d=u.useRef(null),[a,g]=u.useState({left:0,top:0});return u.useEffect(()=>{if(d.current){const h=d.current.getBoundingClientRect(),n=window.scrollY,x=window.scrollX;let c=0,i=h.left+h.width/2+x;l==="top"?c=h.top+n-12:c=h.bottom+n+12,g({top:c,left:i})}},[f,l]),m?e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:d,className:"relative inline-block",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:t}),Ze.createPortal(e.jsx("div",{className:`tooltip-custom ${f?"visible":""}`,style:{top:a.top,left:a.left},children:m}),document.body)]}):e.jsx(e.Fragment,{children:t})},gt="modulepreload",vt=function(t){return"/vault_finance/"+t},Fe={},wt=function(m,l,f){let o=Promise.resolve();if(l&&l.length>0){let h=function(n){return Promise.all(n.map(x=>Promise.resolve(x).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),g=a?.nonce||a?.getAttribute("nonce");o=h(l.map(n=>{if(n=vt(n),n in Fe)return;Fe[n]=!0;const x=n.endsWith(".css"),c=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${c}`))return;const i=document.createElement("link");if(i.rel=x?"stylesheet":gt,x||(i.as="script"),i.crossOrigin="",i.href=n,g&&i.setAttribute("nonce",g),document.head.appendChild(i),x)return new Promise((r,S)=>{i.addEventListener("load",r),i.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${n}`)))})}))}function d(a){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=a,window.dispatchEvent(g),!g.defaultPrevented)throw a}return o.then(a=>{for(const g of a||[])g.status==="rejected"&&d(g.reason);return m().catch(d)})};function jt(t={}){const{immediate:m=!1,onNeedRefresh:l,onOfflineReady:f,onRegistered:o,onRegisteredSW:d,onRegisterError:a}=t;let g,h;const n=async(c=!0)=>{await h};async function x(){if("serviceWorker"in navigator){if(g=await wt(async()=>{const{Workbox:c}=await import("./workbox-window.prod.es5.js");return{Workbox:c}},[]).then(({Workbox:c})=>new c("/vault_finance/sw.js",{scope:"/vault_finance/",type:"classic"})).catch(c=>{a?.(c)}),!g)return;g.addEventListener("activated",c=>{(c.isUpdate||c.isExternal)&&window.location.reload()}),g.addEventListener("installed",c=>{c.isUpdate||f?.()}),g.register({immediate:m}).then(c=>{d?d("/vault_finance/sw.js",c):o?.(c)}).catch(c=>{a?.(c)})}}return h=x(),n}function yt(t={}){const{immediate:m=!0,onNeedRefresh:l,onOfflineReady:f,onRegistered:o,onRegisteredSW:d,onRegisterError:a}=t,[g,h]=u.useState(!1),[n,x]=u.useState(!1),[c]=u.useState(()=>jt({immediate:m,onOfflineReady(){x(!0),f?.()},onNeedRefresh(){h(!0),l?.()},onRegistered:o,onRegisteredSW:d,onRegisterError:a}));return{needRefresh:[g,h],offlineReady:[n,x],updateServiceWorker:c}}const W="vf_encrypted_vault",K="vf_salt",se="vf_vault_name",Ne=300*1e3,oe=["#f87171","#fbbf24","#f472b6","#a78bfa","#f97316","#e11d48","#c084fc"],ie=["#34d399","#60a5fa","#2dd4bf","#818cf8","#4ade80","#22d3ee","#6366f1"],X=[D.INCOME,D.SAVINGS,D.RENTAL,D.FREELANCE,D.BONUS,D.INVESTMENTS,D.REFUNDS,D.GIFT,D.OTHER],Z={transactions:[],recurring:[],goals:[],baseCurrency:J.USD,theme:"dark",autoLockDuration:Ne,customCategories:[]},ee=(t,m)=>{const l=Math.abs(t)>=1e3;return new Intl.NumberFormat(void 0,{style:"currency",currency:m,notation:l?"compact":"standard",maximumFractionDigits:l?3:2,minimumFractionDigits:l?0:2}).format(t)},z=t=>{const m=Math.abs(t)>=1e3;return new Intl.NumberFormat(void 0,{notation:m?"compact":"standard",maximumFractionDigits:m?3:2,minimumFractionDigits:m?0:2}).format(t)};function Nt(){const[t,m]=u.useState(!!localStorage.getItem(K)),[l,f]=u.useState(!1),[o,d]=u.useState(""),[a,g]=u.useState(!1),[h,n]=u.useState(null),[x,c]=u.useState(localStorage.getItem(se)||""),[i,r]=u.useState(Z),[S,R]=u.useState({}),[j,s]=u.useState("dashboard"),[N,y]=u.useState(!1),[L,A]=u.useState(null),[k,T]=u.useState(!1),[p,U]=u.useState(navigator.onLine),B=u.useRef(null),[$,O]=u.useState(!1),[M,F]=u.useState(null),{needRefresh:[P],updateServiceWorker:Be}=yt({onRegistered(b){b&&(B.current=b,setInterval(()=>{b.update()},3600*1e3))},onRegisterError(b){}}),Se=async()=>{if(!(!p||$)){if(P){Be(!0);return}O(!0),F("Checking...");try{B.current?(await B.current.update(),setTimeout(()=>{O(!1),P||(F("Up to date!"),setTimeout(()=>F(null),3e3))},1500)):(O(!1),F("Ready"),setTimeout(()=>F(null),2e3))}catch{O(!1),F("Failed"),setTimeout(()=>F(null),3e3)}}};u.useEffect(()=>{const b=()=>U(!0),v=()=>U(!1);return window.addEventListener("online",b),window.addEventListener("offline",v),()=>{window.removeEventListener("online",b),window.removeEventListener("offline",v)}},[]);const ke=u.useRef(Date.now());u.useEffect(()=>{if(!l)return;const b=i.autoLockDuration!==void 0?i.autoLockDuration:Ne;if(b===0)return;const v=()=>{Date.now()-ke.current>b&&ue()},w=()=>{ke.current=Date.now()},I=setInterval(v,1e4);return window.addEventListener("mousemove",w),window.addEventListener("keydown",w),window.addEventListener("click",w),()=>{clearInterval(I),window.removeEventListener("mousemove",w),window.removeEventListener("keydown",w),window.removeEventListener("click",w)}},[l,i.autoLockDuration]);const Ve=async(b,v,w)=>{if(b.preventDefault(),n(null),w.length<4){n("Password is too short (min 4 chars).");return}if(v.length>21){n("Vault Name must be 21 characters or less.");return}g(!0);try{const{salt:I}=await G.deriveKey(w),_=btoa(String.fromCharCode(...I));localStorage.setItem(K,_),v&&(localStorage.setItem(se,v),c(v));const C={...Z,vaultName:v},H=JSON.stringify(C),pe=await G.encrypt(H);localStorage.setItem(W,pe),r(C),m(!0),f(!0),d("")}catch{n("Failed to create vault.")}finally{g(!1)}},ze=b=>{new Date().setHours(0,0,0,0),(b.recurring||[]).forEach(I=>{if(!I.active)return;new Date(I.nextDueDate).setHours(0,0,0,0)})},He=async b=>{b.preventDefault(),g(!0),n(null);try{const v=localStorage.getItem(K),w=localStorage.getItem(W);if(!v){m(!1);return}const I=new Uint8Array(atob(v).split("").map(_=>_.charCodeAt(0)));if(await G.deriveKey(o,I),w)try{const _=await G.decrypt(w),C=JSON.parse(_);let H=!1;const pe=C.transactions.map(be=>be.recordedBaseCurrency?be:(H=!0,{...be,recordedBaseCurrency:C.baseCurrency}));C.recurring||(C.recurring=[],H=!0),C.goals||(C.goals=[],H=!0),C.autoLockDuration===void 0&&(C.autoLockDuration=Ne,H=!0),C.customCategories||(C.customCategories=[],H=!0),H&&(C.transactions=pe,Ee(C)),C.vaultName&&C.vaultName!==x&&(localStorage.setItem(se,C.vaultName),c(C.vaultName)),r(C),f(!0),ze(C)}catch{n("Incorrect password.")}else r(Z),f(!0)}catch{n("An error occurred during authentication.")}finally{g(!1),d("")}},ue=()=>{G.clearKey(),f(!1),d(""),r(Z),s("dashboard")},Ye=()=>{localStorage.clear(),G.clearKey(),r(Z),f(!1),m(!1),d(""),c(""),s("dashboard")},Ee=async b=>{try{const v=JSON.stringify(b),w=await G.encrypt(v);localStorage.setItem(W,w)}catch{alert("Failed to save data securely!")}},q=b=>{r(b),Ee(b)};u.useEffect(()=>{l&&(async()=>{const v=await mt(i.baseCurrency);R(v)})()},[l,i.baseCurrency]);const ne=u.useCallback((b,v,w)=>{if(v===w||!S[v]&&!S[w])return b;if(w===i.baseCurrency){const C=S[v];return C?b/C:b}if(v===i.baseCurrency){const C=S[w];return C?b*C:b}const I=S[v],_=S[w];return!I||!_?b:b/I*_},[S,i.baseCurrency]),V=u.useCallback(b=>{if(b.exchangeRate&&b.recordedBaseCurrency){const v=b.amount/b.exchangeRate;return ne(v,b.recordedBaseCurrency,i.baseCurrency)}return ne(b.amount,b.currency,i.baseCurrency)},[i.baseCurrency,ne]),Ge=u.useMemo(()=>i.transactions.reduce((b,v)=>{const w=V(v);return b+(v.type===E.INCOME?w:-w)},0),[i.transactions,V]),me=u.useMemo(()=>{const b=i.transactions.filter(w=>w.type===E.EXPENSE),v={};return b.forEach(w=>{const I=V(w);v[w.category]=(v[w.category]||0)+I}),Object.entries(v).map(([w,I])=>({name:w,value:I}))},[i.transactions,V]),he=u.useMemo(()=>{const b=i.transactions.filter(w=>w.type===E.INCOME),v={};return b.forEach(w=>{const I=V(w);v[w.category]=(v[w.category]||0)+I}),Object.entries(v).map(([w,I])=>({name:w,value:I}))},[i.transactions,V]),We=u.useMemo(()=>he.reduce((b,v)=>b+v.value,0),[he]),Ke=u.useMemo(()=>me.reduce((b,v)=>b+v.value,0),[me]),qe=u.useMemo(()=>{const b={},v=new Date;for(let w=5;w>=0;w--){const _=new Date(v.getFullYear(),v.getMonth()-w,1).toLocaleString("default",{month:"short"});b[_]={income:0,expense:0}}return i.transactions.forEach(w=>{const I=new Date(w.date);if(v.getTime()-I.getTime()<4320*60*60*1e3){const _=I.toLocaleString("default",{month:"short"});if(b[_]){const C=V(w);w.type===E.INCOME?b[_].income+=C:b[_].expense+=C}}}),Object.entries(b).map(([w,I])=>({name:w,Income:I.income,Expense:I.expense}))},[i.transactions,V]);return t?l?e.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col md:flex-row text-slate-200 font-sans",children:[e.jsxs("aside",{className:"hidden md:flex flex-col w-64 border-r border-slate-800 bg-slate-950 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-xl shadow-lg shadow-brand-500/20",children:e.jsx(ce,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:"font-bold text-lg tracking-tight text-white flex flex-col leading-tight min-w-0",children:[e.jsx("span",{children:"Vault Finance"}),e.jsx("span",{className:"text-xs text-brand-400 font-mono font-medium tracking-wider cursor-default",children:"v1.0.0"})]})]}),e.jsxs("nav",{className:"flex-1 space-y-2",children:[e.jsx(te,{active:j==="dashboard",onClick:()=>s("dashboard"),icon:e.jsx(de,{}),label:"Dashboard"}),e.jsx(te,{active:j==="transactions",onClick:()=>s("transactions"),icon:e.jsx(xe,{}),label:"Transactions"}),e.jsx(te,{active:j==="recurring",onClick:()=>s("recurring"),icon:e.jsx(je,{}),label:"Recurring"}),e.jsx(te,{active:j==="goals",onClick:()=>s("goals"),icon:e.jsx(ye,{}),label:"Goals"}),e.jsx(te,{active:j==="settings",onClick:()=>s("settings"),icon:e.jsx(ht,{}),label:"Settings"})]}),e.jsxs("div",{className:"mt-auto space-y-2 pt-6 border-t border-slate-800",children:[e.jsxs("button",{onClick:Se,disabled:!p||$,className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 border text-sm font-medium ${P?"bg-brand-600 border-brand-500 text-white shadow-lg animate-pulse":"bg-transparent border-transparent text-slate-500 hover:text-slate-300 hover:bg-slate-900/50"} disabled:opacity-30 disabled:cursor-not-allowed`,children:[e.jsx(_e,{className:`w-5 h-5 ${P||$?"animate-spin-slow":""}`}),e.jsx("span",{className:"truncate",children:P?"Apply Update":M||"Check Updates"}),!p&&e.jsx("span",{className:"text-[10px] ml-auto opacity-50",children:"Offline"})]}),e.jsxs("button",{onClick:ue,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 border border-transparent text-sm font-medium text-slate-500 hover:text-white hover:bg-slate-900/50",children:[e.jsx(Me,{className:"w-5 h-5"}),e.jsx("span",{children:"Lock Vault"})]})]})]}),e.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-slate-800 bg-slate-950/80 backdrop-blur-md sticky top-0 z-20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-lg",children:e.jsx(ce,{className:"w-5 h-5 text-white"})}),e.jsxs("span",{className:"font-bold text-lg text-white flex flex-col leading-tight min-w-0",children:[e.jsx("span",{children:"Vault Finance"}),e.jsx("span",{className:"text-xs text-brand-400 font-mono font-medium tracking-wider cursor-default",children:"v1.0.0"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[M&&!P&&e.jsx("span",{className:"text-[10px] font-bold text-brand-400 animate-in fade-in zoom-in-95",children:M}),e.jsx("button",{onClick:Se,disabled:!p||$,className:`p-2 rounded-lg transition-all ${P?"bg-brand-600 text-white animate-pulse":"text-slate-500 hover:text-white hover:bg-slate-900"} disabled:opacity-30 disabled:cursor-not-allowed`,title:p?P?"Click to Update!":M||"Check for Updates":"Offline",children:e.jsx(_e,{className:`w-5 h-5 ${P||$?"animate-spin-slow":""}`})}),e.jsx("button",{onClick:ue,className:"text-slate-500 hover:text-white p-2",children:e.jsx(Me,{className:"w-5 h-5"})})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto h-screen relative scrollbar-hide bg-slate-950",children:e.jsxs("div",{className:"p-6 max-w-6xl mx-auto pb-24 md:pb-6 relative z-10",children:[j==="dashboard"&&e.jsx(Et,{balance:Ge,totalIncome:We,totalExpense:Ke,baseCurrency:i.baseCurrency,expensesByCategory:me,incomeByCategory:he,monthlyData:qe,recentTransactions:i.transactions.slice(0,5),onAddTransaction:()=>{A(null),y(!0)},onViewAll:()=>s("transactions")}),j==="transactions"&&e.jsx(Ct,{transactions:i.transactions,baseCurrency:i.baseCurrency,onDelete:b=>q({...i,transactions:i.transactions.filter(v=>v.id!==b)}),onEdit:b=>{A(b),y(!0)},onAdd:()=>{A(null),y(!0)},getTransactionValue:V,customCategories:i.customCategories}),j==="recurring"&&e.jsx(It,{data:i,onUpdate:q,baseCurrency:i.baseCurrency,exchangeRates:S}),j==="goals"&&e.jsx(Rt,{data:i,onUpdate:q,baseCurrency:i.baseCurrency,convertAmount:ne,exchangeRates:S}),j==="settings"&&e.jsx(Dt,{data:i,onUpdateData:q,onVaultDeleted:()=>{m(!1),f(!1),localStorage.clear()},exchangeRates:S})]})}),e.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-slate-950 border-t border-slate-800 flex justify-around p-4 z-20 pb-8",children:[e.jsx("button",{onClick:()=>s("dashboard"),className:`${j==="dashboard"?"text-white":"text-slate-500"}`,children:e.jsx(de,{})}),e.jsx("button",{onClick:()=>s("transactions"),className:`${j==="transactions"?"text-white":"text-slate-500"}`,children:e.jsx(xe,{})}),e.jsx("button",{onClick:()=>{A(null),y(!0)},className:"bg-brand-600 text-white p-3 rounded-full -mt-10 border-4 border-slate-950 shadow-lg shadow-brand-900/40",children:e.jsx(re,{})}),e.jsx("button",{onClick:()=>s("recurring"),className:`${j==="recurring"?"text-white":"text-slate-500"}`,children:e.jsx(je,{})}),e.jsx("button",{onClick:()=>s("goals"),className:`${j==="goals"?"text-white":"text-slate-500"}`,children:e.jsx(ye,{})})]}),N&&e.jsx(Lt,{initialData:L,onClose:()=>{y(!1),A(null)},onSave:b=>{q(L?{...i,transactions:i.transactions.map(v=>v.id===b.id?b:v)}:{...i,transactions:[b,...i.transactions]}),y(!1),A(null)},baseCurrency:i.baseCurrency,exchangeRates:S,customCategories:i.customCategories})]}):e.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 inset-0 bg-gradient-to-b from-slate-900 to-slate-950"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-brand-900/10 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"w-full max-w-md bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl relative z-10 animate-in fade-in zoom-in-95 duration-500",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-brand-600 rounded-2xl shadow-lg shadow-brand-500/20",children:e.jsx(ce,{className:"w-10 h-10 text-white"})})}),e.jsx("div",{className:"flex justify-center mb-2",children:x?e.jsx("h1",{className:"text-2xl font-bold text-center text-white truncate max-w-[300px]",children:x}):e.jsx("h1",{className:"text-2xl font-bold text-center text-white",children:"Vault Locked"})}),e.jsx("p",{className:"text-slate-400 text-center mb-8 text-sm",children:x?"Enter your master password to access your vault.":"Enter your master password to decrypt."}),e.jsxs("form",{onSubmit:He,className:"space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"password",value:o,onChange:b=>d(b.target.value),placeholder:"Master Password",className:"w-full bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-transparent transition-all placeholder:text-slate-600",autoFocus:!0})}),h&&e.jsx("p",{className:"text-red-400 text-sm text-center bg-red-900/20 py-2 rounded-lg border border-red-900/50",children:h}),e.jsx("button",{type:"submit",disabled:!o||a,className:"w-full bg-brand-600 hover:bg-brand-500 text-white font-semibold py-3 rounded-xl transition-all shadow-lg shadow-brand-600/20 disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center",children:a?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Unlock Vault"})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("button",{onClick:()=>T(!0),className:"text-xs text-slate-500 hover:text-red-400 transition-colors",children:"Reset Vault (Delete Data)"})}),k&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-8 w-full max-w-sm shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-red-500/10 rounded-2xl",children:e.jsx(ae,{className:"w-8 h-8 text-red-500"})})}),e.jsx("h3",{className:"text-xl font-bold text-white text-center mb-2",children:"Reset Entire Vault?"}),e.jsxs("p",{className:"text-slate-400 text-sm text-center mb-8",children:["This will perform a hard reset. All your data will be"," ",e.jsx("strong",{children:"permanently deleted"}),". This action cannot be undone."]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:()=>{Ye(),T(!1)},className:"w-full bg-red-600 hover:bg-red-500 text-white py-3.5 rounded-xl font-bold transition-all shadow-lg shadow-red-600/20",children:"Yes, Delete Everything"}),e.jsx("button",{onClick:()=>T(!1),className:"w-full bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-xl font-medium transition-colors",children:"Cancel"})]})]})})]})]}):e.jsx(St,{password:o,setPassword:d,onCreate:Ve,isLoading:a,error:h,onImportSuccess:()=>{m(!0),c(localStorage.getItem(se)||"")}})}const St=({password:t,setPassword:m,onCreate:l,isLoading:f,error:o,onImportSuccess:d})=>{const[a,g]=u.useState("create"),[h,n]=u.useState(null),x=c=>{const i=c.target.files?.[0];if(n(null),!i)return;if(i.size===0){n("Import Failed: The selected file is empty."),c.target.value="";return}const r=new FileReader;r.onload=S=>{try{const R=(S.target?.result||"").trim();if(!R){n("Import Failed: File content is empty.");return}let j=!1;try{const s=JSON.parse(R);if(s.transactions&&Array.isArray(s.transactions)&&!s.salt){n("Security Error: Importing unencrypted raw JSON data is not allowed."),c.target.value="";return}s.salt&&s.data&&(localStorage.setItem(K,s.salt),localStorage.setItem(W,s.data),j=!0)}catch{}if(!j&&!h&&R.includes("|")){const s=R.split("|");if(s.length>=2){const[N,y]=s;N&&y&&(localStorage.setItem(K,N),localStorage.setItem(W,y),localStorage.setItem(K,N),localStorage.setItem(W,y),j=!0)}}j?d():h||n("Invalid backup file format. Expected an encrypted .vf file.")}catch{n("Import Failed: An unexpected error occurred.")}c.target.value=""},r.readAsText(i)};return e.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 inset-0 bg-gradient-to-b from-slate-900 to-slate-950"}),e.jsxs("div",{className:"w-full max-w-lg bg-slate-900 border border-slate-800 rounded-3xl p-8 shadow-2xl relative z-10 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-2xl shadow-xl shadow-brand-500/20",children:e.jsx(ce,{className:"w-12 h-12 text-white"})})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome to Vault Finance"}),e.jsx("p",{className:"text-slate-400",children:"Secure, offline, personal finance tracking."})]}),e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl mb-8 border border-slate-800",children:[e.jsx("button",{onClick:()=>{g("create"),n(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all ${a==="create"?"bg-brand-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Create New Vault"}),e.jsx("button",{onClick:()=>{g("import"),n(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all ${a==="import"?"bg-brand-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Import Backup"})]}),a==="create"?e.jsx(kt,{onCreate:l,isLoading:f,error:o}):e.jsxs("div",{className:"animate-in fade-in duration-300 text-center py-8 bg-slate-950/50 rounded-2xl border border-slate-800 border-dashed",children:[e.jsx(xe,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-medium mb-1",children:"Upload Backup File"}),e.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Restore a .vf encrypted backup file."}),h&&e.jsx("div",{className:"mb-6 mx-4 p-3 bg-red-900/20 border border-red-900/50 rounded-xl text-sm text-red-400",children:h}),e.jsxs("label",{className:"bg-white hover:bg-slate-200 text-black px-6 py-3 rounded-xl font-bold cursor-pointer transition-all inline-block",children:["Select File",e.jsx("input",{type:"file",onChange:x,className:"hidden",accept:".json,.vf"})]})]})]})]})},kt=({onCreate:t,isLoading:m,error:l})=>{const[f,o]=u.useState(""),[d,a]=u.useState(""),g=h=>{t(h,f,d)};return e.jsxs("form",{onSubmit:g,className:"space-y-4 animate-in fade-in duration-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wider",children:"Vault Name"}),e.jsx("input",{type:"text",name:"username",value:f,maxLength:21,onChange:h=>o(h.target.value),className:"w-full bg-slate-900 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50",placeholder:"e.g. My Vault",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wider",children:"Set Master Password"}),e.jsx("input",{type:"password",value:d,onChange:h=>a(h.target.value),placeholder:"Create a strong password",className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-transparent transition-all placeholder:text-slate-600"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Your data will be encrypted with this password."})]}),l&&e.jsx("p",{className:"text-red-400 text-sm text-center bg-red-900/20 py-2 rounded-lg border border-red-900/50",children:l}),e.jsx("button",{type:"submit",disabled:!d||!f.trim()||m,className:"w-full bg-white hover:bg-slate-200 text-black font-bold py-3.5 rounded-xl transition-all shadow-lg mt-2 disabled:opacity-50",children:m?"Creating...":"Create Vault"})]})},te=({active:t,onClick:m,icon:l,label:f})=>e.jsxs("button",{onClick:m,className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 border text-sm font-medium ${t?"bg-slate-900 border-slate-800 text-white shadow-sm":"bg-transparent border-transparent text-slate-500 hover:text-slate-300 hover:bg-slate-900/50"}`,children:[$e.cloneElement(l,{className:`w-5 h-5 ${t?"text-brand-400":"text-current"}`}),e.jsx("span",{className:"",children:f})]}),Et=({balance:t,totalIncome:m,totalExpense:l,baseCurrency:f,expensesByCategory:o,incomeByCategory:d,monthlyData:a,recentTransactions:g,onAddTransaction:h,onViewAll:n})=>e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-brand-600 to-indigo-700 rounded-3xl p-8 text-white border border-brand-500/20 relative overflow-hidden shadow-2xl shadow-brand-900/30 group transition-all duration-500 hover:scale-[1.01] hover:shadow-brand-900/50",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-32 group-hover:bg-white/15 transition-colors duration-500"}),e.jsx("p",{className:"text-brand-100 font-medium mb-2 relative z-10 text-sm uppercase tracking-wider flex items-center gap-2",children:"Total Balance"}),e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold relative z-10 tracking-tight text-white drop-shadow-sm break-words leading-tight",children:ee(t,f)}),e.jsxs("button",{onClick:h,className:"mt-8 bg-white/10 hover:bg-white/20 backdrop-blur-md border border-white/20 py-2.5 px-5 rounded-xl text-sm font-semibold transition-all flex items-center gap-2 relative z-10 hover:scale-105 active:scale-95",children:[e.jsx(re,{className:"w-4 h-4"})," Add Transaction"]}),e.jsxs("div",{className:"mt-8 grid grid-cols-[4.5fr_5.5fr] gap-4 relative z-10 border-t border-white/10 pt-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-brand-100/60 uppercase tracking-wider mb-1",children:"Total Income"}),e.jsx("span",{className:"text-xl font-bold text-emerald-300",children:ee(m,f)})]}),e.jsxs("div",{className:"flex flex-col border-l border-white/10 pl-4",children:[e.jsx("span",{className:"text-xs text-brand-100/60 uppercase tracking-wider mb-1",children:"Total Expenses"}),e.jsx("span",{className:"text-xl font-bold text-rose-300",children:ee(l,f)})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-sm transition-all duration-300 hover:border-slate-700 hover:shadow-xl hover:shadow-black/20 hover:-translate-y-1",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-6 text-slate-100 flex items-center gap-2",children:["Analytics"," ",e.jsx("span",{className:"text-xs font-normal text-slate-400 bg-slate-950 px-2 py-0.5 rounded-full border border-slate-800",children:"Last 6 Months"})]}),e.jsx("div",{style:{width:"100%",height:300},children:e.jsx(fe,{width:"100%",height:"100%",children:e.jsxs(et,{data:a,children:[e.jsx(tt,{strokeDasharray:"3 3",stroke:"#27272a",vertical:!1}),e.jsx(st,{dataKey:"name",stroke:"#6b7280",tickLine:!1,axisLine:!1,fontSize:12,dy:10}),e.jsx(rt,{stroke:"#6b7280",tickLine:!1,axisLine:!1,fontSize:12,tickFormatter:x=>`${x/1e3}k`}),e.jsx(ge,{formatter:x=>z(x),contentStyle:{backgroundColor:"#1c1c1e",border:"1px solid #374151",borderRadius:"8px",color:"#fff"},cursor:{fill:"rgba(255,255,255,0.03)"}}),e.jsx(Ce,{dataKey:"Income",fill:"#34d399",radius:[4,4,0,0],maxBarSize:40}),e.jsx(Ce,{dataKey:"Expense",fill:"#f87171",radius:[4,4,0,0],maxBarSize:40})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1.5fr_1fr] gap-6",children:[e.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-sm flex flex-col h-[420px] transition-all duration-300 hover:border-slate-700 hover:shadow-xl hover:shadow-black/20 hover:-translate-y-1 overflow-hidden",children:e.jsxs("div",{className:"flex-1 w-full min-h-0 relative grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center h-full",children:[e.jsx("p",{className:"text-sm font-bold text-rose-400 mb-3 uppercase tracking-widest border-b border-rose-500/10 w-full text-center pb-3",children:"Expense Breakdown"}),e.jsx("div",{className:"flex-1 w-full relative min-h-[200px]",children:o.length>0?e.jsx(fe,{width:"100%",height:"100%",children:e.jsxs(Ie,{children:[e.jsx(Re,{data:o,cx:"50%",cy:"50%",innerRadius:70,outerRadius:100,paddingAngle:5,dataKey:"value",stroke:"none",children:o.map((x,c)=>e.jsx(De,{fill:oe[c%oe.length]},`cell-${c}`))}),e.jsx(ge,{formatter:x=>ee(x,f),contentStyle:{backgroundColor:"#1c1c1e",border:"1px solid #374151",borderRadius:"8px",color:"#fff"},itemStyle:{color:"#fff"}})]})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-20",children:e.jsx(de,{className:"w-8 h-8"})})}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-4 justify-center max-h-24 overflow-y-auto w-full px-2 scrollbar-none",children:o.map((x,c)=>e.jsxs("span",{className:"text-[10px] bg-slate-950 text-slate-400 px-2.5 py-1.5 rounded-lg border border-slate-800 flex items-center gap-1.5 transition-colors hover:border-rose-500/30",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full shadow-[0_0_8px_rgba(244,63,94,0.3)]",style:{backgroundColor:oe[c%oe.length]}}),x.name]},`exp-${c}`))})]}),e.jsxs("div",{className:"flex flex-col items-center border-l border-slate-800 pl-4 h-full",children:[e.jsx("p",{className:"text-sm font-bold text-emerald-400 mb-3 uppercase tracking-widest border-b border-emerald-500/10 w-full text-center pb-3",children:"Income Breakdown"}),e.jsx("div",{className:"flex-1 w-full relative min-h-[200px]",children:d.length>0?e.jsx(fe,{width:"100%",height:"100%",children:e.jsxs(Ie,{children:[e.jsx(Re,{data:d,cx:"50%",cy:"50%",innerRadius:70,outerRadius:100,paddingAngle:5,dataKey:"value",stroke:"none",children:d.map((x,c)=>e.jsx(De,{fill:ie[c%ie.length]},`cell-${c}`))}),e.jsx(ge,{formatter:x=>ee(x,f),contentStyle:{backgroundColor:"#1c1c1e",border:"1px solid #374151",borderRadius:"8px",color:"#fff"},itemStyle:{color:"#fff"}})]})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-20",children:e.jsx(de,{className:"w-8 h-8"})})}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-4 justify-center max-h-24 overflow-y-auto w-full px-2 scrollbar-none",children:d.map((x,c)=>e.jsxs("span",{className:"text-[10px] bg-slate-950 text-slate-400 px-2.5 py-1.5 rounded-lg border border-slate-800 flex items-center gap-1.5 transition-colors hover:border-emerald-500/30",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full shadow-[0_0_8px_rgba(16,185,129,0.3)]",style:{backgroundColor:ie[c%ie.length]}}),x.name]},`inc-${c}`))})]})]})}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 flex flex-col shadow-sm h-[420px] transition-all duration-300 hover:border-slate-700 hover:shadow-xl hover:shadow-black/20 hover:-translate-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Recent Activity"}),e.jsx("button",{onClick:n,className:"text-xs text-brand-400 hover:text-brand-300 font-medium transition-colors",children:"View All"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-1 [&::-webkit-scrollbar]:hidden",children:[g.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500",children:[e.jsx(xe,{className:"w-8 h-8 mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"No recent activity."})]}),g.length>0&&e.jsx("div",{className:"space-y-3",children:g.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3.5 hover:bg-slate-950 rounded-2xl transition-all border border-transparent hover:border-slate-800 group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg ${x.type==="income"?"bg-emerald-500/10 text-emerald-500":"bg-rose-500/10 text-rose-500"}`,children:x.category.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-200 text-sm group-hover:text-white transition-colors",children:x.category}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(x.date).toLocaleDateString()})]})]}),e.jsxs("span",{className:`font-semibold text-sm ${x.type==="income"?"text-emerald-400":"text-slate-400"}`,children:[x.type==="income"?"+":"-",z(x.amount)," ",e.jsx("span",{className:"text-[10px] text-slate-500",children:x.currency})]})]},x.id))})]})]})]})]}),Ct=({transactions:t,baseCurrency:m,onDelete:l,onEdit:f,onAdd:o,getTransactionValue:d,customCategories:a})=>{const[g,h]=u.useState(""),[n,x]=u.useState("All"),[c,i]=u.useState("All"),[r,S]=u.useState("All"),R=u.useMemo(()=>{const s=t.map(N=>N.category);return Array.from(new Set(s)).sort()},[t]),j=u.useMemo(()=>t.filter(s=>{const N=s.description?.toLowerCase().includes(g.toLowerCase())||s.category.toLowerCase().includes(g.toLowerCase()),y=n==="All"||s.category===n,L=c==="All"||s.type===c;let A=!0;if(r!=="All"){const k=parseInt(r),T=new Date;T.setDate(T.getDate()-k),T.setHours(0,0,0,0),A=new Date(s.date)>=T}return N&&y&&L&&A}),[t,g,n,c,r]);return e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Transactions"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Manage your income and expenses."})]}),e.jsxs("button",{onClick:o,className:"bg-white hover:bg-slate-200 text-black px-5 py-2.5 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(re,{className:"w-4 h-4"})," New"]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-4 flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(pt,{className:"absolute left-3 top-3 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:g,onChange:s=>h(s.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl pl-9 pr-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50"})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-1 md:pb-0",children:[e.jsxs("select",{value:n,onChange:s=>x(s.target.value),className:"bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-sm text-slate-300 outline-none focus:ring-1 focus:ring-inset focus:ring-brand-500",children:[e.jsx("option",{value:"All",children:"All Categories"}),R.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:c,onChange:s=>i(s.target.value),className:"bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-sm text-slate-300 outline-none focus:ring-1 focus:ring-inset focus:ring-brand-500",children:[e.jsx("option",{value:"All",children:"All Types"}),e.jsx("option",{value:E.INCOME,children:"Income"}),e.jsx("option",{value:E.EXPENSE,children:"Expense"})]}),e.jsxs("select",{value:r,onChange:s=>S(s.target.value),className:"bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-sm text-slate-300 outline-none focus:ring-1 focus:ring-inset focus:ring-brand-500",children:[e.jsx("option",{value:"All",children:"All Time"}),e.jsx("option",{value:"30",children:"Last 30 Days"}),e.jsx("option",{value:"90",children:"Last 90 Days"}),e.jsx("option",{value:"365",children:"Last Year"})]})]})]}),e.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm text-slate-400",children:[e.jsx("thead",{className:"bg-slate-950/50 uppercase text-xs font-semibold tracking-wider text-slate-500 border-b border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Date"}),e.jsx("th",{className:"px-6 py-4",children:"Category"}),e.jsx("th",{className:"px-6 py-4",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Amount (Orig)"}),e.jsxs("th",{className:"px-6 py-4 text-right",children:["Value (",m,")"]}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800/50",children:[j.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-slate-500",children:"No transactions found matching your filters."})}),j.map(s=>e.jsxs("tr",{className:"hover:bg-slate-950/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 text-slate-300 font-medium",children:s.editHistory&&s.editHistory.length>0?e.jsx(ft,{position:"top",content:`Last edited: ${new Date(s.editHistory[s.editHistory.length-1]).toLocaleString()}`,children:e.jsx("span",{className:"cursor-help border-b border-dotted border-slate-500 hover:border-brand-500 transition-colors",children:new Date(s.date).toLocaleDateString()})}):new Date(s.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium border ${s.type==="income"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400":"bg-rose-500/10 border-rose-500/20 text-rose-400"}`,children:s.category})}),e.jsx("td",{className:"px-6 py-4 text-slate-400 max-w-xs",children:e.jsx("div",{className:"truncate",title:s.description||"",children:s.description||"-"})}),e.jsxs("td",{className:`px-6 py-4 text-right font-medium ${s.type==="income"?"text-emerald-400":"text-slate-400"}`,children:[z(s.amount)," ",e.jsx("span",{className:"text-xs text-slate-600",children:s.currency})]}),e.jsx("td",{className:`px-6 py-4 text-right font-medium ${s.type==="income"?"text-emerald-400":"text-slate-400"}`,children:z(d(s))}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>f(s),className:"p-2 text-slate-500 hover:text-brand-400 hover:bg-brand-500/10 rounded-lg transition-all",title:"Edit Transaction",children:e.jsx(bt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>l(s.id),className:"p-2 text-slate-500 hover:text-rose-400 hover:bg-rose-500/10 rounded-lg transition-all",title:"Delete Transaction",children:e.jsx(ae,{className:"w-4 h-4"})})]})})]},s.id))]})]})})})]})},It=({data:t,onUpdate:m,baseCurrency:l,exchangeRates:f})=>{const[o,d]=u.useState(!1),[a,g]=u.useState({frequency:Y.MONTHLY,currency:l,category:D.UTILITIES,active:!0,type:E.EXPENSE,exchangeRate:void 0}),h=()=>{const r=new Date;return r.setHours(0,0,0,0),(t.recurring||[]).filter(S=>{const R=new Date(S.nextDueDate);return R.setHours(0,0,0,0),S.active&&R<=r})},n=r=>{const S=r.exchangeRate||(r.currency===l?1:f[r.currency]),R={id:crypto.randomUUID(),amount:r.amount,currency:r.currency,category:r.category,type:r.type||E.EXPENSE,date:new Date().toISOString(),description:`Recurring: ${r.name}`,recordedBaseCurrency:l,exchangeRate:S},j=new Date(r.nextDueDate);r.frequency===Y.MONTHLY?j.setMonth(j.getMonth()+1):r.frequency===Y.WEEKLY?j.setDate(j.getDate()+7):r.frequency===Y.YEARLY&&j.setFullYear(j.getFullYear()+1);const s=t.recurring.map(N=>N.id===r.id?{...N,nextDueDate:j.toISOString()}:N);m({...t,transactions:[R,...t.transactions],recurring:s})},x=()=>{if(!a.name||!a.amount)return;const r={id:crypto.randomUUID(),name:a.name,amount:Number(a.amount),currency:a.currency||l,frequency:a.frequency||Y.MONTHLY,category:a.category||D.UTILITIES,nextDueDate:a.nextDueDate||new Date().toISOString(),active:!0,type:a.type||E.EXPENSE,exchangeRate:a.exchangeRate?Number(a.exchangeRate):void 0};m({...t,recurring:[...t.recurring||[],r]}),d(!1),g({frequency:Y.MONTHLY,currency:l,category:D.UTILITIES,active:!0,type:E.EXPENSE,exchangeRate:void 0})},c=r=>{const S=Object.values(D).filter(j=>r===E.INCOME?X.includes(j):!X.includes(j)||j===D.OTHER),R=(t.customCategories||[]).filter(j=>j.type===r).map(j=>j.name);return[...S,...R]},i=h();return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Recurring Items"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Automate your regular income and expenses."})]}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-white hover:bg-slate-200 text-black px-5 py-2.5 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(re,{className:"w-4 h-4"})," New"]})]}),i.length>0&&e.jsxs("div",{className:"bg-brand-900/20 border border-brand-500/30 rounded-3xl p-6",children:[e.jsxs("h3",{className:"text-brand-400 font-semibold mb-4 flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5"})," Due for Approval"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(r=>e.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded-xl flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-bold text-white",children:r.name}),e.jsx("span",{className:"text-xs bg-slate-800 text-slate-400 px-2 py-1 rounded",children:new Date(r.nextDueDate).toLocaleDateString()})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("p",{className:"text-lg font-mono text-slate-200",children:[z(r.amount)," ",r.currency]}),e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${r.type===E.INCOME?"text-emerald-400 bg-emerald-500/10":"text-rose-400 bg-rose-500/10"}`,children:r.type||"EXPENSE"})]}),r.exchangeRate&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Locked Rate: ",r.exchangeRate]})]}),e.jsx("button",{onClick:()=>n(r),className:"mt-4 w-full bg-brand-600 hover:bg-brand-500 text-white py-2 rounded-lg text-sm font-medium transition-colors",children:"Approve & Create"})]},r.id))})]}),e.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden shadow-sm",children:e.jsxs("table",{className:"w-full text-left text-sm text-slate-400",children:[e.jsx("thead",{className:"bg-slate-950/50 uppercase text-xs font-semibold tracking-wider text-slate-500 border-b border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Name"}),e.jsx("th",{className:"px-6 py-4",children:"Type"}),e.jsx("th",{className:"px-6 py-4",children:"Category"}),e.jsx("th",{className:"px-6 py-4",children:"Frequency"}),e.jsx("th",{className:"px-6 py-4",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Next Due"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800/50",children:[(t.recurring||[]).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-500",children:"No recurring items defined."})}),(t.recurring||[]).map(r=>e.jsxs("tr",{className:"hover:bg-slate-950/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-white font-medium",children:r.name}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded uppercase border ${r.type===E.INCOME?"text-emerald-400 border-emerald-500/20 bg-emerald-500/10":"text-rose-400 border-rose-500/20 bg-rose-500/10"}`,children:r.type||"EXPENSE"})}),e.jsx("td",{className:"px-6 py-4 text-slate-300",children:r.category}),e.jsx("td",{className:"px-6 py-4 text-slate-400",children:r.frequency}),e.jsxs("td",{className:"px-6 py-4 font-mono",children:[z(r.amount)," ",r.currency,r.exchangeRate&&e.jsxs("span",{className:"block text-[10px] text-slate-600",children:["@",r.exchangeRate]})]}),e.jsx("td",{className:"px-6 py-4",children:new Date(r.nextDueDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>m({...t,recurring:t.recurring.filter(S=>S.id!==r.id)}),className:"text-slate-500 hover:text-red-400",children:e.jsx(ae,{className:"w-4 h-4"})})})]},r.id))]})]})}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"New Recurring Item"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",placeholder:"Name (e.g. Salary, Netflix)",value:a.name||"",onChange:r=>g({...a,name:r.target.value})}),e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl border border-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>g({...a,type:E.EXPENSE,category:D.UTILITIES}),className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${a.type===E.EXPENSE?"bg-rose-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Expense"}),e.jsx("button",{type:"button",onClick:()=>g({...a,type:E.INCOME,category:D.INCOME}),className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${a.type===E.INCOME?"bg-emerald-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Income"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block",children:"Category"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:c(a.type).map(r=>e.jsx("button",{type:"button",onClick:()=>g({...a,category:r}),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all text-left truncate ${a.category===r?"bg-slate-800 border-brand-500 text-white":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-700"}`,children:r},r))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",type:"number",placeholder:"Amount",value:a.amount||"",onChange:r=>g({...a,amount:Number(r.target.value)})}),e.jsx("select",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",value:a.currency,onChange:r=>g({...a,currency:r.target.value}),children:Object.values(J).map(r=>e.jsx("option",{value:r,children:r},r))})]}),a.currency!==l&&e.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3",children:[e.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["Expected Exchange Rate (1 ",a.currency," = ?"," ",l,")"]}),e.jsx("input",{type:"number",step:"0.0001",placeholder:`Current: ${f[a.currency||"USD"]||1}`,value:a.exchangeRate||"",onChange:r=>g({...a,exchangeRate:Number(r.target.value)}),className:"w-full bg-transparent text-white focus:outline-none"}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:"Leave blank to use dynamic rate at time of approval."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",value:a.frequency,onChange:r=>g({...a,frequency:r.target.value}),children:Object.values(Y).map(r=>e.jsx("option",{value:r,children:r},r))}),e.jsxs("div",{className:"flex-1 relative group/date",children:[e.jsx("input",{type:"date",className:"w-full bg-slate-950 border border-slate-800 rounded-xl pl-4 pr-10 py-3 text-white text-sm focus:outline-none focus:ring-1 focus:ring-brand-500 transition-all cursor-pointer hover:border-slate-700 hover:bg-slate-900/50",value:a.nextDueDate?a.nextDueDate.split("T")[0]:"",onChange:r=>g({...a,nextDueDate:new Date(r.target.value).toISOString()})}),e.jsx(Pe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-400 group-hover/date:text-brand-300 transition-colors pointer-events-none z-10"})]})]}),e.jsx("button",{onClick:x,className:"w-full bg-brand-600 text-white py-3 rounded-xl font-bold mt-6",children:"Save Recurring Item"}),e.jsx("button",{onClick:()=>d(!1),className:"w-full text-slate-500 py-2 hover:text-red-400 transition-colors",children:"Cancel"})]})]})})]})},Rt=({data:t,onUpdate:m,baseCurrency:l,convertAmount:f,exchangeRates:o})=>{const[d,a]=u.useState(!1),[g,h]=u.useState(!1),[n,x]=u.useState(null),[c,i]=u.useState(""),[r,S]=u.useState(""),[R,j]=u.useState(""),[s,N]=u.useState(null),[y,L]=u.useState({currency:l,color:"#60a5fa"}),A=p=>{x(p),i(""),S(""),j(""),N(null),h(!0)},k=()=>{if(!n||!c)return;const p=parseFloat(c);if(isNaN(p)||p<=0){N("Please enter a valid positive amount.");return}const U=n.targetAmount-n.currentAmount;if(p>U){N(`You cannot add more than the remaining amount (${z(U)} ${n.currency}).`);return}const B=R?parseFloat(R):n.currency===l?1:o[n.currency]||1,$={id:crypto.randomUUID(),amount:p,currency:n.currency,type:E.EXPENSE,category:D.SAVINGS,date:new Date().toISOString(),description:r.trim()?`Goal: ${r}`:`Goal: Contribution to ${n.name}`,recordedBaseCurrency:l,exchangeRate:B,goalId:n.id},O=t.goals.map(M=>M.id===n.id?{...M,currentAmount:M.currentAmount+p}:M);m({...t,transactions:[$,...t.transactions],goals:O}),h(!1)},T=()=>{if(!y.name||!y.targetAmount)return;const p={id:crypto.randomUUID(),name:y.name,targetAmount:Number(y.targetAmount),currentAmount:0,currency:y.currency||l,color:y.color||"#60a5fa"};m({...t,goals:[...t.goals||[],p]}),a(!1),L({currency:l,color:"#60a5fa"})};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Savings Goals"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Visualize your targets."})]}),e.jsxs("button",{onClick:()=>a(!0),className:"bg-white hover:bg-slate-200 text-black px-5 py-2.5 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(re,{className:"w-4 h-4"})," New Goal"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(t.goals||[]).length===0?e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center p-12 text-center bg-slate-900 border border-slate-800 rounded-3xl border-dashed",children:[e.jsx("div",{className:"p-4 bg-slate-800 rounded-full mb-4",children:e.jsx(ye,{className:"w-8 h-8 text-slate-500"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"No Goals Yet"}),e.jsx("p",{className:"text-slate-400 text-sm max-w-xs mb-6",children:"Create a savings goal to track your progress for things like a vacation, new car, or emergency fund."}),e.jsx("button",{onClick:()=>a(!0),className:"bg-brand-600 hover:bg-brand-500 text-white px-6 py-2.5 rounded-xl text-sm font-bold transition-all hover:scale-105 active:scale-95 shadow-lg shadow-brand-500/20",children:"Create your first goal"})]}):(t.goals||[]).map(p=>{const U=Math.min(100,p.currentAmount/p.targetAmount*100);return e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-sm relative overflow-hidden transition-all duration-300 hover:border-slate-700 hover:shadow-2xl hover:-translate-y-1 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsx("h3",{className:"font-bold text-lg text-white group-hover:text-brand-300 transition-colors",children:p.name}),e.jsx("button",{onClick:()=>{const $=p.currentAmount>=p.targetAmount?t.transactions:t.transactions.filter(O=>O.goalId!==p.id);m({...t,goals:t.goals.filter(O=>O.id!==p.id),transactions:$})},className:"text-slate-600 hover:text-red-400 transition-colors bg-slate-950/50 p-2 rounded-lg hover:bg-red-500/10",children:e.jsx(ae,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mb-4 relative z-10",children:e.jsxs("p",{className:"text-3xl font-bold text-white",children:[z(p.currentAmount)," ",e.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["/ ",z(p.targetAmount)," ",p.currency]})]})}),e.jsx("div",{className:"w-full bg-slate-800 h-3 rounded-full overflow-hidden relative z-10 mb-6",children:e.jsx("div",{className:"h-full transition-all duration-1000 ease-out relative overflow-hidden",style:{width:`${U}%`,backgroundColor:p.color},children:e.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]"})})}),e.jsx("button",{onClick:()=>A(p),className:"w-full bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-xl font-medium transition-colors relative z-10 border border-slate-700",children:"+ Add Funds"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 rounded-full opacity-25 blur-2xl pointer-events-none",style:{backgroundColor:p.color}})]},p.id)})}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"New Goal"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",placeholder:"Goal Name (e.g. Japan Trip)",value:y.name||"",onChange:p=>L({...y,name:p.target.value})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",type:"number",placeholder:"Target Amount",value:y.targetAmount||"",onChange:p=>L({...y,targetAmount:Number(p.target.value)})}),e.jsx("select",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",value:y.currency,onChange:p=>L({...y,currency:p.target.value}),children:Object.values(J).map(p=>e.jsx("option",{value:p,children:p},p))})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Color:"}),e.jsx("input",{type:"color",className:"bg-transparent h-10 w-10 cursor-pointer",value:y.color,onChange:p=>L({...y,color:p.target.value})})]}),e.jsx("button",{onClick:T,className:"w-full bg-brand-600 text-white py-3 rounded-xl font-bold mt-6",children:"Create Goal"}),e.jsx("button",{onClick:()=>a(!1),className:"w-full text-slate-500 py-2 hover:text-red-400 transition-colors",children:"Cancel"})]})]})}),g&&n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Add Funds"}),e.jsxs("p",{className:"text-slate-400 text-sm mb-4",children:["Adding to ",e.jsx("strong",{children:n.name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white pl-12",type:"number",placeholder:"0.00",value:c,onChange:p=>i(p.target.value),autoFocus:!0}),e.jsx("span",{className:"absolute left-3 top-3 text-slate-500 font-medium",children:n.currency})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white text-sm",type:"text",placeholder:"Note (Optional)",value:r,onChange:p=>S(p.target.value)})}),n.currency!==l&&e.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3",children:[e.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["Exchange Rate (1 ",n.currency," = ? ",l,")"]}),e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx("input",{type:"number",step:"any",value:R,onChange:p=>j(p.target.value),placeholder:`${o[n.currency]||"1.0"}`,className:"flex-1 bg-transparent text-white focus:outline-none font-mono text-sm"})}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:R?`Using custom rate: 1 ${n.currency} = ${R} ${l}`:`Using market rate: 1 ${n.currency} = ${o[n.currency]||1} ${l}`})]}),s&&e.jsx("p",{className:"text-red-400 text-xs bg-red-900/20 p-2 rounded-lg border border-red-900/30",children:s}),e.jsx("button",{onClick:k,className:"w-full bg-brand-600 text-white py-3 rounded-xl font-bold mt-6",children:"Confirm Deposit"}),e.jsx("button",{onClick:()=>h(!1),className:"w-full text-slate-500 py-2 hover:text-red-400 transition-colors",children:"Cancel"})]})]})})]})},Dt=({data:t,onUpdateData:m,onVaultDeleted:l,exchangeRates:f})=>{const[o,d]=u.useState(""),[a,g]=u.useState(E.EXPENSE),[h,n]=u.useState(null),[x,c]=u.useState(!1),[i,r]=u.useState("csv"),S=()=>{if(!o.trim())return;const s=Object.values(D),N=(t.customCategories||[]).map(L=>L.name);if(s.includes(o)||N.includes(o)){alert("Category already exists");return}const y={name:o.trim(),type:a};m({...t,customCategories:[...t.customCategories||[],y]}),d("")},R=s=>{m({...t,customCategories:(t.customCategories||[]).filter(N=>N.name!==s)})},j=()=>{if(n(null),!(t.transactions.length>0||(t.goals||[]).length>0||(t.recurring||[]).length>0)){n({type:"error",text:"Export Failed: Vault is empty. Add some data first."});return}const N=localStorage.getItem(K),y=localStorage.getItem(W);if(!N||!y){n({type:"error",text:"Export Failed: No secure data found to export."});return}const L={salt:N,data:y,version:"1.0",timestamp:new Date().toISOString()},A=JSON.stringify(L),k=new Blob([A],{type:"application/json"}),T=URL.createObjectURL(k),p=document.createElement("a");p.href=T;const U=t.vaultName?t.vaultName.replace(/[^a-z0-9]/gi,"_").toLowerCase():"vault",B=new Date,$=B.toISOString().split("T")[0],O=B.toTimeString().split(" ")[0].replace(/:/g,"");p.download=`${U}_backup_${$}_${O}.vf`,document.body.appendChild(p),p.click(),document.body.removeChild(p),n({type:"success",text:"Backup downloaded successfully."}),setTimeout(()=>n(null),3e3)};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Settings"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Configure your vault."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Vault Name"}),e.jsx("input",{type:"text",name:"username",maxLength:21,value:t.vaultName||"",onChange:s=>{const N=s.target.value;m({...t,vaultName:N}),N.trim()&&localStorage.setItem(se,N)},className:`w-full bg-slate-950 border rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50 ${t.vaultName?.trim()?"border-slate-800 focus:border-transparent":"border-red-500/50 focus:border-red-500"}`,placeholder:"Name your vault"}),!t.vaultName?.trim()&&e.jsx("p",{className:"text-xs text-red-400 mt-2",children:"Vault name is required."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Base Currency"}),e.jsx("select",{value:t.baseCurrency,onChange:s=>m({...t,baseCurrency:s.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50",children:Object.values(J).map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"All transactions will be converted to this currency for aggregation."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Auto Lock Timer"}),e.jsxs("select",{value:t.autoLockDuration,onChange:s=>m({...t,autoLockDuration:Number(s.target.value)}),className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50",children:[e.jsx("option",{value:6e4,children:"1 Minute"}),e.jsx("option",{value:3e5,children:"5 Minutes"}),e.jsx("option",{value:9e5,children:"15 Minutes"}),e.jsx("option",{value:18e5,children:"30 Minutes"}),e.jsx("option",{value:0,children:"Never"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Automatically lock vault after inactivity."})]})]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Custom Categories (Tags)"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl border border-slate-800",children:[e.jsx("button",{onClick:()=>g(E.EXPENSE),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all ${a===E.EXPENSE?"bg-rose-500/20 text-rose-400":"text-slate-500"}`,children:"Expense"}),e.jsx("button",{onClick:()=>g(E.INCOME),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all ${a===E.INCOME?"bg-emerald-500/20 text-emerald-400":"text-slate-500"}`,children:"Income"})]}),e.jsx("input",{value:o,onChange:s=>d(s.target.value),placeholder:"New Tag Name",className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl px-3 text-white text-sm"}),e.jsx("button",{onClick:S,className:"bg-brand-600 hover:bg-brand-500 text-white px-4 rounded-xl text-sm font-bold",children:"Add"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(t.customCategories||[]).filter(s=>s.type===a).map(s=>e.jsxs("span",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-slate-700 bg-slate-800 text-sm text-slate-300",children:[s.name,e.jsx("button",{onClick:()=>R(s.name),className:"text-slate-500 hover:text-red-400",children:e.jsx(ae,{className:"w-3 h-3"})})]},s.name)),Object.values(D).filter(s=>a===E.INCOME?X.includes(s):!X.includes(s)||s===D.OTHER).map(s=>e.jsx("span",{className:"px-3 py-1.5 rounded-lg border border-slate-800 bg-slate-950 text-sm text-slate-500 cursor-not-allowed",title:"Default Category",children:s},s))]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Data Management"}),h&&e.jsx("div",{className:`mb-4 px-4 py-3 rounded-xl border text-sm ${h.type==="error"?"bg-red-900/20 border-red-900/50 text-red-400":"bg-emerald-900/20 border-emerald-900/50 text-emerald-400"}`,children:h.text}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-slate-950 rounded-xl border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"Export Transactions"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Download history as CSV or Excel."})]}),e.jsxs("div",{className:"flex bg-slate-900 border border-slate-800 rounded-lg p-1 w-fit mb-2",children:[e.jsx("button",{onClick:()=>r("csv"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${i==="csv"?"bg-slate-700 text-white shadow-sm":"text-slate-500 hover:text-slate-300"}`,children:"CSV"}),e.jsx("button",{onClick:()=>r("excel"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${i==="excel"?"bg-emerald-600/20 text-emerald-400 shadow-sm":"text-slate-500 hover:text-slate-300"}`,children:"Excel"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[{label:"Last 15 Days",val:15},{label:"Last 1 Month",val:30},{label:"Last 3 Months",val:90},{label:"Last 6 Months",val:180},{label:"Last 1 Year",val:365},{label:"All Time",val:"all"}].map(s=>e.jsx("button",{onClick:()=>{n(null);const N=t.transactions||[];if(N.length===0){n({type:"error",text:"Export Failed: No transactions to export."});return}let y=N;if(s.val!=="all"){const M=Number(s.val),F=new Date;F.setDate(F.getDate()-M),F.setHours(0,0,0,0),y=N.filter(P=>new Date(P.date)>=F)}if(y.length===0){n({type:"error",text:"Export Failed: No transactions found in this range."});return}const L="\uFEFF",A=i==="excel"?"	":",",k=i==="excel"?"xls":"csv",T=["Date","Type","Category","Description","Amount","Currency"],p=y.map(M=>{const F=P=>`"${(P||"").replace(/"/g,'""')}"`;return[new Date(M.date).toLocaleDateString(),M.type,F(M.category),F(M.description||""),M.amount,M.currency].join(A)}),U=L+[T.join(A),...p].join(`
`),B=new Blob([U],{type:i==="excel"?"application/vnd.ms-excel;charset=utf-8":"text/csv;charset=utf-8"}),$=URL.createObjectURL(B),O=document.createElement("a");O.href=$,O.download=`transactions_${s.val==="all"?"all_time":s.val+"_days"}_${new Date().toISOString().split("T")[0]}.${k}`,document.body.appendChild(O),O.click(),document.body.removeChild(O),n({type:"success",text:`Successfully exported ${y.length} transactions (${i.toUpperCase()}).`}),setTimeout(()=>n(null),3e3)},className:"px-3 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-xs font-medium transition-colors border border-slate-700 hover:border-slate-600 hover:text-brand-300",children:s.label},s.label))})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950 rounded-xl border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"Export Data"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Download an encrypted backup file (.vf)."})]}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Download"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-900/10 rounded-xl border border-red-900/30",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-400 font-medium",children:"Delete Vault"}),e.jsx("p",{className:"text-sm text-red-400/60",children:"Permanently delete all data and reset."})]}),e.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg text-sm font-medium transition-colors",children:"Delete"})]})]})]})]}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Delete Vault?"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"This will permanently erase all your financial data and reset the application. This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>c(!1),className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white py-2.5 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{l(),c(!1)},className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-2.5 rounded-xl font-medium transition-colors",children:"Delete Forever"})]})]})})]})},Lt=({initialData:t,onClose:m,onSave:l,baseCurrency:f,exchangeRates:o,customCategories:d})=>{const[a,g]=u.useState(t?.amount?.toString()||""),[h,n]=u.useState(t?.currency||f),[x,c]=u.useState(t?.type||E.EXPENSE),[i,r]=u.useState(t?.category||D.FOOD),[S,R]=u.useState(t?.date?t.date.split("T")[0]:new Date().toISOString().split("T")[0]),[j,s]=u.useState(t?.description||""),[N,y]=u.useState(t?.exchangeRate?.toString()||""),L=u.useMemo(()=>{const k=Object.values(D).filter(p=>x===E.INCOME?X.includes(p):!X.includes(p)||p===D.OTHER),T=(d||[]).filter(p=>p.type===x).map(p=>p.name);return[...k,...T]},[x,d]);u.useEffect(()=>{L.includes(i)||r(L[0]||"")},[x,L]),u.useEffect(()=>{t?.currency!==h&&y("")},[h,t]);const A=k=>{if(k.preventDefault(),!a)return;const T=N?parseFloat(N):h===f?1:o[h]||1,p={...t||{},id:t?.id||crypto.randomUUID(),amount:parseFloat(a),currency:h,type:x,category:i,date:new Date(S).toISOString(),description:j,recordedBaseCurrency:t?.recordedBaseCurrency||f,exchangeRate:T,editHistory:t?[...t.editHistory||[],new Date().toISOString()]:t?.editHistory};l(p)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl scale-100 animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:t?"Edit Transaction":"New Transaction"}),e.jsx("button",{onClick:m,className:"text-slate-500 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.01",value:a,onChange:k=>g(k.target.value),placeholder:"0.00",className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-4 py-3 text-2xl font-bold text-white placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-brand-500/50",autoFocus:!0}),e.jsx("div",{className:"absolute right-2 top-2 bottom-2",children:e.jsx("select",{value:h,onChange:k=>n(k.target.value),className:"h-full bg-slate-900 border border-slate-800 rounded-xl px-3 text-white text-sm font-medium focus:outline-none focus:ring-1 focus:ring-brand-500",children:Object.values(J).map(k=>e.jsx("option",{value:k,children:k},k))})})]})}),h!==f&&e.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3",children:[e.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["Exchange Rate (1 ",h," = ? ",f,")"]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"number",step:"any",value:N,onChange:k=>y(k.target.value),placeholder:`${o[h]||"1.0"}`,className:"flex-1 bg-transparent text-white focus:outline-none font-mono text-sm"}),e.jsx("button",{type:"button",onClick:()=>y(String(o[h]||1)),className:"text-[10px] text-brand-400 hover:text-brand-300 uppercase font-bold tracking-wider",children:"Auto"})]}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:N?`Using custom rate: 1 ${h} = ${N} ${f}`:`Using market rate: 1 ${h} = ${o[h]||1} ${f}`})]}),e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl border border-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>{c(E.EXPENSE)},className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${x===E.EXPENSE?"bg-rose-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Expense"}),e.jsx("button",{type:"button",onClick:()=>{c(E.INCOME)},className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${x===E.INCOME?"bg-emerald-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Income"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block",children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-36 overflow-y-auto pr-1 categories-container",children:L.map(k=>e.jsx("button",{type:"button",onClick:()=>r(k),className:`px-3 py-1.5 rounded-lg text-xs font-medium border transition-all ${i===k?"bg-brand-600 border-brand-500 text-white shadow-lg shadow-brand-600/20":"bg-slate-950/50 border-slate-800 text-slate-400 hover:border-slate-700 hover:text-slate-200"}`,children:k},k))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block text-center",children:"Date"}),e.jsxs("div",{className:"relative group/date",children:[e.jsx("input",{type:"date",value:S,onChange:k=>R(k.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl pl-4 pr-10 py-2.5 text-white text-sm focus:outline-none focus:ring-1 focus:ring-brand-500 transition-all cursor-pointer hover:border-slate-700 hover:bg-slate-900/50"}),e.jsx(Pe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-400 group-hover/date:text-brand-300 transition-colors pointer-events-none z-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block text-center",children:"Note"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:j,onChange:k=>s(k.target.value),placeholder:"What is this for?",className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-white text-sm focus:outline-none focus:ring-1 focus:ring-brand-500 hover:border-slate-700 transition-all"})})]})]}),e.jsx("button",{type:"submit",disabled:!a,className:"w-full bg-white hover:bg-slate-200 text-black font-bold py-3.5 rounded-xl transition-all shadow-lg mt-6 disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Save Changes":"Create Transaction"})]})]})})},Ue=document.getElementById("root");if(!Ue)throw new Error("Could not find root element to mount to");const At=it.createRoot(Ue);At.render(e.jsx($e.StrictMode,{children:e.jsx(Nt,{})}));
