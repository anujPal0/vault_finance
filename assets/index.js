import{r as Me,a as Fe,g as _e}from"./vendor-react.js";import{r as b,R as De,a as de,B as Pe,C as $e,X as Ve,Y as Be,T as xe,b as ge,P as ve,c as je,d as we}from"./vendor-recharts.js";import"./vendor-utils.js";(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))p(x);new MutationObserver(x=>{for(const c of x)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&p(a)}).observe(document,{childList:!0,subtree:!0});function n(x){const c={};return x.integrity&&(c.integrity=x.integrity),x.referrerPolicy&&(c.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?c.credentials="include":x.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function p(x){if(x.ep)return;x.ep=!0;const c=n(x);fetch(x.href,c)}})();var ue={exports:{}},q={};var ye;function Ue(){if(ye)return q;ye=1;var t=Me(),h=Symbol.for("react.element"),n=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,x=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function a(u,r,d){var y,f={},o=null,s=null;d!==void 0&&(o=""+d),r.key!==void 0&&(o=""+r.key),r.ref!==void 0&&(s=r.ref);for(y in r)p.call(r,y)&&!c.hasOwnProperty(y)&&(f[y]=r[y]);if(u&&u.defaultProps)for(y in r=u.defaultProps,r)f[y]===void 0&&(f[y]=r[y]);return{$$typeof:h,type:u,key:o,ref:s,props:f,_owner:x.current}}return q.Fragment=n,q.jsx=a,q.jsxs=a,q}var Ne;function ze(){return Ne||(Ne=1,ue.exports=Ue()),ue.exports}var e=ze(),te={},Se;function Ye(){if(Se)return te;Se=1;var t=Fe();return te.createRoot=t.createRoot,te.hydrateRoot=t.hydrateRoot,te}var Ge=Ye();const He=_e(Ge);var K=(t=>(t.USD="USD",t.EUR="EUR",t.GBP="GBP",t.JPY="JPY",t.CAD="CAD",t.AUD="AUD",t.INR="INR",t.CNY="CNY",t))(K||{}),k=(t=>(t.INCOME="income",t.EXPENSE="expense",t))(k||{}),I=(t=>(t.FOOD="Food",t.TRANSPORT="Transport",t.HOUSING="Housing",t.UTILITIES="Utilities",t.ENTERTAINMENT="Entertainment",t.HEALTH="Health",t.INCOME="Salary",t.SHOPPING="Shopping",t.SAVINGS="Savings",t.RENTAL="Rental",t.FREELANCE="Freelance",t.BONUS="Bonus",t.INVESTMENTS="Investments",t.REFUNDS="Refunds",t.GIFT="Gift",t.OTHER="Other",t))(I||{}),B=(t=>(t.WEEKLY="Weekly",t.MONTHLY="Monthly",t.YEARLY="Yearly",t))(B||{});const Ke=1e5,We=16,me=12;class qe{constructor(){this.key=null}async deriveKey(h,n){const p=new TextEncoder,x=await window.crypto.subtle.importKey("raw",p.encode(h),{name:"PBKDF2"},!1,["deriveKey"]),c=n||window.crypto.getRandomValues(new Uint8Array(We)),a=await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:c,iterations:Ke,hash:"SHA-256"},x,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);return this.key=a,{key:a,salt:c}}hasKey(){return this.key!==null}clearKey(){this.key=null}async encrypt(h){if(!this.key)throw new Error("Key not initialized");const n=new TextEncoder,p=window.crypto.getRandomValues(new Uint8Array(me)),x=n.encode(h),c=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:p},this.key,x),a=new Uint8Array(p.byteLength+c.byteLength);return a.set(p,0),a.set(new Uint8Array(c),p.byteLength),this.arrayBufferToBase64(a)}async decrypt(h){if(!this.key)throw new Error("Key not initialized");const n=this.base64ToArrayBuffer(h),p=n.slice(0,me),x=n.slice(me),c=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:p},this.key,x);return new TextDecoder().decode(c)}arrayBufferToBase64(h){let n="";const p=h.byteLength;for(let x=0;x<p;x++)n+=String.fromCharCode(h[x]);return window.btoa(n)}base64ToArrayBuffer(h){const n=window.atob(h),p=n.length,x=new Uint8Array(p);for(let c=0;c<p;c++)x[c]=n.charCodeAt(c);return x}}const z=new qe,ke="vf_rates_cache",Xe=1e3*60*60*24,Je=async t=>{const h=localStorage.getItem(ke);if(h)try{const n=JSON.parse(h),p=Date.now()-n.timestamp<Xe,x=n.base===t;if(p&&x)return n.rates}catch{}try{const n=await fetch(`https://open.er-api.com/v6/latest/${t}`);if(!n.ok)throw new Error("Failed to fetch rates");const x=(await n.json()).rates,c={timestamp:Date.now(),base:t,rates:x};return localStorage.setItem(ke,JSON.stringify(c)),x}catch{return h?JSON.parse(h).rates:{[t]:1}}},re=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),Z=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5v14"})]}),ee=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),le=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),e.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),ne=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),e.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),e.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),Qe=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Ee=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),pe=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"m17 2 4 4-4 4"}),e.jsx("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),e.jsx("path",{d:"m7 22-4-4 4-4"}),e.jsx("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]}),be=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"6"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),Ze=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.3-4.3"})]}),Ie=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),e.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),e.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),Y="vf_encrypted_vault",G="vf_salt",Q="vf_vault_name",fe=300*1e3,se=["#f87171","#fbbf24","#f472b6","#a78bfa","#f97316","#e11d48","#c084fc"],ae=["#34d399","#60a5fa","#2dd4bf","#818cf8","#4ade80","#22d3ee","#6366f1"],H=[I.INCOME,I.SAVINGS,I.RENTAL,I.FREELANCE,I.BONUS,I.INVESTMENTS,I.REFUNDS,I.GIFT,I.OTHER],X={transactions:[],recurring:[],goals:[],baseCurrency:K.USD,theme:"dark",autoLockDuration:fe,customCategories:[]},he=(t,h)=>new Intl.NumberFormat(void 0,{style:"currency",currency:h,notation:"compact",maximumFractionDigits:2}).format(t),P=t=>new Intl.NumberFormat(void 0,{notation:"compact",maximumFractionDigits:2}).format(t);function et(){const[t,h]=b.useState(!!localStorage.getItem(G)),[n,p]=b.useState(!1),[x,c]=b.useState(""),[a,u]=b.useState(!1),[r,d]=b.useState(null),[y,f]=b.useState(localStorage.getItem(Q)||""),[o,s]=b.useState(X),[j,C]=b.useState({}),[i,l]=b.useState("dashboard"),[S,m]=b.useState(!1),[R,N]=b.useState(!1),L=b.useRef(Date.now());b.useEffect(()=>{if(!n)return;const v=o.autoLockDuration!==void 0?o.autoLockDuration:fe;if(v===0)return;const w=()=>{Date.now()-L.current>v&&U()},g=()=>{L.current=Date.now()},D=setInterval(w,1e4);return window.addEventListener("mousemove",g),window.addEventListener("keydown",g),window.addEventListener("click",g),()=>{clearInterval(D),window.removeEventListener("mousemove",g),window.removeEventListener("keydown",g),window.removeEventListener("click",g)}},[n,o.autoLockDuration]);const A=async(v,w,g)=>{if(v.preventDefault(),d(null),g.length<4){d("Password is too short (min 4 chars).");return}if(w.length>21){d("Vault Name must be 21 characters or less.");return}u(!0);try{const{salt:D}=await z.deriveKey(g),T=btoa(String.fromCharCode(...D));localStorage.setItem(G,T),w&&(localStorage.setItem(Q,w),f(w));const E={...X,vaultName:w},V=JSON.stringify(E),ie=await z.encrypt(V);localStorage.setItem(Y,ie),s(E),h(!0),p(!0),c("")}catch{d("Failed to create vault.")}finally{u(!1)}},_=v=>{new Date().setHours(0,0,0,0),(v.recurring||[]).forEach(D=>{if(!D.active)return;new Date(D.nextDueDate).setHours(0,0,0,0)})},W=async v=>{v.preventDefault(),u(!0),d(null);try{const w=localStorage.getItem(G),g=localStorage.getItem(Y);if(!w){h(!1);return}const D=new Uint8Array(atob(w).split("").map(T=>T.charCodeAt(0)));if(await z.deriveKey(x,D),g)try{const T=await z.decrypt(g),E=JSON.parse(T);let V=!1;const ie=E.transactions.map(ce=>ce.recordedBaseCurrency?ce:(V=!0,{...ce,recordedBaseCurrency:E.baseCurrency}));E.recurring||(E.recurring=[],V=!0),E.goals||(E.goals=[],V=!0),E.autoLockDuration===void 0&&(E.autoLockDuration=fe,V=!0),E.customCategories||(E.customCategories=[],V=!0),V&&(E.transactions=ie,$(E)),E.vaultName&&E.vaultName!==y&&(localStorage.setItem(Q,E.vaultName),f(E.vaultName)),s(E),p(!0),_(E)}catch{d("Incorrect password.")}else s(X),p(!0)}catch{d("An error occurred during authentication.")}finally{u(!1),c("")}},U=()=>{z.clearKey(),p(!1),c(""),s(X),l("dashboard")},oe=()=>{localStorage.clear(),z.clearKey(),s(X),p(!1),h(!1),c(""),f(""),l("dashboard")},$=async v=>{try{const w=JSON.stringify(v),g=await z.encrypt(w);localStorage.setItem(Y,g)}catch{alert("Failed to save data securely!")}},O=v=>{s(v),$(v)};b.useEffect(()=>{n&&(async()=>{const w=await Je(o.baseCurrency);C(w)})()},[n,o.baseCurrency]);const F=b.useCallback((v,w,g)=>{if(w===g||!j[w]&&!j[g])return v;if(g===o.baseCurrency){const E=j[w];return E?v/E:v}if(w===o.baseCurrency){const E=j[g];return E?v*E:v}const D=j[w],T=j[g];return!D||!T?v:v/D*T},[j,o.baseCurrency]),M=b.useCallback(v=>{if(v.exchangeRate&&v.recordedBaseCurrency){const w=v.amount/v.exchangeRate;return F(w,v.recordedBaseCurrency,o.baseCurrency)}return F(v.amount,v.currency,o.baseCurrency)},[o.baseCurrency,F]),Re=b.useMemo(()=>o.transactions.reduce((v,w)=>{const g=M(w);return v+(w.type===k.INCOME?g:-g)},0),[o.transactions,M]),Le=b.useMemo(()=>{const v=o.transactions.filter(g=>g.type===k.EXPENSE),w={};return v.forEach(g=>{const D=M(g);w[g.category]=(w[g.category]||0)+D}),Object.entries(w).map(([g,D])=>({name:g,value:D}))},[o.transactions,M]),Te=b.useMemo(()=>{const v=o.transactions.filter(g=>g.type===k.INCOME),w={};return v.forEach(g=>{const D=M(g);w[g.category]=(w[g.category]||0)+D}),Object.entries(w).map(([g,D])=>({name:g,value:D}))},[o.transactions,M]),Oe=b.useMemo(()=>{const v={},w=new Date;for(let g=5;g>=0;g--){const T=new Date(w.getFullYear(),w.getMonth()-g,1).toLocaleString("default",{month:"short"});v[T]={income:0,expense:0}}return o.transactions.forEach(g=>{const D=new Date(g.date);if(w.getTime()-D.getTime()<4320*60*60*1e3){const T=D.toLocaleString("default",{month:"short"});if(v[T]){const E=M(g);g.type===k.INCOME?v[T].income+=E:v[T].expense+=E}}}),Object.entries(v).map(([g,D])=>({name:g,Income:D.income,Expense:D.expense}))},[o.transactions,M]);return t?n?e.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col md:flex-row text-slate-200 font-sans",children:[e.jsxs("aside",{className:"hidden md:flex flex-col w-64 border-r border-slate-800 bg-slate-950 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-xl shadow-lg shadow-brand-500/20",children:e.jsx(re,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:"font-bold text-lg tracking-tight text-white flex flex-col leading-tight min-w-0",children:[e.jsx("span",{children:"Vault Finance"}),e.jsx("span",{className:"text-xs text-brand-400 font-mono font-medium tracking-wider cursor-default",children:"v1.0.0"})]})]}),e.jsxs("nav",{className:"flex-1 space-y-2",children:[e.jsx(J,{active:i==="dashboard",onClick:()=>l("dashboard"),icon:e.jsx(le,{}),label:"Dashboard"}),e.jsx(J,{active:i==="transactions",onClick:()=>l("transactions"),icon:e.jsx(ne,{}),label:"Transactions"}),e.jsx(J,{active:i==="recurring",onClick:()=>l("recurring"),icon:e.jsx(pe,{}),label:"Recurring"}),e.jsx(J,{active:i==="goals",onClick:()=>l("goals"),icon:e.jsx(be,{}),label:"Goals"}),e.jsx(J,{active:i==="settings",onClick:()=>l("settings"),icon:e.jsx(Qe,{}),label:"Settings"})]}),e.jsxs("button",{onClick:U,className:"flex items-center gap-3 text-slate-500 hover:text-white transition-colors mt-auto pt-6 border-t border-slate-800 text-sm font-medium px-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{children:"Lock Vault"})]})]}),e.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-slate-800 bg-slate-950/80 backdrop-blur-md sticky top-0 z-20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-lg",children:e.jsx(re,{className:"w-5 h-5 text-white"})}),e.jsxs("span",{className:"font-bold text-lg text-white flex flex-col leading-tight min-w-0",children:[e.jsx("span",{children:"Vault Finance"}),e.jsx("span",{className:"text-xs text-brand-400 font-mono font-medium tracking-wider cursor-default",children:"v1.0.0"})]})]}),e.jsx("button",{onClick:U,className:"text-slate-500 hover:text-white",children:e.jsx(Ee,{className:"w-5 h-5"})})]}),e.jsx("main",{className:"flex-1 overflow-y-auto h-screen relative scrollbar-hide bg-slate-950",children:e.jsxs("div",{className:"p-6 max-w-6xl mx-auto pb-24 md:pb-6 relative z-10",children:[i==="dashboard"&&e.jsx(at,{balance:Re,baseCurrency:o.baseCurrency,expensesByCategory:Le,incomeByCategory:Te,monthlyData:Oe,recentTransactions:o.transactions.slice(0,5),onAddTransaction:()=>m(!0),onViewAll:()=>l("transactions")}),i==="transactions"&&e.jsx(rt,{transactions:o.transactions,baseCurrency:o.baseCurrency,onDelete:v=>O({...o,transactions:o.transactions.filter(w=>w.id!==v)}),onAdd:()=>m(!0),getTransactionValue:M,customCategories:o.customCategories}),i==="recurring"&&e.jsx(lt,{data:o,onUpdate:O,baseCurrency:o.baseCurrency,exchangeRates:j}),i==="goals"&&e.jsx(nt,{data:o,onUpdate:O,baseCurrency:o.baseCurrency,convertAmount:F}),i==="settings"&&e.jsx(ot,{data:o,onUpdateData:O,onVaultDeleted:()=>{h(!1),p(!1),localStorage.clear()},exchangeRates:j})]})}),e.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-slate-950 border-t border-slate-800 flex justify-around p-4 z-20 pb-8",children:[e.jsx("button",{onClick:()=>l("dashboard"),className:`${i==="dashboard"?"text-white":"text-slate-500"}`,children:e.jsx(le,{})}),e.jsx("button",{onClick:()=>l("transactions"),className:`${i==="transactions"?"text-white":"text-slate-500"}`,children:e.jsx(ne,{})}),e.jsx("button",{onClick:()=>m(!0),className:"bg-brand-600 text-white p-3 rounded-full -mt-10 border-4 border-slate-950 shadow-lg shadow-brand-900/40",children:e.jsx(Z,{})}),e.jsx("button",{onClick:()=>l("recurring"),className:`${i==="recurring"?"text-white":"text-slate-500"}`,children:e.jsx(pe,{})}),e.jsx("button",{onClick:()=>l("goals"),className:`${i==="goals"?"text-white":"text-slate-500"}`,children:e.jsx(be,{})})]}),S&&e.jsx(it,{onClose:()=>m(!1),onSave:v=>{O({...o,transactions:[v,...o.transactions]}),m(!1)},baseCurrency:o.baseCurrency,exchangeRates:j,customCategories:o.customCategories})]}):e.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 inset-0 bg-gradient-to-b from-slate-900 to-slate-950"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-brand-900/10 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"w-full max-w-md bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl relative z-10 animate-in fade-in zoom-in-95 duration-500",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-brand-600 rounded-2xl shadow-lg shadow-brand-500/20",children:e.jsx(re,{className:"w-10 h-10 text-white"})})}),e.jsx("div",{className:"flex justify-center mb-2",children:y?e.jsx("h1",{className:"text-2xl font-bold text-center text-white truncate max-w-[300px]",children:y}):e.jsx("h1",{className:"text-2xl font-bold text-center text-white",children:"Vault Locked"})}),e.jsx("p",{className:"text-slate-400 text-center mb-8 text-sm",children:y?"Enter your master password to access your vault.":"Enter your master password to decrypt."}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"password",value:x,onChange:v=>c(v.target.value),placeholder:"Master Password",className:"w-full bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-transparent transition-all placeholder:text-slate-600",autoFocus:!0})}),r&&e.jsx("p",{className:"text-red-400 text-sm text-center bg-red-900/20 py-2 rounded-lg border border-red-900/50",children:r}),e.jsx("button",{type:"submit",disabled:!x||a,className:"w-full bg-brand-600 hover:bg-brand-500 text-white font-semibold py-3 rounded-xl transition-all shadow-lg shadow-brand-600/20 disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center",children:a?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Unlock Vault"})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("button",{onClick:()=>N(!0),className:"text-xs text-slate-500 hover:text-red-400 transition-colors",children:"Reset Vault (Delete Data)"})}),R&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-8 w-full max-w-sm shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-red-500/10 rounded-2xl",children:e.jsx(ee,{className:"w-8 h-8 text-red-500"})})}),e.jsx("h3",{className:"text-xl font-bold text-white text-center mb-2",children:"Reset Entire Vault?"}),e.jsxs("p",{className:"text-slate-400 text-sm text-center mb-8",children:["This will perform a hard reset. All your data will be"," ",e.jsx("strong",{children:"permanently deleted"}),". This action cannot be undone."]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:()=>{oe(),N(!1)},className:"w-full bg-red-600 hover:bg-red-500 text-white py-3.5 rounded-xl font-bold transition-all shadow-lg shadow-red-600/20",children:"Yes, Delete Everything"}),e.jsx("button",{onClick:()=>N(!1),className:"w-full bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-xl font-medium transition-colors",children:"Cancel"})]})]})})]})]}):e.jsx(tt,{password:x,setPassword:c,onCreate:A,isLoading:a,error:r,onImportSuccess:()=>{h(!0),f(localStorage.getItem(Q)||"")}})}const tt=({password:t,setPassword:h,onCreate:n,isLoading:p,error:x,onImportSuccess:c})=>{const[a,u]=b.useState("create"),[r,d]=b.useState(null),y=f=>{const o=f.target.files?.[0];if(d(null),!o)return;if(o.size===0){d("Import Failed: The selected file is empty."),f.target.value="";return}const s=new FileReader;s.onload=j=>{try{const C=(j.target?.result||"").trim();if(!C){d("Import Failed: File content is empty.");return}let i=!1;try{const l=JSON.parse(C);if(l.transactions&&Array.isArray(l.transactions)&&!l.salt){d("Security Error: Importing unencrypted raw JSON data is not allowed."),f.target.value="";return}l.salt&&l.data&&(localStorage.setItem(G,l.salt),localStorage.setItem(Y,l.data),i=!0)}catch{}if(!i&&!r&&C.includes("|")){const l=C.split("|");if(l.length>=2){const[S,m]=l;S&&m&&(localStorage.setItem(G,S),localStorage.setItem(Y,m),localStorage.setItem(G,S),localStorage.setItem(Y,m),i=!0)}}i?c():r||d("Invalid backup file format. Expected an encrypted .vf file.")}catch{d("Import Failed: An unexpected error occurred.")}f.target.value=""},s.readAsText(o)};return e.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 inset-0 bg-gradient-to-b from-slate-900 to-slate-950"}),e.jsxs("div",{className:"w-full max-w-lg bg-slate-900 border border-slate-800 rounded-3xl p-8 shadow-2xl relative z-10 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-2xl shadow-xl shadow-brand-500/20",children:e.jsx(re,{className:"w-12 h-12 text-white"})})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome to Vault Finance"}),e.jsx("p",{className:"text-slate-400",children:"Secure, offline, personal finance tracking."})]}),e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl mb-8 border border-slate-800",children:[e.jsx("button",{onClick:()=>{u("create"),d(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all ${a==="create"?"bg-brand-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Create New Vault"}),e.jsx("button",{onClick:()=>{u("import"),d(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all ${a==="import"?"bg-brand-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Import Backup"})]}),a==="create"?e.jsx(st,{onCreate:n,isLoading:p,error:x}):e.jsxs("div",{className:"animate-in fade-in duration-300 text-center py-8 bg-slate-950/50 rounded-2xl border border-slate-800 border-dashed",children:[e.jsx(ne,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-medium mb-1",children:"Upload Backup File"}),e.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Restore a .vf encrypted backup file."}),r&&e.jsx("div",{className:"mb-6 mx-4 p-3 bg-red-900/20 border border-red-900/50 rounded-xl text-sm text-red-400",children:r}),e.jsxs("label",{className:"bg-white hover:bg-slate-200 text-black px-6 py-3 rounded-xl font-bold cursor-pointer transition-all inline-block",children:["Select File",e.jsx("input",{type:"file",onChange:y,className:"hidden",accept:".json,.vf"})]})]})]})]})},st=({onCreate:t,isLoading:h,error:n})=>{const[p,x]=b.useState(""),[c,a]=b.useState(""),u=r=>{t(r,p,c)};return e.jsxs("form",{onSubmit:u,className:"space-y-4 animate-in fade-in duration-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wider",children:"Vault Name"}),e.jsx("input",{type:"text",name:"username",value:p,maxLength:21,onChange:r=>x(r.target.value),className:"w-full bg-slate-900 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50",placeholder:"e.g. My Vault",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wider",children:"Set Master Password"}),e.jsx("input",{type:"password",value:c,onChange:r=>a(r.target.value),placeholder:"Create a strong password",className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-transparent transition-all placeholder:text-slate-600"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Your data will be encrypted with this password."})]}),n&&e.jsx("p",{className:"text-red-400 text-sm text-center bg-red-900/20 py-2 rounded-lg border border-red-900/50",children:n}),e.jsx("button",{type:"submit",disabled:!c||!p.trim()||h,className:"w-full bg-white hover:bg-slate-200 text-black font-bold py-3.5 rounded-xl transition-all shadow-lg mt-2 disabled:opacity-50",children:h?"Creating...":"Create Vault"})]})},J=({active:t,onClick:h,icon:n,label:p})=>e.jsxs("button",{onClick:h,className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 border text-sm font-medium ${t?"bg-slate-900 border-slate-800 text-white shadow-sm":"bg-transparent border-transparent text-slate-500 hover:text-slate-300 hover:bg-slate-900/50"}`,children:[De.cloneElement(n,{className:`w-5 h-5 ${t?"text-brand-400":"text-current"}`}),e.jsx("span",{className:"",children:p})]}),at=({balance:t,baseCurrency:h,expensesByCategory:n,incomeByCategory:p,monthlyData:x,recentTransactions:c,onAddTransaction:a,onViewAll:u})=>e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-brand-600 to-indigo-700 rounded-3xl p-8 text-white border border-brand-500/20 relative overflow-hidden shadow-2xl shadow-brand-900/30 group transition-all duration-500 hover:scale-[1.01] hover:shadow-brand-900/50",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-32 group-hover:bg-white/15 transition-colors duration-500"}),e.jsx("p",{className:"text-brand-100 font-medium mb-2 relative z-10 text-sm uppercase tracking-wider flex items-center gap-2",children:"Total Balance"}),e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold relative z-10 tracking-tight text-white drop-shadow-sm break-words leading-tight",children:he(t,h)}),e.jsxs("button",{onClick:a,className:"mt-8 bg-white/10 hover:bg-white/20 backdrop-blur-md border border-white/20 py-2.5 px-5 rounded-xl text-sm font-semibold transition-all flex items-center gap-2 relative z-10 hover:scale-105 active:scale-95",children:[e.jsx(Z,{className:"w-4 h-4"})," Add Transaction"]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-sm transition-all duration-300 hover:border-slate-700 hover:shadow-xl hover:shadow-black/20 hover:-translate-y-1",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-6 text-slate-100 flex items-center gap-2",children:["Analytics"," ",e.jsx("span",{className:"text-xs font-normal text-slate-400 bg-slate-950 px-2 py-0.5 rounded-full border border-slate-800",children:"Last 6 Months"})]}),e.jsx("div",{style:{width:"100%",height:300},children:e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(Pe,{data:x,children:[e.jsx($e,{strokeDasharray:"3 3",stroke:"#27272a",vertical:!1}),e.jsx(Ve,{dataKey:"name",stroke:"#6b7280",tickLine:!1,axisLine:!1,fontSize:12,dy:10}),e.jsx(Be,{stroke:"#6b7280",tickLine:!1,axisLine:!1,fontSize:12,tickFormatter:r=>`${r/1e3}k`}),e.jsx(xe,{formatter:r=>P(r),contentStyle:{backgroundColor:"#1c1c1e",border:"1px solid #374151",borderRadius:"8px",color:"#fff"},cursor:{fill:"rgba(255,255,255,0.03)"}}),e.jsx(ge,{dataKey:"Income",fill:"#34d399",radius:[4,4,0,0],maxBarSize:40}),e.jsx(ge,{dataKey:"Expense",fill:"#f87171",radius:[4,4,0,0],maxBarSize:40})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-sm flex flex-col h-[420px] transition-all duration-300 hover:border-slate-700 hover:shadow-xl hover:shadow-black/20 hover:-translate-y-1",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Financial Composition"})}),e.jsxs("div",{className:"flex-1 w-full min-h-0 relative grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("p",{className:"text-xs font-bold text-rose-400 mb-2 uppercase tracking-wider",children:"Expense"}),e.jsx("div",{className:"flex-1 w-full relative min-h-[150px]",children:n.length>0?e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(ve,{children:[e.jsx(je,{data:n,cx:"50%",cy:"50%",innerRadius:60,outerRadius:85,paddingAngle:5,dataKey:"value",stroke:"none",children:n.map((r,d)=>e.jsx(we,{fill:se[d%se.length]},`cell-${d}`))}),e.jsx(xe,{formatter:r=>he(r,h),contentStyle:{backgroundColor:"#1c1c1e",border:"1px solid #374151",borderRadius:"8px",color:"#fff"},itemStyle:{color:"#fff"}})]})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-20",children:e.jsx(le,{className:"w-8 h-8"})})})]}),e.jsxs("div",{className:"flex flex-col items-center border-l border-slate-800 pl-2",children:[e.jsx("p",{className:"text-xs font-bold text-emerald-400 mb-2 uppercase tracking-wider",children:"Income"}),e.jsx("div",{className:"flex-1 w-full relative min-h-[150px]",children:p.length>0?e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(ve,{children:[e.jsx(je,{data:p,cx:"50%",cy:"50%",innerRadius:60,outerRadius:85,paddingAngle:5,dataKey:"value",stroke:"none",children:p.map((r,d)=>e.jsx(we,{fill:ae[d%ae.length]},`cell-${d}`))}),e.jsx(xe,{formatter:r=>he(r,h),contentStyle:{backgroundColor:"#1c1c1e",border:"1px solid #374151",borderRadius:"8px",color:"#fff"},itemStyle:{color:"#fff"}})]})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-20",children:e.jsx(le,{className:"w-8 h-8"})})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2 justify-center max-h-16 overflow-y-auto",children:[n.slice(0,4).map((r,d)=>e.jsxs("span",{className:"text-[10px] bg-slate-950 text-slate-400 px-2 py-1 rounded-full border border-slate-800 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:se[d%se.length]}}),r.name]},`exp-${d}`)),p.slice(0,4).map((r,d)=>e.jsxs("span",{className:"text-[10px] bg-slate-950 text-slate-400 px-2 py-1 rounded-full border border-slate-800 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:ae[d%ae.length]}}),r.name]},`inc-${d}`))]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 flex flex-col shadow-sm h-[420px] transition-all duration-300 hover:border-slate-700 hover:shadow-xl hover:shadow-black/20 hover:-translate-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Recent Activity"}),e.jsx("button",{onClick:u,className:"text-xs text-brand-400 hover:text-brand-300 font-medium transition-colors",children:"View All"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-1 [&::-webkit-scrollbar]:hidden",children:[c.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500",children:[e.jsx(ne,{className:"w-8 h-8 mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"No recent activity."})]}),c.length>0&&e.jsx("div",{className:"space-y-3",children:c.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3.5 hover:bg-slate-950 rounded-2xl transition-all border border-transparent hover:border-slate-800 group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg ${r.type==="income"?"bg-emerald-500/10 text-emerald-500":"bg-rose-500/10 text-rose-500"}`,children:r.category.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-200 text-sm group-hover:text-white transition-colors",children:r.category}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(r.date).toLocaleDateString()})]})]}),e.jsxs("span",{className:`font-semibold text-sm ${r.type==="income"?"text-emerald-400":"text-slate-200"}`,children:[r.type==="income"?"+":"-",P(r.amount)," ",e.jsx("span",{className:"text-[10px] text-slate-500",children:r.currency})]})]},r.id))})]})]})]})]}),rt=({transactions:t,baseCurrency:h,onDelete:n,onAdd:p,getTransactionValue:x,customCategories:c})=>{const[a,u]=b.useState(""),[r,d]=b.useState("All"),[y,f]=b.useState("All"),[o,s]=b.useState("All"),j=b.useMemo(()=>{const i=t.map(l=>l.category);return Array.from(new Set(i)).sort()},[t]),C=b.useMemo(()=>t.filter(i=>{const l=i.description?.toLowerCase().includes(a.toLowerCase())||i.category.toLowerCase().includes(a.toLowerCase()),S=r==="All"||i.category===r,m=y==="All"||i.type===y;let R=!0;if(o!=="All"){const N=parseInt(o),L=new Date;L.setDate(L.getDate()-N),L.setHours(0,0,0,0),R=new Date(i.date)>=L}return l&&S&&m&&R}),[t,a,r,y,o]);return e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Transactions"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Manage your income and expenses."})]}),e.jsxs("button",{onClick:p,className:"bg-white hover:bg-slate-200 text-black px-5 py-2.5 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(Z,{className:"w-4 h-4"})," New"]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-4 flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(Ze,{className:"absolute left-3 top-3 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:a,onChange:i=>u(i.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl pl-9 pr-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50"})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-1 md:pb-0",children:[e.jsxs("select",{value:r,onChange:i=>d(i.target.value),className:"bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-sm text-slate-300 outline-none focus:ring-1 focus:ring-inset focus:ring-brand-500",children:[e.jsx("option",{value:"All",children:"All Categories"}),j.map(i=>e.jsx("option",{value:i,children:i},i))]}),e.jsxs("select",{value:y,onChange:i=>f(i.target.value),className:"bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-sm text-slate-300 outline-none focus:ring-1 focus:ring-inset focus:ring-brand-500",children:[e.jsx("option",{value:"All",children:"All Types"}),e.jsx("option",{value:k.INCOME,children:"Income"}),e.jsx("option",{value:k.EXPENSE,children:"Expense"})]}),e.jsxs("select",{value:o,onChange:i=>s(i.target.value),className:"bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-sm text-slate-300 outline-none focus:ring-1 focus:ring-inset focus:ring-brand-500",children:[e.jsx("option",{value:"All",children:"All Time"}),e.jsx("option",{value:"30",children:"Last 30 Days"}),e.jsx("option",{value:"90",children:"Last 90 Days"}),e.jsx("option",{value:"365",children:"Last Year"})]})]})]}),e.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm text-slate-400",children:[e.jsx("thead",{className:"bg-slate-950/50 uppercase text-xs font-semibold tracking-wider text-slate-500 border-b border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Date"}),e.jsx("th",{className:"px-6 py-4",children:"Category"}),e.jsx("th",{className:"px-6 py-4",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Amount (Orig)"}),e.jsxs("th",{className:"px-6 py-4 text-right",children:["Value (",h,")"]}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800/50",children:[C.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-slate-500",children:"No transactions found matching your filters."})}),C.map(i=>e.jsxs("tr",{className:"hover:bg-slate-950/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 text-slate-300 font-medium",children:new Date(i.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium border ${i.type==="income"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400":"bg-rose-500/10 border-rose-500/20 text-rose-400"}`,children:i.category})}),e.jsx("td",{className:"px-6 py-4 text-slate-400 max-w-xs",children:e.jsx("div",{className:"truncate",title:i.description||"",children:i.description||"-"})}),e.jsxs("td",{className:"px-6 py-4 text-right font-medium text-slate-300",children:[P(i.amount)," ",e.jsx("span",{className:"text-xs text-slate-600",children:i.currency})]}),e.jsx("td",{className:`px-6 py-4 text-right font-medium ${i.type==="income"?"text-emerald-400":"text-slate-200"}`,children:P(x(i))}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>n(i.id),className:"p-2 text-slate-500 hover:text-rose-400 hover:bg-rose-500/10 rounded-lg transition-all",children:e.jsx(ee,{className:"w-4 h-4"})})})]},i.id))]})]})})})]})},lt=({data:t,onUpdate:h,baseCurrency:n,exchangeRates:p})=>{const[x,c]=b.useState(!1),[a,u]=b.useState({frequency:B.MONTHLY,currency:n,category:I.UTILITIES,active:!0,type:k.EXPENSE,exchangeRate:void 0}),r=()=>{const s=new Date;return s.setHours(0,0,0,0),(t.recurring||[]).filter(j=>{const C=new Date(j.nextDueDate);return C.setHours(0,0,0,0),j.active&&C<=s})},d=s=>{const j=s.exchangeRate||(s.currency===n?1:p[s.currency]),C={id:crypto.randomUUID(),amount:s.amount,currency:s.currency,category:s.category,type:s.type||k.EXPENSE,date:new Date().toISOString(),description:`Recurring: ${s.name}`,recordedBaseCurrency:n,exchangeRate:j},i=new Date(s.nextDueDate);s.frequency===B.MONTHLY?i.setMonth(i.getMonth()+1):s.frequency===B.WEEKLY?i.setDate(i.getDate()+7):s.frequency===B.YEARLY&&i.setFullYear(i.getFullYear()+1);const l=t.recurring.map(S=>S.id===s.id?{...S,nextDueDate:i.toISOString()}:S);h({...t,transactions:[C,...t.transactions],recurring:l})},y=()=>{if(!a.name||!a.amount)return;const s={id:crypto.randomUUID(),name:a.name,amount:Number(a.amount),currency:a.currency||n,frequency:a.frequency||B.MONTHLY,category:a.category||I.UTILITIES,nextDueDate:a.nextDueDate||new Date().toISOString(),active:!0,type:a.type||k.EXPENSE,exchangeRate:a.exchangeRate?Number(a.exchangeRate):void 0};h({...t,recurring:[...t.recurring||[],s]}),c(!1),u({frequency:B.MONTHLY,currency:n,category:I.UTILITIES,active:!0,type:k.EXPENSE,exchangeRate:void 0})},f=s=>{const j=Object.values(I).filter(i=>s===k.INCOME?H.includes(i):!H.includes(i)||i===I.OTHER),C=(t.customCategories||[]).filter(i=>i.type===s).map(i=>i.name);return[...j,...C]},o=r();return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Recurring Items"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Automate your regular income and expenses."})]}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-white hover:bg-slate-200 text-black px-5 py-2.5 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(Z,{className:"w-4 h-4"})," New"]})]}),o.length>0&&e.jsxs("div",{className:"bg-brand-900/20 border border-brand-500/30 rounded-3xl p-6",children:[e.jsxs("h3",{className:"text-brand-400 font-semibold mb-4 flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5"})," Due for Approval"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(s=>e.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded-xl flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-bold text-white",children:s.name}),e.jsx("span",{className:"text-xs bg-slate-800 text-slate-400 px-2 py-1 rounded",children:new Date(s.nextDueDate).toLocaleDateString()})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("p",{className:"text-lg font-mono text-slate-200",children:[P(s.amount)," ",s.currency]}),e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${s.type===k.INCOME?"text-emerald-400 bg-emerald-500/10":"text-rose-400 bg-rose-500/10"}`,children:s.type||"EXPENSE"})]}),s.exchangeRate&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Locked Rate: ",s.exchangeRate]})]}),e.jsx("button",{onClick:()=>d(s),className:"mt-4 w-full bg-brand-600 hover:bg-brand-500 text-white py-2 rounded-lg text-sm font-medium transition-colors",children:"Approve & Create"})]},s.id))})]}),e.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden shadow-sm",children:e.jsxs("table",{className:"w-full text-left text-sm text-slate-400",children:[e.jsx("thead",{className:"bg-slate-950/50 uppercase text-xs font-semibold tracking-wider text-slate-500 border-b border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Name"}),e.jsx("th",{className:"px-6 py-4",children:"Type"}),e.jsx("th",{className:"px-6 py-4",children:"Category"}),e.jsx("th",{className:"px-6 py-4",children:"Frequency"}),e.jsx("th",{className:"px-6 py-4",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Next Due"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800/50",children:[(t.recurring||[]).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-500",children:"No recurring items defined."})}),(t.recurring||[]).map(s=>e.jsxs("tr",{className:"hover:bg-slate-950/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-white font-medium",children:s.name}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded uppercase border ${s.type===k.INCOME?"text-emerald-400 border-emerald-500/20 bg-emerald-500/10":"text-rose-400 border-rose-500/20 bg-rose-500/10"}`,children:s.type||"EXPENSE"})}),e.jsx("td",{className:"px-6 py-4 text-slate-300",children:s.category}),e.jsx("td",{className:"px-6 py-4 text-slate-400",children:s.frequency}),e.jsxs("td",{className:"px-6 py-4 font-mono",children:[P(s.amount)," ",s.currency,s.exchangeRate&&e.jsxs("span",{className:"block text-[10px] text-slate-600",children:["@",s.exchangeRate]})]}),e.jsx("td",{className:"px-6 py-4",children:new Date(s.nextDueDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>h({...t,recurring:t.recurring.filter(j=>j.id!==s.id)}),className:"text-slate-500 hover:text-red-400",children:e.jsx(ee,{className:"w-4 h-4"})})})]},s.id))]})]})}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"New Recurring Item"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",placeholder:"Name (e.g. Salary, Netflix)",value:a.name||"",onChange:s=>u({...a,name:s.target.value})}),e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl border border-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>u({...a,type:k.EXPENSE,category:I.UTILITIES}),className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${a.type===k.EXPENSE?"bg-rose-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Expense"}),e.jsx("button",{type:"button",onClick:()=>u({...a,type:k.INCOME,category:I.INCOME}),className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${a.type===k.INCOME?"bg-emerald-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Income"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block",children:"Category"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:f(a.type).map(s=>e.jsx("button",{type:"button",onClick:()=>u({...a,category:s}),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all text-left truncate ${a.category===s?"bg-slate-800 border-brand-500 text-white":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-700"}`,children:s},s))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",type:"number",placeholder:"Amount",value:a.amount||"",onChange:s=>u({...a,amount:Number(s.target.value)})}),e.jsx("select",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",value:a.currency,onChange:s=>u({...a,currency:s.target.value}),children:Object.values(K).map(s=>e.jsx("option",{value:s,children:s},s))})]}),a.currency!==n&&e.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3",children:[e.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["Expected Exchange Rate (1 ",a.currency," = ?"," ",n,")"]}),e.jsx("input",{type:"number",step:"0.0001",placeholder:`Current: ${p[a.currency||"USD"]||1}`,value:a.exchangeRate||"",onChange:s=>u({...a,exchangeRate:Number(s.target.value)}),className:"w-full bg-transparent text-white focus:outline-none"}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:"Leave blank to use dynamic rate at time of approval."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",value:a.frequency,onChange:s=>u({...a,frequency:s.target.value}),children:Object.values(B).map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsxs("div",{className:"flex-1 relative group/date",children:[e.jsx("input",{type:"date",className:"w-full bg-slate-950 border border-slate-800 rounded-xl pl-4 pr-10 py-3 text-white text-sm focus:outline-none focus:ring-1 focus:ring-brand-500 transition-all cursor-pointer hover:border-slate-700 hover:bg-slate-900/50",value:a.nextDueDate?a.nextDueDate.split("T")[0]:"",onChange:s=>u({...a,nextDueDate:new Date(s.target.value).toISOString()})}),e.jsx(Ie,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-400 group-hover/date:text-brand-300 transition-colors pointer-events-none z-10"})]})]}),e.jsx("button",{onClick:y,className:"w-full bg-brand-600 text-white py-3 rounded-xl font-bold mt-6",children:"Save Recurring Item"}),e.jsx("button",{onClick:()=>c(!1),className:"w-full text-slate-500 py-2 hover:text-red-400 transition-colors",children:"Cancel"})]})]})})]})},nt=({data:t,onUpdate:h,baseCurrency:n,convertAmount:p})=>{const[x,c]=b.useState(!1),[a,u]=b.useState(!1),[r,d]=b.useState(null),[y,f]=b.useState(""),[o,s]=b.useState(null),[j,C]=b.useState({currency:n,color:"#60a5fa"}),i=m=>{d(m),f(""),s(null),u(!0)},l=()=>{if(!r||!y)return;const m=parseFloat(y);if(isNaN(m)||m<=0){s("Please enter a valid positive amount.");return}const R=r.targetAmount-r.currentAmount;if(m>R){s(`You cannot add more than the remaining amount (${P(R)} ${r.currency}).`);return}const N={id:crypto.randomUUID(),amount:m,currency:r.currency,type:k.EXPENSE,category:I.SAVINGS,date:new Date().toISOString(),description:`Contribution to ${r.name}`,recordedBaseCurrency:n},L=t.goals.map(A=>A.id===r.id?{...A,currentAmount:A.currentAmount+m}:A);h({...t,transactions:[N,...t.transactions],goals:L}),u(!1)},S=()=>{if(!j.name||!j.targetAmount)return;const m={id:crypto.randomUUID(),name:j.name,targetAmount:Number(j.targetAmount),currentAmount:0,currency:j.currency||n,color:j.color||"#60a5fa"};h({...t,goals:[...t.goals||[],m]}),c(!1),C({currency:n,color:"#60a5fa"})};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Savings Goals"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Visualize your targets."})]}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-white hover:bg-slate-200 text-black px-5 py-2.5 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(Z,{className:"w-4 h-4"})," New Goal"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(t.goals||[]).length===0?e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center p-12 text-center bg-slate-900 border border-slate-800 rounded-3xl border-dashed",children:[e.jsx("div",{className:"p-4 bg-slate-800 rounded-full mb-4",children:e.jsx(be,{className:"w-8 h-8 text-slate-500"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"No Goals Yet"}),e.jsx("p",{className:"text-slate-400 text-sm max-w-xs mb-6",children:"Create a savings goal to track your progress for things like a vacation, new car, or emergency fund."}),e.jsx("button",{onClick:()=>c(!0),className:"bg-brand-600 hover:bg-brand-500 text-white px-6 py-2.5 rounded-xl text-sm font-bold transition-all hover:scale-105 active:scale-95 shadow-lg shadow-brand-500/20",children:"Create your first goal"})]}):(t.goals||[]).map(m=>{const R=Math.min(100,m.currentAmount/m.targetAmount*100);return e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-sm relative overflow-hidden transition-all duration-300 hover:border-slate-700 hover:shadow-2xl hover:-translate-y-1 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsx("h3",{className:"font-bold text-lg text-white group-hover:text-brand-300 transition-colors",children:m.name}),e.jsx("button",{onClick:()=>h({...t,goals:t.goals.filter(N=>N.id!==m.id)}),className:"text-slate-600 hover:text-red-400 transition-colors bg-slate-950/50 p-2 rounded-lg hover:bg-red-500/10",children:e.jsx(ee,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mb-4 relative z-10",children:e.jsxs("p",{className:"text-3xl font-bold text-white",children:[P(m.currentAmount)," ",e.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["/ ",P(m.targetAmount)," ",m.currency]})]})}),e.jsx("div",{className:"w-full bg-slate-800 h-3 rounded-full overflow-hidden relative z-10 mb-6",children:e.jsx("div",{className:"h-full transition-all duration-1000 ease-out relative overflow-hidden",style:{width:`${R}%`,backgroundColor:m.color},children:e.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]"})})}),e.jsx("button",{onClick:()=>i(m),className:"w-full bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-xl font-medium transition-colors relative z-10 border border-slate-700",children:"+ Add Funds"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 rounded-full opacity-25 blur-2xl pointer-events-none",style:{backgroundColor:m.color}})]},m.id)})}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"New Goal"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",placeholder:"Goal Name (e.g. Japan Trip)",value:j.name||"",onChange:m=>C({...j,name:m.target.value})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",type:"number",placeholder:"Target Amount",value:j.targetAmount||"",onChange:m=>C({...j,targetAmount:Number(m.target.value)})}),e.jsx("select",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3 text-white",value:j.currency,onChange:m=>C({...j,currency:m.target.value}),children:Object.values(K).map(m=>e.jsx("option",{value:m,children:m},m))})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Color:"}),e.jsx("input",{type:"color",className:"bg-transparent h-10 w-10 cursor-pointer",value:j.color,onChange:m=>C({...j,color:m.target.value})})]}),e.jsx("button",{onClick:S,className:"w-full bg-brand-600 text-white py-3 rounded-xl font-bold mt-6",children:"Create Goal"}),e.jsx("button",{onClick:()=>c(!1),className:"w-full text-slate-500 py-2 hover:text-red-400 transition-colors",children:"Cancel"})]})]})}),a&&r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Add Funds"}),e.jsxs("p",{className:"text-slate-400 text-sm mb-4",children:["Adding to ",e.jsx("strong",{children:r.name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white pl-8",type:"number",placeholder:"Amount",value:y,onChange:m=>f(m.target.value),autoFocus:!0}),e.jsx("span",{className:"absolute left-3 top-3 text-slate-500",children:"$"})]}),o&&e.jsx("p",{className:"text-red-400 text-xs bg-red-900/20 p-2 rounded-lg border border-red-900/30",children:o}),e.jsx("button",{onClick:l,className:"w-full bg-brand-600 text-white py-3 rounded-xl font-bold mt-6",children:"Confirm Deposit"}),e.jsx("button",{onClick:()=>u(!1),className:"w-full text-slate-500 py-2 hover:text-red-400 transition-colors",children:"Cancel"})]})]})})]})},ot=({data:t,onUpdateData:h,onVaultDeleted:n,exchangeRates:p})=>{const[x,c]=b.useState(""),[a,u]=b.useState(k.EXPENSE),[r,d]=b.useState(null),[y,f]=b.useState(!1),[o,s]=b.useState("csv"),j=()=>{if(!x.trim())return;const l=Object.values(I),S=(t.customCategories||[]).map(R=>R.name);if(l.includes(x)||S.includes(x)){alert("Category already exists");return}const m={name:x.trim(),type:a};h({...t,customCategories:[...t.customCategories||[],m]}),c("")},C=l=>{h({...t,customCategories:(t.customCategories||[]).filter(S=>S.name!==l)})},i=()=>{if(d(null),!(t.transactions.length>0||(t.goals||[]).length>0||(t.recurring||[]).length>0)){d({type:"error",text:"Export Failed: Vault is empty. Add some data first."});return}const S=localStorage.getItem(G),m=localStorage.getItem(Y);if(!S||!m){d({type:"error",text:"Export Failed: No secure data found to export."});return}const R={salt:S,data:m,version:"1.0",timestamp:new Date().toISOString()},N=JSON.stringify(R),L=new Blob([N],{type:"application/json"}),A=URL.createObjectURL(L),_=document.createElement("a");_.href=A;const W=t.vaultName?t.vaultName.replace(/[^a-z0-9]/gi,"_").toLowerCase():"vault",U=new Date().toISOString().split("T")[0];_.download=`${W}_backup_${U}.vf`,document.body.appendChild(_),_.click(),document.body.removeChild(_),d({type:"success",text:"Backup downloaded successfully."}),setTimeout(()=>d(null),3e3)};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Settings"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Configure your vault."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Vault Name"}),e.jsx("input",{type:"text",name:"username",maxLength:21,value:t.vaultName||"",onChange:l=>{const S=l.target.value;h({...t,vaultName:S}),S.trim()&&localStorage.setItem(Q,S)},className:`w-full bg-slate-950 border rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50 ${t.vaultName?.trim()?"border-slate-800 focus:border-transparent":"border-red-500/50 focus:border-red-500"}`,placeholder:"Name your vault"}),!t.vaultName?.trim()&&e.jsx("p",{className:"text-xs text-red-400 mt-2",children:"Vault name is required."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Base Currency"}),e.jsx("select",{value:t.baseCurrency,onChange:l=>h({...t,baseCurrency:l.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50",children:Object.values(K).map(l=>e.jsx("option",{value:l,children:l},l))}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"All transactions will be converted to this currency for aggregation."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Auto Lock Timer"}),e.jsxs("select",{value:t.autoLockDuration,onChange:l=>h({...t,autoLockDuration:Number(l.target.value)}),className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-500/50",children:[e.jsx("option",{value:6e4,children:"1 Minute"}),e.jsx("option",{value:3e5,children:"5 Minutes"}),e.jsx("option",{value:9e5,children:"15 Minutes"}),e.jsx("option",{value:18e5,children:"30 Minutes"}),e.jsx("option",{value:0,children:"Never"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Automatically lock vault after inactivity."})]})]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Custom Categories (Tags)"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl border border-slate-800",children:[e.jsx("button",{onClick:()=>u(k.EXPENSE),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all ${a===k.EXPENSE?"bg-rose-500/20 text-rose-400":"text-slate-500"}`,children:"Expense"}),e.jsx("button",{onClick:()=>u(k.INCOME),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all ${a===k.INCOME?"bg-emerald-500/20 text-emerald-400":"text-slate-500"}`,children:"Income"})]}),e.jsx("input",{value:x,onChange:l=>c(l.target.value),placeholder:"New Tag Name",className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl px-3 text-white text-sm"}),e.jsx("button",{onClick:j,className:"bg-brand-600 hover:bg-brand-500 text-white px-4 rounded-xl text-sm font-bold",children:"Add"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(t.customCategories||[]).filter(l=>l.type===a).map(l=>e.jsxs("span",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-slate-700 bg-slate-800 text-sm text-slate-300",children:[l.name,e.jsx("button",{onClick:()=>C(l.name),className:"text-slate-500 hover:text-red-400",children:e.jsx(ee,{className:"w-3 h-3"})})]},l.name)),Object.values(I).filter(l=>a===k.INCOME?H.includes(l):!H.includes(l)||l===I.OTHER).map(l=>e.jsx("span",{className:"px-3 py-1.5 rounded-lg border border-slate-800 bg-slate-950 text-sm text-slate-500 cursor-not-allowed",title:"Default Category",children:l},l))]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Data Management"}),r&&e.jsx("div",{className:`mb-4 px-4 py-3 rounded-xl border text-sm ${r.type==="error"?"bg-red-900/20 border-red-900/50 text-red-400":"bg-emerald-900/20 border-emerald-900/50 text-emerald-400"}`,children:r.text}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-slate-950 rounded-xl border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"Export Transactions"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Download history as CSV or Excel."})]}),e.jsxs("div",{className:"flex bg-slate-900 border border-slate-800 rounded-lg p-1 w-fit mb-2",children:[e.jsx("button",{onClick:()=>s("csv"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${o==="csv"?"bg-slate-700 text-white shadow-sm":"text-slate-500 hover:text-slate-300"}`,children:"CSV"}),e.jsx("button",{onClick:()=>s("excel"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${o==="excel"?"bg-emerald-600/20 text-emerald-400 shadow-sm":"text-slate-500 hover:text-slate-300"}`,children:"Excel"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[{label:"Last 15 Days",val:15},{label:"Last 1 Month",val:30},{label:"Last 3 Months",val:90},{label:"Last 6 Months",val:180},{label:"Last 1 Year",val:365},{label:"All Time",val:"all"}].map(l=>e.jsx("button",{onClick:()=>{d(null);const S=t.transactions||[];if(S.length===0){d({type:"error",text:"Export Failed: No transactions to export."});return}let m=S;if(l.val!=="all"){const O=Number(l.val),F=new Date;F.setDate(F.getDate()-O),F.setHours(0,0,0,0),m=S.filter(M=>new Date(M.date)>=F)}if(m.length===0){d({type:"error",text:"Export Failed: No transactions found in this range."});return}const R="\uFEFF",N=o==="excel"?"	":",",L=o==="excel"?"xls":"csv",A=["Date","Type","Category","Description","Amount","Currency"],_=m.map(O=>{const F=M=>`"${(M||"").replace(/"/g,'""')}"`;return[new Date(O.date).toLocaleDateString(),O.type,F(O.category),F(O.description||""),O.amount,O.currency].join(N)}),W=R+[A.join(N),..._].join(`
`),U=new Blob([W],{type:o==="excel"?"application/vnd.ms-excel;charset=utf-8":"text/csv;charset=utf-8"}),oe=URL.createObjectURL(U),$=document.createElement("a");$.href=oe,$.download=`transactions_${l.val==="all"?"all_time":l.val+"_days"}_${new Date().toISOString().split("T")[0]}.${L}`,document.body.appendChild($),$.click(),document.body.removeChild($),d({type:"success",text:`Successfully exported ${m.length} transactions (${o.toUpperCase()}).`}),setTimeout(()=>d(null),3e3)},className:"px-3 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-xs font-medium transition-colors border border-slate-700 hover:border-slate-600 hover:text-brand-300",children:l.label},l.label))})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950 rounded-xl border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"Export Data"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Download an encrypted backup file (.vf)."})]}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Download"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-900/10 rounded-xl border border-red-900/30",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-400 font-medium",children:"Delete Vault"}),e.jsx("p",{className:"text-sm text-red-400/60",children:"Permanently delete all data and reset."})]}),e.jsx("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg text-sm font-medium transition-colors",children:"Delete"})]})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Delete Vault?"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"This will permanently erase all your financial data and reset the application. This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white py-2.5 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{n(),f(!1)},className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-2.5 rounded-xl font-medium transition-colors",children:"Delete Forever"})]})]})})]})},it=({onClose:t,onSave:h,baseCurrency:n,exchangeRates:p,customCategories:x})=>{const[c,a]=b.useState(""),[u,r]=b.useState(n),[d,y]=b.useState(k.EXPENSE),[f,o]=b.useState(I.FOOD),[s,j]=b.useState(new Date().toISOString().split("T")[0]),[C,i]=b.useState(""),[l,S]=b.useState(""),m=b.useMemo(()=>{const N=Object.values(I).filter(A=>d===k.INCOME?H.includes(A):!H.includes(A)||A===I.OTHER),L=(x||[]).filter(A=>A.type===d).map(A=>A.name);return[...N,...L]},[d,x]);b.useEffect(()=>{m.includes(f)||o(m[0]||"")},[d,m]),b.useEffect(()=>{S("")},[u]);const R=N=>{if(N.preventDefault(),!c)return;const L=l?parseFloat(l):u===n?1:p[u]||1,A={id:crypto.randomUUID(),amount:parseFloat(c),currency:u,type:d,category:f,date:new Date(s).toISOString(),description:C,recordedBaseCurrency:n,exchangeRate:L};h(A)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl scale-100 animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"New Transaction"}),e.jsx("button",{onClick:t,className:"text-slate-500 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.01",value:c,onChange:N=>a(N.target.value),placeholder:"0.00",className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-4 py-3 text-2xl font-bold text-white placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-brand-500/50",autoFocus:!0}),e.jsx("div",{className:"absolute right-2 top-2 bottom-2",children:e.jsx("select",{value:u,onChange:N=>r(N.target.value),className:"h-full bg-slate-900 border border-slate-800 rounded-xl px-3 text-white text-sm font-medium focus:outline-none focus:ring-1 focus:ring-brand-500",children:Object.values(K).map(N=>e.jsx("option",{value:N,children:N},N))})})]})}),u!==n&&e.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3",children:[e.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["Exchange Rate (1 ",u," = ? ",n,")"]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"number",step:"any",value:l,onChange:N=>S(N.target.value),placeholder:`${p[u]||"1.0"}`,className:"flex-1 bg-transparent text-white focus:outline-none font-mono text-sm"}),e.jsx("button",{type:"button",onClick:()=>S(String(p[u]||1)),className:"text-[10px] text-brand-400 hover:text-brand-300 uppercase font-bold tracking-wider",children:"Auto"})]}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:l?`Using custom rate: 1 ${u} = ${l} ${n}`:`Using market rate: 1 ${u} = ${p[u]||1} ${n}`})]}),e.jsxs("div",{className:"flex bg-slate-950 p-1 rounded-xl border border-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>{y(k.EXPENSE)},className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${d===k.EXPENSE?"bg-rose-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Expense"}),e.jsx("button",{type:"button",onClick:()=>{y(k.INCOME)},className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${d===k.INCOME?"bg-emerald-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Income"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block",children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-36 overflow-y-auto pr-1 categories-container",children:m.map(N=>e.jsx("button",{type:"button",onClick:()=>o(N),className:`px-3 py-1.5 rounded-lg text-xs font-medium border transition-all ${f===N?"bg-brand-600 border-brand-500 text-white shadow-lg shadow-brand-600/20":"bg-slate-950/50 border-slate-800 text-slate-400 hover:border-slate-700 hover:text-slate-200"}`,children:N},N))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block text-center",children:"Date"}),e.jsxs("div",{className:"relative group/date",children:[e.jsx("input",{type:"date",value:s,onChange:N=>j(N.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl pl-4 pr-10 py-2.5 text-white text-sm focus:outline-none focus:ring-1 focus:ring-brand-500 transition-all cursor-pointer hover:border-slate-700 hover:bg-slate-900/50"}),e.jsx(Ie,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-400 group-hover/date:text-brand-300 transition-colors pointer-events-none z-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5 block text-center",children:"Note"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:C,onChange:N=>i(N.target.value),placeholder:"What is this for?",className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-3 py-2.5 text-white text-sm focus:outline-none focus:ring-1 focus:ring-brand-500 hover:border-slate-700 transition-all"})})]})]}),e.jsx("button",{type:"submit",disabled:!c,className:"w-full bg-white hover:bg-slate-200 text-black font-bold py-3.5 rounded-xl transition-all shadow-lg mt-6 disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Transaction"})]})]})})},ct="modulepreload",dt=function(t){return"/vault_finance/"+t},Ce={},xt=function(h,n,p){let x=Promise.resolve();if(n&&n.length>0){let r=function(d){return Promise.all(d.map(y=>Promise.resolve(y).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");x=r(n.map(d=>{if(d=dt(d),d in Ce)return;Ce[d]=!0;const y=d.endsWith(".css"),f=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const o=document.createElement("link");if(o.rel=y?"stylesheet":ct,y||(o.as="script"),o.crossOrigin="",o.href=d,u&&o.setAttribute("nonce",u),document.head.appendChild(o),y)return new Promise((s,j)=>{o.addEventListener("load",s),o.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${d}`)))})}))}function c(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return x.then(a=>{for(const u of a||[])u.status==="rejected"&&c(u.reason);return h().catch(c)})};function ut(t={}){const{immediate:h=!1,onNeedRefresh:n,onOfflineReady:p,onRegistered:x,onRegisteredSW:c,onRegisterError:a}=t;let u,r;const d=async(f=!0)=>{await r};async function y(){if("serviceWorker"in navigator){if(u=await xt(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/vault_finance/sw.js",{scope:"/vault_finance/",type:"classic"})).catch(f=>{a?.(f)}),!u)return;u.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),u.addEventListener("installed",f=>{f.isUpdate||p?.()}),u.register({immediate:h}).then(f=>{c?c("/vault_finance/sw.js",f):x?.(f)}).catch(f=>{a?.(f)})}}return r=y(),d}ut({immediate:!0,onRegistered(t){},onRegisterError(t){}});const Ae=document.getElementById("root");if(!Ae)throw new Error("Could not find root element to mount to");const mt=He.createRoot(Ae);mt.render(e.jsx(De.StrictMode,{children:e.jsx(et,{})}));
